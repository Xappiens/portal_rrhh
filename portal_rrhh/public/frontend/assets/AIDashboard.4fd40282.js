var h=(o,s,m)=>new Promise((g,t)=>{var i=d=>{try{x(m.next(d))}catch(b){t(b)}},r=d=>{try{x(m.throw(d))}catch(b){t(b)}},x=d=>d.done?g(d.value):Promise.resolve(d.value).then(i,r);x((m=m.apply(o,s)).next())});import{q as w,Z as u,o as l,c as a,b as e,f as c,t as n,n as f,F as p,x as y}from"./vendor.209ea08f.js";const v={name:"AIDashboard",data(){return{stats:{cvsAnalyzed:0,reportsGenerated:0,successRate:0},recentAnalyses:[],recentReports:[],showReports:!1,loading:!1,error:null,refreshInterval:null,lastRefreshTime:null}},mounted(){this.loadDashboardData(),this.startAutoRefresh()},beforeUnmount(){this.stopAutoRefresh()},activated(){this.loadDashboardData(),this.startAutoRefresh()},deactivated(){this.stopAutoRefresh()},watch:{$route(o,s){o.name==="AIDashboard"&&this.loadDashboardData()}},methods:{loadDashboardData(o=!1){return h(this,null,function*(){var s,m,g;o||(this.loading=!0),this.error=null;try{const t=yield u("ai_hr_recruitment.ai_hr_recruitment.www.ai_dashboard.get_dashboard_data",{limit:10});if(t){t.stats&&(this.stats={cvsAnalyzed:(s=t.stats.cvsAnalyzed)!=null?s:0,reportsGenerated:(m=t.stats.reportsGenerated)!=null?m:0,successRate:(g=t.stats.successRate)!=null?g:0});const i=Array.isArray(t.recent_analyses)?JSON.parse(JSON.stringify(t.recent_analyses)):[];this.recentAnalyses=i,this.lastRefreshTime=new Date,this.showReports&&(yield this.loadReports()),this.$nextTick(()=>{this.$forceUpdate&&this.$forceUpdate()})}else this.error="No se devolvieron datos del servidor"}catch(t){this.error=t.message||t.exc||"Error al cargar los datos del panel. Por favor verifica tu conexi\xF3n."}finally{this.loading=!1}})},loadReports(){return h(this,null,function*(){try{const o=yield u("ai_hr_recruitment.ai_hr_recruitment.www.ai_dashboard.get_recent_reports",{limit:10});this.recentReports=Array.isArray(o)?JSON.parse(JSON.stringify(o)):[]}catch(o){this.recentReports=[]}})},toggleReportsView(){return h(this,null,function*(){this.showReports=!this.showReports,this.showReports&&(yield this.loadReports())})},viewReport(o){o.name&&this.$router.push({name:"RecruitmentReports",query:{reportId:o.name}})},goToReports(){this.$router.push({name:"RecruitmentReports"})},getScoreClass(o){return o>=80?"high":o>=60?"medium":"low"},formatDate(o){if(!o)return"N/A";try{return new Date(o).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return o}},viewAnalysis(o){o.name&&this.$router.push({name:"CVAnalysis",params:{jobApplicant:o.job_applicant||"",jobOpening:o.job_opening||""},query:{analysisId:o.name}})},goToAnalysis(){this.$router.push({name:"CVAnalysis"})},startAutoRefresh(){this.stopAutoRefresh(),this.refreshInterval=setInterval(()=>{this.loadDashboardData(!0)},3e4)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)}}},_={class:"flex-1 h-full p-4 sm:p-6 bg-gray-50 overflow-y-auto"},R={class:"mb-6 sm:mb-8 pb-4 sm:pb-6 border-b border-gray-200"},A={class:"flex flex-col sm:flex-row justify-between items-start gap-4"},k={class:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto"},D={key:0,class:"hidden sm:inline text-xs text-gray-500"},C=["disabled"],I={key:0},T={key:1},j={key:0,class:"mb-4 sm:mb-6 bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0"},V={class:"flex items-start sm:items-center gap-2 sm:gap-3 flex-1 min-w-0"},z={class:"text-red-700 text-xs sm:text-sm break-words"},N={key:1,class:"text-center py-16"},S={key:2},q={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8"},G={class:"bg-white rounded-lg shadow p-4 sm:p-6 hover:shadow-lg transition-shadow"},O={class:"flex items-center"},P={class:"ml-3 sm:ml-4 flex-1 min-w-0"},U={class:"text-2xl sm:text-3xl font-bold text-gray-900"},E={class:"flex items-center"},J={class:"ml-3 sm:ml-4 flex-1 min-w-0"},B={class:"text-2xl sm:text-3xl font-bold text-gray-900"},F={key:0,class:"text-xs text-green-600 mt-1 font-semibold"},L={class:"bg-white rounded-lg shadow p-4 sm:p-6 hover:shadow-lg transition-shadow"},H={class:"flex items-center"},Z={class:"ml-3 sm:ml-4 flex-1 min-w-0"},K={class:"text-2xl sm:text-3xl font-bold text-gray-900"},M={class:"bg-white rounded-lg shadow p-4 sm:p-6"},Q={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 mb-4 sm:mb-6 pb-3 sm:pb-4 border-b border-gray-200"},W={class:"flex items-center gap-2 sm:gap-3 flex-wrap"},X={class:"text-base sm:text-lg font-semibold text-gray-900"},Y={key:0},$={key:1},ee={key:0,class:"px-2 sm:px-3 py-1 bg-blue-500 text-white rounded-full text-xs font-semibold"},se={key:0,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},te={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"},re=["onClick"],oe={class:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4"},le={class:"flex-1 min-w-0"},ae={class:"text-sm sm:text-base font-semibold text-gray-900 truncate mb-1"},ie={key:0,class:"text-xs text-gray-500 mt-1"},ne={class:"flex justify-between items-center pt-3 sm:pt-4 border-t border-gray-200"},de={class:"flex flex-col items-center px-3 sm:px-4 py-2 rounded-lg font-semibold shadow-sm bg-green-500 text-white"},me={class:"text-lg sm:text-xl"},xe={key:0,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},ce={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"},ge=["onClick"],he={class:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4"},pe={class:"w-12 h-12 sm:w-14 sm:h-14 rounded-lg bg-blue-500 flex items-center justify-center text-white text-lg sm:text-2xl font-bold flex-shrink-0 shadow-md"},be={class:"flex-1 min-w-0"},ue={class:"text-sm sm:text-base font-semibold text-gray-900 truncate mb-1"},fe={class:"text-xs sm:text-sm text-gray-600 truncate"},ye={key:0,class:"text-xs text-gray-500 mt-1"},we={class:"flex justify-between items-center pt-3 sm:pt-4 border-t border-gray-200"},ve={class:"text-lg sm:text-xl"};function _e(o,s,m,g,t,i){return l(),a("div",_,[e("div",R,[e("div",A,[s[6]||(s[6]=e("div",{class:"flex-1 min-w-0"},[e("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2"},"\u{1F916} Panel de Reclutamiento con IA"),e("p",{class:"text-xs sm:text-sm text-gray-600"},"Rastrea an\xE1lisis de CV e informaci\xF3n de reclutamiento")],-1)),e("div",k,[t.refreshInterval?(l(),a("span",D,"Actualizaci\xF3n autom\xE1tica cada 30s")):c("",!0),e("button",{onClick:s[0]||(s[0]=(...r)=>i.loadDashboardData&&i.loadDashboardData(...r)),disabled:t.loading,class:"flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm sm:text-base"},[t.loading?(l(),a("span",I,"\u{1F504} Cargando...")):(l(),a("span",T,"\u{1F504} Actualizar"))],8,C)])])]),t.error?(l(),a("div",j,[e("div",V,[s[7]||(s[7]=e("strong",{class:"text-red-800 text-xs sm:text-sm"},"\u26A0\uFE0F Error:",-1)),e("span",z,n(t.error),1)]),e("button",{onClick:s[1]||(s[1]=(...r)=>i.loadDashboardData&&i.loadDashboardData(...r)),class:"px-3 py-1 bg-red-600 text-white rounded text-xs sm:text-sm font-semibold hover:bg-red-700 flex-shrink-0"},"Reintentar")])):c("",!0),t.loading&&!t.stats.cvsAnalyzed?(l(),a("div",N,[...s[8]||(s[8]=[e("div",{class:"inline-block w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-gray-600"},"Cargando datos del panel...",-1)])])):(l(),a("div",S,[e("div",q,[e("div",G,[e("div",O,[s[11]||(s[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-xl sm:text-2xl"},"\u{1F4CA}")])],-1)),e("div",P,[s[9]||(s[9]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"CVs Analizados",-1)),e("p",U,n(t.stats.cvsAnalyzed||0),1),s[10]||(s[10]=e("p",{class:"text-xs text-gray-500 mt-1"},"Total de an\xE1lisis completados",-1))])])]),e("div",{class:f(["bg-white rounded-lg shadow p-4 sm:p-6 hover:shadow-lg transition-shadow cursor-pointer",t.showReports?"ring-2 ring-green-500":""]),onClick:s[2]||(s[2]=(...r)=>i.toggleReportsView&&i.toggleReportsView(...r))},[e("div",E,[s[14]||(s[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 sm:w-12 sm:h-12 bg-green-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-xl sm:text-2xl"},"\u{1F4C4}")])],-1)),e("div",J,[s[12]||(s[12]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Reportes Generados",-1)),e("p",B,n(t.stats.reportsGenerated||0),1),s[13]||(s[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"Reportes de reclutamiento creados",-1)),t.showReports?(l(),a("p",F,"\u2190 Haz clic para ver reportes")):c("",!0)])])],2),e("div",L,[e("div",H,[s[17]||(s[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 sm:w-12 sm:h-12 bg-yellow-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-xl sm:text-2xl"},"\u2705")])],-1)),e("div",Z,[s[15]||(s[15]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Tasa de \xC9xito",-1)),e("p",K,n(t.stats.successRate||0)+"%",1),s[16]||(s[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"Tasa de finalizaci\xF3n de an\xE1lisis",-1))])])])]),e("div",M,[e("div",Q,[e("div",W,[e("h3",X,[t.showReports?(l(),a("span",$,"\u{1F4C4} Reportes Recientes")):(l(),a("span",Y,"\u{1F4CB} An\xE1lisis de CV Recientes"))]),t.showReports?(l(),a("button",{key:0,onClick:s[3]||(s[3]=r=>t.showReports=!1),class:"px-2 sm:px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-semibold"}," \u2190 Volver a An\xE1lisis ")):c("",!0)]),(t.showReports?t.recentReports:t.recentAnalyses).length>0?(l(),a("span",ee,n((t.showReports?t.recentReports:t.recentAnalyses).length)+" "+n(t.showReports?"reporte":"an\xE1lisis")+n(((t.showReports?t.recentReports:t.recentAnalyses).length===1,"")),1)):c("",!0)]),t.showReports?(l(),a(p,{key:0},[t.recentReports.length===0?(l(),a("div",se,[s[18]||(s[18]=e("div",{class:"text-5xl mb-4"},"\u{1F4ED}",-1)),s[19]||(s[19]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"A\xFAn no hay reportes",-1)),s[20]||(s[20]=e("p",{class:"text-sm text-gray-600 mb-6"},"Comienza a generar reportes de reclutamiento para verlos aqu\xED.",-1)),e("button",{onClick:s[4]||(s[4]=(...r)=>i.goToReports&&i.goToReports(...r)),class:"px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600"}," Ir a Reportes \u2192 ")])):(l(),a("div",te,[(l(!0),a(p,null,y(t.recentReports,(r,x)=>(l(),a("div",{key:`report-${r.name}-${t.lastRefreshTime?t.lastRefreshTime.getTime():x}`,class:"bg-gray-50 rounded-lg p-4 sm:p-5 border-2 border-gray-200 hover:border-green-400 cursor-pointer transition-all hover:shadow-lg",onClick:d=>i.viewReport(r)},[e("div",oe,[s[21]||(s[21]=e("div",{class:"w-12 h-12 sm:w-14 sm:h-14 rounded-lg bg-green-500 flex items-center justify-center text-white text-xl sm:text-2xl font-bold flex-shrink-0 shadow-md"}," \u{1F4C4} ",-1)),e("div",le,[e("h4",ae,n(r.job_title||"Posici\xF3n Desconocida"),1),r.report_timestamp?(l(),a("p",ie,n(i.formatDate(r.report_timestamp)),1)):c("",!0)])]),e("div",ne,[e("div",de,[s[22]||(s[22]=e("span",{class:"text-xs opacity-90 mb-1"},"Candidatos",-1)),e("span",me,n(r.total_candidates||0),1)]),s[23]||(s[23]=e("span",{class:"text-xs sm:text-sm text-green-600 font-semibold hover:text-green-800"},"Ver Reporte \u2192",-1))])],8,re))),128))]))],64)):(l(),a(p,{key:1},[t.recentAnalyses.length===0?(l(),a("div",xe,[s[24]||(s[24]=e("div",{class:"text-5xl mb-4"},"\u{1F4ED}",-1)),s[25]||(s[25]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"A\xFAn no hay an\xE1lisis",-1)),s[26]||(s[26]=e("p",{class:"text-sm text-gray-600 mb-6"},"Comienza a analizar CVs para ver los resultados aqu\xED.",-1)),e("button",{onClick:s[5]||(s[5]=(...r)=>i.goToAnalysis&&i.goToAnalysis(...r)),class:"px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600"}," Ir a An\xE1lisis de CV \u2192 ")])):(l(),a("div",ce,[(l(!0),a(p,null,y(t.recentAnalyses,(r,x)=>(l(),a("div",{key:`analysis-${r.name}-${t.lastRefreshTime?t.lastRefreshTime.getTime():x}`,class:"bg-gray-50 rounded-lg p-4 sm:p-5 border-2 border-gray-200 hover:border-blue-400 cursor-pointer transition-all hover:shadow-lg",onClick:d=>i.viewAnalysis(r)},[e("div",he,[e("div",pe,n((r.candidate_name||"U")[0].toUpperCase()),1),e("div",be,[e("h4",ue,n(r.candidate_name||"Candidato Desconocido"),1),e("p",fe,n(r.job_title||"Posici\xF3n Desconocida"),1),r.analysis_timestamp?(l(),a("p",ye,n(i.formatDate(r.analysis_timestamp)),1)):c("",!0)])]),e("div",we,[e("div",{class:f(["flex flex-col items-center px-3 sm:px-4 py-2 rounded-lg font-semibold shadow-sm",i.getScoreClass(r.overall_score)==="high"?"bg-green-500 text-white":i.getScoreClass(r.overall_score)==="medium"?"bg-yellow-500 text-white":"bg-red-500 text-white"])},[s[27]||(s[27]=e("span",{class:"text-xs opacity-90 mb-1"},"Puntuaci\xF3n",-1)),e("span",ve,n(r.overall_score||0)+"%",1)],2),s[28]||(s[28]=e("span",{class:"text-xs sm:text-sm text-blue-600 font-semibold hover:text-blue-800"},"Ver Detalles \u2192",-1))])],8,ge))),128))]))],64))])]))])}var ke=w(v,[["render",_e],["__scopeId","data-v-32f578fc"]]);export{ke as default};
