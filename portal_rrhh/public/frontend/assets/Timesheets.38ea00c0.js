var ke=Object.defineProperty,we=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var ce=(I,b,r)=>b in I?ke(I,b,{enumerable:!0,configurable:!0,writable:!0,value:r}):I[b]=r,me=(I,b)=>{for(var r in b||(b={}))Ye.call(b,r)&&ce(I,r,b[r]);if(ue)for(var r of ue(b))De.call(b,r)&&ce(I,r,b[r]);return I},he=(I,b)=>we(I,Me(b));var G=(I,b,r)=>new Promise((w,Y)=>{var E=V=>{try{j(r.next(V))}catch(H){Y(H)}},S=V=>{try{j(r.throw(V))}catch(H){Y(H)}},j=V=>V.done?w(V.value):Promise.resolve(V.value).then(E,S);j((r=r.apply(I,b)).next())});import{a3 as Ce,r as y,l as ve,a5 as Se,K as fe,q as Q,a6 as Ve,u as h,o as _,c as $,b as s,t as i,d as C,w as N,_ as He,e as z,Q as R,f as F,J as pe,a7 as _e,X as Te,s as ee,F as ae,E as oe,C as ge,a1 as W,$ as Ne,a0 as Ee,a4 as ne,R as Ue}from"./vendor.5466f047.js";import{d as k}from"./es.327155e1.js";var ye={exports:{}};(function(I,b){(function(r,w){I.exports=w()})(Ce,function(){var r,w,Y=1e3,E=6e4,S=36e5,j=864e5,V=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H=31536e6,A=2628e6,L=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,T={years:H,months:A,days:j,hours:S,minutes:E,seconds:Y,milliseconds:1,weeks:6048e5},D=function(p){return p instanceof K},g=function(p,n,e){return new K(p,e,n.$l)},M=function(p){return w.p(p)+"s"},P=function(p){return p<0},U=function(p){return P(p)?Math.ceil(p):Math.floor(p)},J=function(p){return Math.abs(p)},q=function(p,n){return p?P(p)?{negative:!0,format:""+J(p)+n}:{negative:!1,format:""+p+n}:{negative:!1,format:""}},K=function(){function p(e,a,d){var u=this;if(this.$d={},this.$l=d,e===void 0&&(this.$ms=0,this.parseFromMilliseconds()),a)return g(e*T[M(a)],this);if(typeof e=="number")return this.$ms=e,this.parseFromMilliseconds(),this;if(typeof e=="object")return Object.keys(e).forEach(function(O){u.$d[M(O)]=e[O]}),this.calMilliseconds(),this;if(typeof e=="string"){var v=e.match(L);if(v){var x=v.slice(2).map(function(O){return O!=null?Number(O):0});return this.$d.years=x[0],this.$d.months=x[1],this.$d.weeks=x[2],this.$d.days=x[3],this.$d.hours=x[4],this.$d.minutes=x[5],this.$d.seconds=x[6],this.calMilliseconds(),this}}return this}var n=p.prototype;return n.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(a,d){return a+(e.$d[d]||0)*T[d]},0)},n.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=U(e/H),e%=H,this.$d.months=U(e/A),e%=A,this.$d.days=U(e/j),e%=j,this.$d.hours=U(e/S),e%=S,this.$d.minutes=U(e/E),e%=E,this.$d.seconds=U(e/Y),e%=Y,this.$d.milliseconds=e},n.toISOString=function(){var e=q(this.$d.years,"Y"),a=q(this.$d.months,"M"),d=+this.$d.days||0;this.$d.weeks&&(d+=7*this.$d.weeks);var u=q(d,"D"),v=q(this.$d.hours,"H"),x=q(this.$d.minutes,"M"),O=this.$d.seconds||0;this.$d.milliseconds&&(O+=this.$d.milliseconds/1e3,O=Math.round(1e3*O)/1e3);var X=q(O,"S"),te=e.negative||a.negative||u.negative||v.negative||x.negative||X.negative,se=v.format||x.format||X.format?"T":"",Z=(te?"-":"")+"P"+e.format+a.format+u.format+se+v.format+x.format+X.format;return Z==="P"||Z==="-P"?"P0D":Z},n.toJSON=function(){return this.toISOString()},n.format=function(e){var a=e||"YYYY-MM-DDTHH:mm:ss",d={Y:this.$d.years,YY:w.s(this.$d.years,2,"0"),YYYY:w.s(this.$d.years,4,"0"),M:this.$d.months,MM:w.s(this.$d.months,2,"0"),D:this.$d.days,DD:w.s(this.$d.days,2,"0"),H:this.$d.hours,HH:w.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:w.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:w.s(this.$d.seconds,2,"0"),SSS:w.s(this.$d.milliseconds,3,"0")};return a.replace(V,function(u,v){return v||String(d[u])})},n.as=function(e){return this.$ms/T[M(e)]},n.get=function(e){var a=this.$ms,d=M(e);return d==="milliseconds"?a%=1e3:a=d==="weeks"?U(a/T[d]):this.$d[d],a||0},n.add=function(e,a,d){var u;return u=a?e*T[M(a)]:D(e)?e.$ms:g(e,this).$ms,g(this.$ms+u*(d?-1:1),this)},n.subtract=function(e,a){return this.add(e,a,!0)},n.locale=function(e){var a=this.clone();return a.$l=e,a},n.clone=function(){return g(this.$ms,this)},n.humanize=function(e){return r().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},n.valueOf=function(){return this.asMilliseconds()},n.milliseconds=function(){return this.get("milliseconds")},n.asMilliseconds=function(){return this.as("milliseconds")},n.seconds=function(){return this.get("seconds")},n.asSeconds=function(){return this.as("seconds")},n.minutes=function(){return this.get("minutes")},n.asMinutes=function(){return this.as("minutes")},n.hours=function(){return this.get("hours")},n.asHours=function(){return this.as("hours")},n.days=function(){return this.get("days")},n.asDays=function(){return this.as("days")},n.weeks=function(){return this.get("weeks")},n.asWeeks=function(){return this.as("weeks")},n.months=function(){return this.get("months")},n.asMonths=function(){return this.as("months")},n.years=function(){return this.get("years")},n.asYears=function(){return this.as("years")},p}(),B=function(p,n,e){return p.add(n.years()*e,"y").add(n.months()*e,"M").add(n.days()*e,"d").add(n.hours()*e,"h").add(n.minutes()*e,"m").add(n.seconds()*e,"s").add(n.milliseconds()*e,"ms")};return function(p,n,e){r=e,w=e().$utils(),e.duration=function(u,v){var x=e.locale();return g(u,{$l:x},v)},e.isDuration=D;var a=n.prototype.add,d=n.prototype.subtract;n.prototype.add=function(u,v){return D(u)?B(this,u,1):a.bind(this)(u,v)},n.prototype.subtract=function(u,v){return D(u)?B(this,u,-1):d.bind(this)(u,v)}}})})(ye);var je=ye.exports;const Ie={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-100 p-4 mb-6"},Le={class:"flex flex-col md:flex-row justify-between items-center gap-4"},Oe={class:"text-lg font-bold text-gray-900"},Be={key:0,class:"font-medium text-sm text-gray-500 mt-1"},Re={key:0,class:"flex items-center space-x-2 text-green-600"},ze={key:1,class:"text-gray-500"},Ae={key:1,class:"font-medium text-sm text-gray-500 mt-1"},Fe={key:0},Pe={class:"flex flex-col items-center justify-center gap-4 py-6"},qe={class:"text-center"},Ge={class:"font-bold text-3xl mb-1"},We={class:"font-medium text-gray-500"},Je={key:0,class:"w-full"},Ke={key:0,class:"font-medium text-gray-500 text-sm mb-2 text-center"},Qe={key:1,class:"rounded overflow-hidden w-full h-48 border bg-gray-50"},Xe=["src"],Ze={key:2,class:"h-48 bg-gray-100 flex items-center justify-center text-gray-400 rounded"},et="Employee Checkin",tt={__name:"CheckInWidget",setup(I){k.extend(je);const b=a=>k(a).format("HH:mm"),r=(a,d)=>{if(!a)return"";let u=a;return d&&d.length&&d.forEach((v,x)=>{u=u.replace(`{${x}}`,v)}),u},w=y(null),Y=y(0),E=y(0),S=y(""),j=y(!1),V=y(!1),H=y("00:00:00"),A=y("0h 0m");let L=null;const T=ve({url:"hrms.api.get_current_employee_info",auto:!0}),D=ve({url:"hrms.api.get_hr_settings",auto:!0}),g=Se({doctype:et,fields:["name","log_type","time"],orderBy:"time desc",pageLength:50,auto:!1});fe(()=>T.data,a=>{a&&a.name&&(g.filters={employee:a.name,time:[">=",k().startOf("day").format("YYYY-MM-DD HH:mm:ss")]},g.reload())});const M=Q(()=>g.list.loading||!g.data||g.data.length===0?null:g.data[0]),P=Q(()=>M.value&&M.value.log_type==="IN"?"check-in":"check-out"),U=Q(()=>!M.value||M.value.log_type==="OUT"?{action:"IN",label:r("Entrar")}:{action:"OUT",label:r("Salir")}),J=()=>{if(M.value&&M.value.log_type==="IN"){const a=k(M.value.time),u=k().diff(a);H.value=k.duration(u).format("HH:mm:ss")}},q=()=>{if(!g.data)return;const a=[...g.data].sort((x,O)=>new Date(x.time)-new Date(O.time));let d=0,u=null;a.forEach(x=>{x.log_type==="IN"?u=k(x.time):x.log_type==="OUT"&&u&&(d+=k(x.time).diff(u),u=null)});const v=k.duration(d);A.value=`${Math.floor(v.asHours())}h ${v.minutes()}m`};fe(M,a=>{L&&clearInterval(L),a&&a.log_type==="IN"?(J(),L=setInterval(J,1e3)):H.value="00:00:00",q()},{immediate:!0}),Ve(()=>{L&&clearInterval(L)});const K=a=>{Y.value=a.coords.latitude,E.value=a.coords.longitude,S.value=[r("Latitud: {0}\xB0",[Number(Y.value).toFixed(5)]),r("Longitud: {0}\xB0",[Number(E.value).toFixed(5)])].join(", ")},B=a=>{S.value="No se pudo obtener tu ubicaci\xF3n",a&&(S.value+=`: ERROR(${a.code}): ${a.message}`)},p=()=>{navigator.geolocation?(S.value=r("Localizando..."),navigator.geolocation.getCurrentPosition(K,B)):S.value=r("Geolocalizaci\xF3n no soportada por tu navegador")},n=()=>{var a;w.value=k().format("YYYY-MM-DD HH:mm:ss"),j.value=!0,((a=D.data)==null?void 0:a.allow_geolocation_tracking)&&p()},e=a=>G(this,null,function*(){const d=r(a==="IN"?"Entrada":"Salida");V.value=!0;try{yield g.insert.submit({employee:T.data.name,log_type:a,time:w.value,latitude:Y.value,longitude:E.value}),_e({title:r("\xC9xito"),text:r("\xA1{0} registrada correctamente!",[d]),icon:"check-circle",position:"bottom-center",iconClasses:"text-green-500"}),j.value=!1,g.reload()}catch(u){_e({title:r("Error"),text:r("\xA1Fallo al registrar {0}!",[d]),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"}),console.error(u)}finally{V.value=!1}});return(a,d)=>{var u;return h(T).data?(_(),$("div",Ie,[s("div",Le,[s("div",null,[s("h2",Oe,i(r("Hola, {0} \u{1F44B}",[h(T).data.first_name])),1),M.value?(_(),$("div",Be,[P.value==="check-in"?(_(),$("div",Re,[d[2]||(d[2]=s("span",{class:"relative flex h-3 w-3"},[s("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),s("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})],-1)),s("span",null,i(r("En curso: {0}",[H.value])),1)])):(_(),$("div",ze,[s("span",null,i(r("Total hoy: {0}",[A.value])),1),d[3]||(d[3]=s("span",{class:"mx-1"},"\xB7",-1)),s("span",null,i(r("\xDAltimo check-out: {0}",[b(M.value.time)])),1)]))])):(_(),$("div",Ae,i(h(k)().format("D MMMM, YYYY")),1))]),((u=h(D).data)==null?void 0:u.allow_employee_checkin_from_mobile_app)?(_(),$("div",Fe,[C(h(R),{size:"lg",variant:"solid",theme:U.value.action==="IN"?"green":"gray",onClick:n,class:"!px-6 !py-2 !text-base shadow-sm"},{prefix:N(()=>[C(h(He),{name:U.value.action==="IN"?"log-in":"log-out",class:"w-5 h-5 mr-1"},null,8,["name"])]),default:N(()=>[z(" "+i(U.value.label),1)]),_:1},8,["theme"])])):F("",!0)]),C(h(pe),{modelValue:j.value,"onUpdate:modelValue":d[1]||(d[1]=v=>j.value=v),options:{title:U.value.label,size:"md"}},{"body-content":N(()=>{var v;return[s("div",Pe,[s("div",qe,[s("div",Ge,i(h(k)(w.value).format("HH:mm:ss")),1),s("div",We,i(h(k)().format("D MMM, YYYY")),1)]),((v=h(D).data)==null?void 0:v.allow_geolocation_tracking)?(_(),$("div",Je,[S.value?(_(),$("div",Ke,i(S.value),1)):F("",!0),Y.value&&E.value?(_(),$("div",Qe,[s("iframe",{width:"100%",height:"100%",frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0",style:{border:"0"},src:`https://maps.google.com/maps?q=${Y.value},${E.value}&hl=es&z=15&output=embed`},null,8,Xe)])):(_(),$("div",Ze,i(r("Obteniendo ubicaci\xF3n...")),1))])):F("",!0)])]}),actions:N(()=>[C(h(R),{variant:"solid",class:"w-full",size:"lg",loading:V.value,onClick:d[0]||(d[0]=v=>e(U.value.action))},{default:N(()=>[z(i(r("Confirmar {0}",[U.value.label])),1)]),_:1},8,["loading"])]),_:1},8,["modelValue","options"])])):F("",!0)}}},st={class:"flex flex-col h-full overflow-hidden"},at={class:"flex-1 overflow-y-auto p-5"},ot={class:"mb-6 flex items-center justify-between"},nt={class:"text-2xl font-bold text-gray-900"},lt={class:"flex space-x-2"},it={key:0,class:"bg-white rounded shadow p-4"},rt={key:0,class:"text-center py-4"},dt={key:1,class:"text-center py-4 text-gray-500"},ut={key:2,class:"w-full text-left border-collapse"},ct={class:"border-b"},mt={class:"p-2"},ht={class:"p-2"},vt={class:"p-2"},ft={class:"p-2"},pt={class:"p-2"},_t={class:"p-2"},gt={class:"p-2"},yt={class:"p-2"},bt={key:3,class:"mt-4 text-center"},xt={key:1,class:"bg-white rounded shadow p-4"},$t={class:"mb-4 flex items-center justify-between bg-gray-50 p-3 rounded"},kt={class:"flex items-center space-x-4"},wt={class:"text-lg font-medium"},Mt={class:"mb-4"},Yt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Dt={class:"bg-blue-50 p-3 rounded border border-blue-100"},Ct={class:"block text-xs uppercase text-blue-500 font-bold tracking-wider"},St={class:"text-2xl font-bold text-blue-700"},Vt={class:"text-lg font-semibold mb-2"},Ht={class:"space-y-4"},Tt={class:"grid grid-cols-12 gap-2 text-sm font-medium text-gray-500 border-b pb-2"},Nt={class:"col-span-2"},Et={class:"col-span-3"},Ut={class:"col-span-2"},jt={class:"col-span-3"},It={class:"col-span-1"},Lt={class:"col-span-1 text-right"},Ot={class:"col-span-2"},Bt=["onUpdate:modelValue","disabled"],Rt=["value"],zt={class:"col-span-3"},At={class:"col-span-2"},Ft=["onClickCapture"],Pt={class:"col-span-1"},qt={class:"col-span-1 text-right pt-1"},Gt={key:0,class:"pt-2"},Wt={class:"mt-8 flex justify-end space-x-3 pt-4 border-t"},Jt={class:"mt-2"},le=20,Zt={__name:"Timesheets",setup(I){k.locale("es");const b=y("list"),r=y(!1),w=y(!1),Y=y(!1),E=y([]),S=y(!0),j=y(0),V=y([]),H=y([]),A=y([]),L=y({}),T=y({}),D=y(k().startOf("week").format("YYYY-MM-DD")),g=y([]),M=y(!1),P=y(!1),U=y(""),J=Q(()=>k(D.value).endOf("week").format("YYYY-MM-DD")),q=Q(()=>{const l=[];let o=k(D.value);for(let t=0;t<7;t++)l.push({date:o.add(t,"day").format("YYYY-MM-DD"),label:o.add(t,"day").format("dddd")});return l}),K=Q(()=>g.value.reduce((l,o)=>l+(parseFloat(o.hours)||0),0)),B=Q(()=>T.value.docstatus===1),p=(l=!0)=>G(this,null,function*(){l?(r.value=!0,j.value=0,E.value=[],S.value=!0):w.value=!0;try{const o=yield W("portal_rrhh.api.timesheets.get_timesheets",{start:j.value,page_length:le});o&&o.length>0?(E.value=l?o:[...E.value,...o],j.value+=le,o.length<le&&(S.value=!1)):S.value=!1}catch(o){console.error(o)}finally{r.value=!1,w.value=!1}}),n=()=>{p(!1)},e=()=>G(this,null,function*(){try{const[l,o,t,m]=yield Promise.all([W("portal_rrhh.api.timesheets.get_sedes"),W("portal_rrhh.api.timesheets.get_courses"),W("portal_rrhh.api.timesheets.get_programs"),W("portal_rrhh.api.timesheets.get_user_settings")]);V.value=l||[],H.value=o||[],A.value=t||[],L.value=m||{}}catch(l){console.error(l)}}),a=(l,o)=>{let t;return(...m)=>{clearTimeout(t),t=setTimeout(()=>l(...m),o)}},d=a((l,o)=>G(this,null,function*(){if(!l&&!o)return;const t=typeof o=="object"&&o!==null?o.value:o;try{const m=yield W("portal_rrhh.api.timesheets.get_courses",{txt:l,program:t});H.value=m||[]}catch(m){console.error(m)}}),300),u=a(l=>G(this,null,function*(){if(!!l)try{const o=yield W("portal_rrhh.api.timesheets.get_programs",{txt:l});A.value=o||[]}catch(o){console.error(o)}}),300),v=l=>k(l).format("DD/MM/YYYY"),x=l=>k(l).format("DD/MM"),O=l=>l==="Submitted"||l==="Aprobado"?"green":l==="Draft"||l==="Borrador"?"gray":l==="Rejected"||l==="Rechazado"?"red":"blue",X=()=>{T.value={status:"Borrador"},D.value=k().startOf("week").format("YYYY-MM-DD"),g.value=[],g.value.push({date:D.value,hours:0,sede:L.value.default_sede?{label:L.value.default_sede_name,value:L.value.default_sede}:null,course:null,expediente:null}),M.value=!0,b.value="edit"},te=l=>G(this,null,function*(){r.value=!0;try{const o=yield W("portal_rrhh.api.timesheets.get_timesheet_details",{name:l});T.value=o,D.value=o.start_date,g.value=(o.custom_sede_time_logs||[]).map(t=>({date:t.date,hours:t.hours,sede:t.sede&&V.value.find(m=>m.name===t.sede)?{label:V.value.find(m=>m.name===t.sede).room_name,value:t.sede}:t.sede,course:H.value.find(m=>m.name===t.course)?{label:H.value.find(m=>m.name===t.course).custom_display_identifier||H.value.find(m=>m.name===t.course).course_name,value:t.course}:t.course,expediente:A.value.find(m=>m.name===t.expediente)?{label:A.value.find(m=>m.name===t.expediente).custom_num_de_expediente,value:t.expediente}:t.expediente})),M.value=!1,b.value="edit"}catch(o){console.error(o)}finally{r.value=!1}}),se=l=>{D.value=k(D.value).add(l,"week").format("YYYY-MM-DD")},Z=()=>{const l=g.value[g.value.length-1],o=l?l.date:D.value;g.value.push({date:o,hours:0,sede:L.value.default_sede?{label:L.value.default_sede_name,value:L.value.default_sede}:null,course:null,expediente:null})},be=l=>{g.value.splice(l,1)},ie=(l=!1)=>G(this,null,function*(){Y.value=!0;try{const o={name:T.value.name,start_date:D.value,end_date:J.value,logs:g.value.map(m=>{var c,re,de;return he(me({},m),{sede:((c=m.sede)==null?void 0:c.value)||m.sede,course:((re=m.course)==null?void 0:re.value)||m.course,expediente:((de=m.expediente)==null?void 0:de.value)||m.expediente})})},t=yield W("portal_rrhh.api.timesheets.save_timesheet",{data:JSON.stringify(o)});return T.value=t,M.value=!1,t}catch(o){console.error(o)}finally{Y.value=!1}}),xe=()=>G(this,null,function*(){const l=k(),o=k(J.value);let t=[];l.isBefore(o)&&K.value<40&&t.push("La semana a\xFAn no ha terminado y/o parece que no has completado una jornada completa."),U.value=t.length>0?t.join(`
`)+`
`+f("Recuerda: El timesheet debe validarse al final de la semana o con todas las horas registradas."):f("Vas a cerrar y validar este registro de horas."),P.value=!0}),$e=()=>G(this,null,function*(){P.value=!1,Y.value=!0;try{const l=yield ie(!0);l&&(yield W("portal_rrhh.api.timesheets.submit_timesheet",{name:l.name}),yield te(l.name))}catch(l){console.error(l)}finally{Y.value=!1}}),f=l=>l;return Te(()=>{p(),e()}),(l,o)=>(_(),$("div",st,[s("div",at,[s("div",ot,[s("h1",nt,i(f("Registro de Horas")),1),s("div",lt,[b.value==="edit"?(_(),ee(h(R),{key:0,variant:"outline",onClick:o[0]||(o[0]=t=>b.value="list")},{default:N(()=>[z(i(f("Volver al listado")),1)]),_:1})):F("",!0),b.value==="list"?(_(),ee(h(R),{key:1,variant:"solid",theme:"gray",size:"md",label:"Nuevo Registro Semanal",loading:r.value,onClick:X,class:"!bg-gray-900 !text-white hover:!bg-gray-800"},{default:N(()=>[z(i(f("Nuevo Registro Semanal")),1)]),_:1},8,["loading"])):F("",!0)])]),C(tt),b.value==="list"?(_(),$("div",it,[r.value?(_(),$("div",rt,i(f("Cargando...")),1)):E.value.length===0?(_(),$("div",dt,i(f("No hay registros de horas. Crea uno nuevo.")),1)):(_(),$("table",ut,[s("thead",null,[s("tr",ct,[s("th",mt,i(f("Semana")),1),s("th",ht,i(f("Horas Totales")),1),s("th",vt,i(f("Estado")),1),s("th",ft,i(f("Acciones")),1)])]),s("tbody",null,[(_(!0),$(ae,null,oe(E.value,t=>(_(),$("tr",{key:t.name,class:"border-b hover:bg-gray-50"},[s("td",pt,i(v(t.start_date))+" - "+i(v(t.end_date)),1),s("td",_t,i(t.total_hours)+" h",1),s("td",gt,[C(h(ge),{variant:O(t.status)},{default:N(()=>[z(i(t.status),1)]),_:2},1032,["variant"])]),s("td",yt,[C(h(R),{size:"sm",variant:"ghost",onClick:m=>te(t.name)},{default:N(()=>[z(i(f("Ver / Editar")),1)]),_:1},8,["onClick"])])]))),128))])])),S.value?(_(),$("div",bt,[C(h(R),{variant:"subtle",loading:w.value,onClick:n},{default:N(()=>[z(i(f("Cargar anteriores")),1)]),_:1},8,["loading"])])):F("",!0)])):(_(),$("div",xt,[s("div",$t,[s("div",kt,[C(h(R),{icon:"chevron-left",variant:"ghost",onClick:o[1]||(o[1]=t=>se(-1)),disabled:!M.value},null,8,["disabled"]),s("div",wt,i(f("Semana del"))+" "+i(v(D.value))+" "+i(f("al"))+" "+i(v(J.value)),1),C(h(R),{icon:"chevron-right",variant:"ghost",onClick:o[2]||(o[2]=t=>se(1)),disabled:!M.value},null,8,["disabled"])]),s("div",null,[C(h(ge),{size:"lg",variant:O(T.value.status)},{default:N(()=>[z(i(T.value.status||"Borrador"),1)]),_:1},8,["variant"])])]),s("div",Mt,[s("div",Yt,[s("div",Dt,[s("span",Ct,i(f("Total Horas")),1),s("span",St,i(K.value)+" h",1)])])]),s("h3",Vt,i(f("Detalle de Actividad")),1),s("div",Ht,[s("div",Tt,[s("div",Nt,i(f("Fecha")),1),s("div",Et,i(f("Sede")),1),s("div",Ut,i(f("Expediente")),1),s("div",jt,i(f("Curso")),1),s("div",It,i(f("Horas")),1),s("div",Lt,i(f("Acciones")),1)]),(_(!0),$(ae,null,oe(g.value,(t,m)=>(_(),$("div",{key:m,class:"grid grid-cols-12 gap-2 items-start border-b py-2"},[s("div",Ot,[Ne(s("select",{"onUpdate:modelValue":c=>t.date=c,class:"form-select w-full text-sm border-gray-300 rounded focus:ring-blue-500 py-1.5",disabled:B.value},[(_(!0),$(ae,null,oe(q.value.map(c=>({label:c.label+" ("+x(c.date)+")",value:c.date})),c=>(_(),$("option",{key:c.value,value:c.value},i(c.label),9,Rt))),128))],8,Bt),[[Ee,t.date]])]),s("div",zt,[C(h(ne),{modelValue:t.sede,"onUpdate:modelValue":c=>t.sede=c,options:V.value.map(c=>({label:c.room_name,value:c.name})),disabled:B.value,placeholder:"Seleccionar Sede"},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]),s("div",At,[C(h(ne),{modelValue:t.expediente,"onUpdate:modelValue":[c=>t.expediente=c,()=>{t.course=null}],options:A.value.map(c=>({label:c.custom_num_de_expediente,value:c.name})),disabled:B.value,placeholder:"Buscar Exp...","onUpdate:query":o[3]||(o[3]=c=>h(u)(c))},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]),s("div",{class:"col-span-3",onClickCapture:c=>h(d)("",t.expediente)},[C(h(ne),{modelValue:t.course,"onUpdate:modelValue":c=>t.course=c,options:H.value.map(c=>({label:c.custom_display_identifier||c.course_name,value:c.name})),disabled:B.value||!t.expediente,placeholder:"Buscar Curso...","onUpdate:query":c=>h(d)(c,t.expediente)},null,8,["modelValue","onUpdate:modelValue","options","disabled","onUpdate:query"])],40,Ft),s("div",Pt,[C(h(Ue),{type:"number",modelValue:t.hours,"onUpdate:modelValue":c=>t.hours=c,modelModifiers:{number:!0},disabled:B.value,min:"0",step:"0.5"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),s("div",qt,[B.value?F("",!0):(_(),ee(h(R),{key:0,icon:"trash-2",variant:"ghost",class:"text-red-500 hover:text-red-700",onClick:c=>be(m)},null,8,["onClick"]))])]))),128)),B.value?F("",!0):(_(),$("div",Gt,[C(h(R),{variant:"outline",icon:"plus",class:"w-full",onClick:Z},{default:N(()=>[z(i(f("A\xF1adir Registro")),1)]),_:1})]))]),s("div",Wt,[B.value?F("",!0):(_(),ee(h(R),{key:0,variant:"subtle",onClick:o[4]||(o[4]=t=>ie(!1)),loading:Y.value},{default:N(()=>[z(i(f("Guardar Borrador")),1)]),_:1},8,["loading"])),B.value?F("",!0):(_(),ee(h(R),{key:1,variant:"solid",onClick:xe,loading:Y.value},{default:N(()=>[z(i(f("Validar y Enviar")),1)]),_:1},8,["loading"]))])]))]),C(h(pe),{modelValue:P.value,"onUpdate:modelValue":o[6]||(o[6]=t=>P.value=t),title:f("Advertencia de Env\xEDo")},{"body-content":N(()=>[s("p",null,i(U.value),1),s("p",Jt,i(f("\xBFEst\xE1s seguro de que quieres validar este registro ahora? Ya no podr\xE1s editarlo despu\xE9s.")),1)]),actions:N(()=>[C(h(R),{variant:"outline",onClick:o[5]||(o[5]=t=>P.value=!1)},{default:N(()=>[z(i(f("Cancelar")),1)]),_:1}),C(h(R),{variant:"solid",theme:"red",onClick:$e},{default:N(()=>[z(i(f("S\xED, Validar")),1)]),_:1})]),_:1},8,["modelValue","title"])]))}};export{Zt as default};
