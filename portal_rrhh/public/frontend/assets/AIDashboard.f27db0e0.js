var b=(o,t,c)=>new Promise((m,s)=>{var i=d=>{try{g(c.next(d))}catch(p){s(p)}},r=d=>{try{g(c.throw(d))}catch(p){s(p)}},g=d=>d.done?m(d.value):Promise.resolve(d.value).then(i,r);g((c=c.apply(o,t)).next())});import{q as _,X as u,o as n,c as l,b as e,f as h,t as a,n as y,F as x,x as f}from"./vendor.47156cf5.js";const v={name:"AIDashboard",data(){return{stats:{cvsAnalyzed:0,reportsGenerated:0,successRate:0},recentAnalyses:[],recentReports:[],showReports:!1,loading:!1,error:null,refreshInterval:null,lastRefreshTime:null}},mounted(){this.loadDashboardData(),this.startAutoRefresh()},beforeUnmount(){this.stopAutoRefresh()},activated(){this.loadDashboardData(),this.startAutoRefresh()},deactivated(){this.stopAutoRefresh()},watch:{$route(o,t){o.name==="AIDashboard"&&this.loadDashboardData()}},methods:{loadDashboardData(o=!1){return b(this,null,function*(){var t,c,m;o||(this.loading=!0),this.error=null;try{const s=yield u("ai_hr_recruitment.ai_hr_recruitment.www.ai_dashboard.get_dashboard_data",{limit:10});if(s){s.stats&&(this.stats={cvsAnalyzed:(t=s.stats.cvsAnalyzed)!=null?t:0,reportsGenerated:(c=s.stats.reportsGenerated)!=null?c:0,successRate:(m=s.stats.successRate)!=null?m:0});const i=Array.isArray(s.recent_analyses)?JSON.parse(JSON.stringify(s.recent_analyses)):[];this.recentAnalyses=i,this.lastRefreshTime=new Date,this.showReports&&(yield this.loadReports()),this.$nextTick(()=>{this.$forceUpdate&&this.$forceUpdate()})}else this.error="No data returned from server"}catch(s){this.error=s.message||s.exc||"Failed to load dashboard data. Please check your connection."}finally{this.loading=!1}})},loadReports(){return b(this,null,function*(){try{const o=yield u("ai_hr_recruitment.ai_hr_recruitment.www.ai_dashboard.get_recent_reports",{limit:10});this.recentReports=Array.isArray(o)?JSON.parse(JSON.stringify(o)):[]}catch(o){this.recentReports=[]}})},toggleReportsView(){return b(this,null,function*(){this.showReports=!this.showReports,this.showReports&&(yield this.loadReports())})},viewReport(o){o.name&&this.$router.push({name:"RecruitmentReports",query:{reportId:o.name}})},goToReports(){this.$router.push({name:"RecruitmentReports"})},getScoreClass(o){return o>=80?"high":o>=60?"medium":"low"},formatDate(o){if(!o)return"N/A";try{return new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return o}},viewAnalysis(o){o.name&&this.$router.push({name:"CVAnalysis",params:{jobApplicant:o.job_applicant||"",jobOpening:o.job_opening||""},query:{analysisId:o.name}})},goToAnalysis(){this.$router.push({name:"CVAnalysis"})},startAutoRefresh(){this.stopAutoRefresh(),this.refreshInterval=setInterval(()=>{this.loadDashboardData(!0)},3e4)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)}}},w={class:"flex-1 p-6 bg-gray-50"},R={class:"mb-8 pb-6 border-b border-gray-200"},k={class:"flex justify-between items-start"},A={class:"flex items-center gap-3"},D={key:0,class:"text-xs text-gray-500"},C=["disabled"],j={key:0},T={key:1},I={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center justify-between"},V={class:"flex items-center gap-3"},S={class:"text-red-700"},N={key:1,class:"text-center py-16"},U={key:2},z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},G={class:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow"},O={class:"flex items-center"},B={class:"ml-4"},J={class:"text-3xl font-bold text-gray-900"},L={class:"flex items-center"},q={class:"ml-4"},F={class:"text-3xl font-bold text-gray-900"},P={key:0,class:"text-xs text-green-600 mt-1 font-semibold"},E={class:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow"},X={class:"flex items-center"},H={class:"ml-4"},K={class:"text-3xl font-bold text-gray-900"},M={class:"bg-white rounded-lg shadow p-6"},Q={class:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200"},W={class:"flex items-center gap-3"},Y={class:"text-lg font-semibold text-gray-900"},Z={key:0},$={key:1},ee={key:0,class:"px-3 py-1 bg-blue-500 text-white rounded-full text-xs font-semibold"},te={key:0,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},se={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},re=["onClick"],oe={class:"flex items-center gap-4 mb-4"},ne={class:"flex-1 min-w-0"},le={class:"text-base font-semibold text-gray-900 truncate mb-1"},ie={key:0,class:"text-xs text-gray-500 mt-1"},ae={class:"flex justify-between items-center pt-4 border-t border-gray-200"},de={class:"flex flex-col items-center px-4 py-2 rounded-lg font-semibold shadow-sm bg-green-500 text-white"},ce={class:"text-xl"},ge={key:0,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},he={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},me=["onClick"],be={class:"flex items-center gap-4 mb-4"},xe={class:"w-14 h-14 rounded-lg bg-blue-500 flex items-center justify-center text-white text-2xl font-bold flex-shrink-0 shadow-md"},pe={class:"flex-1 min-w-0"},ue={class:"text-base font-semibold text-gray-900 truncate mb-1"},ye={class:"text-sm text-gray-600 truncate"},fe={key:0,class:"text-xs text-gray-500 mt-1"},_e={class:"flex justify-between items-center pt-4 border-t border-gray-200"},ve={class:"text-xl"};function we(o,t,c,m,s,i){return n(),l("div",w,[e("div",R,[e("div",k,[t[6]||(t[6]=e("div",null,[e("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"\u{1F916} AI Recruitment Dashboard"),e("p",{class:"text-sm text-gray-600"},"Track CV analyses and recruitment insights")],-1)),e("div",A,[s.refreshInterval?(n(),l("span",D,"Auto-refreshing every 30s")):h("",!0),e("button",{onClick:t[0]||(t[0]=(...r)=>i.loadDashboardData&&i.loadDashboardData(...r)),disabled:s.loading,class:"px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed"},[s.loading?(n(),l("span",j,"\u{1F504} Loading...")):(n(),l("span",T,"\u{1F504} Refresh"))],8,C)])])]),s.error?(n(),l("div",I,[e("div",V,[t[7]||(t[7]=e("strong",{class:"text-red-800"},"\u26A0\uFE0F Error:",-1)),e("span",S,a(s.error),1)]),e("button",{onClick:t[1]||(t[1]=(...r)=>i.loadDashboardData&&i.loadDashboardData(...r)),class:"px-3 py-1 bg-red-600 text-white rounded text-sm font-semibold hover:bg-red-700"},"Retry")])):h("",!0),s.loading&&!s.stats.cvsAnalyzed?(n(),l("div",N,[...t[8]||(t[8]=[e("div",{class:"inline-block w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-gray-600"},"Loading dashboard data...",-1)])])):(n(),l("div",U,[e("div",z,[e("div",G,[e("div",O,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-2xl"},"\u{1F4CA}")])],-1)),e("div",B,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-500"},"CVs Analyzed",-1)),e("p",J,a(s.stats.cvsAnalyzed||0),1),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 mt-1"},"Total completed analyses",-1))])])]),e("div",{class:y(["bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",s.showReports?"ring-2 ring-green-500":""]),onClick:t[2]||(t[2]=(...r)=>i.toggleReportsView&&i.toggleReportsView(...r))},[e("div",L,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-2xl"},"\u{1F4C4}")])],-1)),e("div",q,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-500"},"Reports Generated",-1)),e("p",F,a(s.stats.reportsGenerated||0),1),t[13]||(t[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"Recruitment reports created",-1)),s.showReports?(n(),l("p",P,"\u2190 Click to view reports")):h("",!0)])])],2),e("div",E,[e("div",X,[t[17]||(t[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-2xl"},"\u2705")])],-1)),e("div",H,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-500"},"Success Rate",-1)),e("p",K,a(s.stats.successRate||0)+"%",1),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"Analysis completion rate",-1))])])])]),e("div",M,[e("div",Q,[e("div",W,[e("h3",Y,[s.showReports?(n(),l("span",$,"\u{1F4C4} Recent Reports")):(n(),l("span",Z,"\u{1F4CB} Recent CV Analysis"))]),s.showReports?(n(),l("button",{key:0,onClick:t[3]||(t[3]=r=>s.showReports=!1),class:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-semibold"}," \u2190 Back to Analyses ")):h("",!0)]),(s.showReports?s.recentReports:s.recentAnalyses).length>0?(n(),l("span",ee,a((s.showReports?s.recentReports:s.recentAnalyses).length)+" "+a(s.showReports?"report":"analysis")+a((s.showReports?s.recentReports:s.recentAnalyses).length===1?"":"s"),1)):h("",!0)]),s.showReports?(n(),l(x,{key:0},[s.recentReports.length===0?(n(),l("div",te,[t[18]||(t[18]=e("div",{class:"text-5xl mb-4"},"\u{1F4ED}",-1)),t[19]||(t[19]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"No reports yet",-1)),t[20]||(t[20]=e("p",{class:"text-sm text-gray-600 mb-6"},"Start generating recruitment reports to see them here.",-1)),e("button",{onClick:t[4]||(t[4]=(...r)=>i.goToReports&&i.goToReports(...r)),class:"px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600"}," Go to Reports \u2192 ")])):(n(),l("div",se,[(n(!0),l(x,null,f(s.recentReports,(r,g)=>(n(),l("div",{key:`report-${r.name}-${s.lastRefreshTime?s.lastRefreshTime.getTime():g}`,class:"bg-gray-50 rounded-lg p-5 border-2 border-gray-200 hover:border-green-400 cursor-pointer transition-all hover:shadow-lg",onClick:d=>i.viewReport(r)},[e("div",oe,[t[21]||(t[21]=e("div",{class:"w-14 h-14 rounded-lg bg-green-500 flex items-center justify-center text-white text-2xl font-bold flex-shrink-0 shadow-md"}," \u{1F4C4} ",-1)),e("div",ne,[e("h4",le,a(r.job_title||"Unknown Position"),1),r.report_timestamp?(n(),l("p",ie,a(i.formatDate(r.report_timestamp)),1)):h("",!0)])]),e("div",ae,[e("div",de,[t[22]||(t[22]=e("span",{class:"text-xs opacity-90 mb-1"},"Candidates",-1)),e("span",ce,a(r.total_candidates||0),1)]),t[23]||(t[23]=e("span",{class:"text-sm text-green-600 font-semibold hover:text-green-800"},"View Report \u2192",-1))])],8,re))),128))]))],64)):(n(),l(x,{key:1},[s.recentAnalyses.length===0?(n(),l("div",ge,[t[24]||(t[24]=e("div",{class:"text-5xl mb-4"},"\u{1F4ED}",-1)),t[25]||(t[25]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"No analysis yet",-1)),t[26]||(t[26]=e("p",{class:"text-sm text-gray-600 mb-6"},"Start analyzing CVs to see results here.",-1)),e("button",{onClick:t[5]||(t[5]=(...r)=>i.goToAnalysis&&i.goToAnalysis(...r)),class:"px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600"}," Go to CV Analysis \u2192 ")])):(n(),l("div",he,[(n(!0),l(x,null,f(s.recentAnalyses,(r,g)=>(n(),l("div",{key:`analysis-${r.name}-${s.lastRefreshTime?s.lastRefreshTime.getTime():g}`,class:"bg-gray-50 rounded-lg p-5 border-2 border-gray-200 hover:border-blue-400 cursor-pointer transition-all hover:shadow-lg",onClick:d=>i.viewAnalysis(r)},[e("div",be,[e("div",xe,a((r.candidate_name||"U")[0].toUpperCase()),1),e("div",pe,[e("h4",ue,a(r.candidate_name||"Unknown Candidate"),1),e("p",ye,a(r.job_title||"Unknown Position"),1),r.analysis_timestamp?(n(),l("p",fe,a(i.formatDate(r.analysis_timestamp)),1)):h("",!0)])]),e("div",_e,[e("div",{class:y(["flex flex-col items-center px-4 py-2 rounded-lg font-semibold shadow-sm",i.getScoreClass(r.overall_score)==="high"?"bg-green-500 text-white":i.getScoreClass(r.overall_score)==="medium"?"bg-yellow-500 text-white":"bg-red-500 text-white"])},[t[27]||(t[27]=e("span",{class:"text-xs opacity-90 mb-1"},"Score",-1)),e("span",ve,a(r.overall_score||0)+"%",1)],2),t[28]||(t[28]=e("span",{class:"text-sm text-blue-600 font-semibold hover:text-blue-800"},"View Details \u2192",-1))])],8,me))),128))]))],64))])]))])}var Ae=_(v,[["render",we],["__scopeId","data-v-306c6b08"]]);export{Ae as default};
