var b=(ne,S,k)=>new Promise((A,U)=>{var O=c=>{try{z(k.next(c))}catch(w){U(w)}},J=c=>{try{z(k.throw(c))}catch(w){U(w)}},z=c=>c.done?A(c.value):Promise.resolve(c.value).then(O,J);z((k=k.apply(ne,S)).next())});import{r as v,l as ae,q as le,K as I,X as Te,o as r,c as d,b as e,d as o,w as i,u as l,Q as y,U as E,f as g,R as V,J as oe,a1 as N,_ as m,e as h,t as n,F as j,E as T,C as P,s as M,Z as K,n as Pe}from"./vendor.6b0ecc0f.js";const Me={class:"h-full bg-gray-50 flex flex-col overflow-hidden"},Se={class:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0"},Ue={class:"flex items-center justify-between"},De={class:"flex items-center space-x-3"},Fe={class:"px-6 py-4 flex-shrink-0"},Le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},Oe={class:"flex items-center"},Je={class:"flex-shrink-0"},He={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},Re={class:"ml-3"},qe={class:"text-xl font-semibold text-gray-900"},Ge={class:"flex items-center"},Ie={class:"flex-shrink-0"},Ke={class:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center"},Qe={class:"ml-3"},Xe={class:"text-xl font-semibold text-gray-900"},Ze={class:"flex items-center"},We={class:"flex-shrink-0"},Ye={class:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"},et={class:"ml-3"},tt={class:"text-xl font-semibold text-gray-900"},st={class:"flex items-center"},at={class:"flex-shrink-0"},lt={class:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center"},ot={class:"ml-3"},nt={class:"text-xl font-semibold text-gray-900"},it={class:"flex items-center"},rt={class:"flex-shrink-0"},dt={class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},ut={class:"ml-3"},ct={class:"text-xl font-semibold text-gray-900"},vt={key:0,class:"px-6 py-4 flex-shrink-0"},pt={class:"flex items-center justify-between mb-4"},mt={key:0,class:"text-center py-8"},xt={key:1,class:"text-center py-8 text-gray-500"},yt={key:2,class:"space-y-3"},gt={class:"flex-1"},_t={class:"flex items-center space-x-2"},ft={class:"font-medium text-gray-900"},bt={class:"text-xs text-gray-500"},ht={class:"mt-1 text-sm text-gray-600"},kt={class:"font-semibold text-red-600"},Ct={class:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0"},wt={class:"flex flex-wrap items-center gap-3"},Et={class:"flex-1 min-w-[200px]"},Vt=["value"],At=["value"],zt={class:"flex-1 overflow-y-auto px-6 py-4"},Bt={key:0,class:"text-center py-12"},Nt={key:1,class:"text-center py-12"},$t={key:2,class:"divide-y divide-gray-200"},jt=["onClick"],Tt={class:"flex items-start justify-between"},Pt={class:"flex-1"},Mt={class:"flex items-center space-x-3 mb-2"},St={class:"text-base font-semibold text-gray-900"},Ut={class:"text-sm text-gray-500 font-mono"},Dt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3"},Ft={class:"text-sm font-medium text-gray-900"},Lt={class:"text-sm font-medium text-gray-900"},Ot={class:"text-sm font-medium text-gray-900"},Jt={key:0,class:"text-xs text-gray-500"},Ht={class:"text-sm font-medium text-gray-900"},Rt={key:0,class:"mt-2"},qt={class:"text-xs text-gray-500"},Gt={key:3,class:"bg-gray-50 px-6 py-4 border-t border-gray-200"},It={class:"flex items-center justify-between"},Kt={class:"text-sm text-gray-700"},Qt={class:"flex space-x-2"},Xt={class:"space-y-4"},Zt={key:0,class:"space-y-6"},Wt={class:"grid grid-cols-2 gap-4"},Yt={class:"text-sm text-gray-900 mt-1"},es={class:"text-sm mt-1"},ts={class:"text-sm text-gray-900 mt-1"},ss={class:"text-sm text-gray-900 font-semibold mt-1"},as={class:"text-sm text-gray-900 mt-1"},ls={class:"text-sm text-gray-900 mt-1"},os={key:0,class:"bg-gray-50 rounded-lg p-4"},ns={class:"grid grid-cols-4 gap-4"},is={class:"text-lg font-semibold"},rs={class:"text-lg font-semibold"},ds={class:"text-lg font-semibold text-yellow-600"},us={class:"text-lg font-semibold text-red-600"},cs={class:"space-y-4"},vs={class:"flex items-start justify-between mb-3"},ps={class:"flex-1"},ms={class:"flex items-center space-x-2"},xs={class:"font-medium text-gray-900"},ys={class:"text-xs text-gray-500"},gs={key:0,class:"text-sm text-gray-600 mt-1"},_s={class:"text-right"},fs={class:"text-lg font-semibold"},bs={class:"grid grid-cols-4 gap-4 mt-4"},hs={class:"text-sm font-medium"},ks={class:"text-sm font-medium"},Cs={class:"text-sm font-medium"},ws={key:0,class:"mt-3 pt-3 border-t border-gray-200"},Es={class:"text-sm text-gray-700"},Vs={key:1,class:"mt-3 pt-3 border-t border-gray-200"},As={class:"text-sm text-gray-700"},zs={key:1},Bs={class:"bg-gray-50 rounded-lg p-4"},Ns=["innerHTML"],$s={key:2},js={class:"bg-gray-50 rounded-lg p-4"},Ts=["innerHTML"],Ps={key:0,class:"text-center py-8"},Ms={key:1,class:"text-center py-8 text-gray-500"},Ss={key:2,class:"space-y-3"},Us={class:"flex items-center justify-between"},Ds={class:"font-medium text-gray-900"},Fs={class:"text-sm text-gray-500"},Ls={class:"text-xs text-gray-500 mt-1"},Hs={__name:"Evaluaciones",setup(ne){const S=v([]),k=v({}),A=v([]),U=v([]),O=v([]),J=v([]),z=v([]),c=v({search:"",status:"",appraisal_cycle:"",department:"",company:""}),w=v(!1),H=v(!1),D=v(!1),R=v(!1),u=v(null),Q=v(!1),X=v(!1),Z=v(!1),W=v(!1),C=v({employee:"",appraisal_cycle:"",competency_profile:"",self_appraisal_enabled:!1}),B=v(20),_=v(0),$=v(0),Y=ae({url:"portal_rrhh.api.evaluaciones.get_appraisals",auto:!1,makeParams(){return{filters:JSON.stringify(c.value),limit:B.value,offset:_.value,order_by:"creation desc"}},transform(a){return a}}),ie=ae({url:"portal_rrhh.api.evaluaciones.get_appraisal_statistics",auto:!1,makeParams(){return{filters:JSON.stringify(c.value)}}}),re=ae({url:"portal_rrhh.api.evaluaciones.get_appraisal_cycles",auto:!0,transform(a){return a||[]}}),he=le(()=>J.value.map(a=>({label:a.employee_name,value:a.name}))),ke=le(()=>A.value.map(a=>({label:a.cycle_name,value:a.name}))),Ce=le(()=>U.value.map(a=>({label:a.profile_name,value:a.name})));let de=null;const we=()=>{clearTimeout(de),de=setTimeout(()=>{f()},500)},f=()=>b(this,null,function*(){var a,t;X.value=!0;try{yield Y.reload(),S.value=((a=Y.data)==null?void 0:a.appraisals)||[],$.value=((t=Y.data)==null?void 0:t.total_count)||0}catch(s){console.error("Error loading appraisals:",s)}finally{X.value=!1}}),ee=()=>b(this,null,function*(){try{yield ie.reload(),k.value=ie.data||{}}catch(a){console.error("Error loading statistics:",a)}}),Ee=()=>b(this,null,function*(){W.value=!0;try{yield re.reload(),A.value=re.data||[]}catch(a){console.error("Error loading cycles:",a)}finally{W.value=!1}}),ue=()=>b(this,null,function*(){try{const a=yield N("portal_rrhh.api.evaluaciones.get_competency_profiles");U.value=a||[]}catch(a){console.error("Error loading profiles:",a)}}),Ve=()=>b(this,null,function*(){try{const a=yield N("portal_rrhh.api.employee.get_employees",{filters:JSON.stringify({status:"Active"})});J.value=a||[]}catch(a){console.error("Error loading employees:",a)}}),Ae=()=>b(this,null,function*(){try{const a=yield N("portal_rrhh.api.evaluaciones.get_departments");O.value=a||[]}catch(a){console.error("Error loading departments:",a)}}),ce=()=>b(this,null,function*(){Z.value=!0;try{const a=yield N("portal_rrhh.api.evaluaciones.get_gap_analysis",{filters:JSON.stringify(c.value)});z.value=a||[]}catch(a){console.error("Error loading gap analysis:",a)}finally{Z.value=!1}}),ze=()=>b(this,null,function*(){Q.value=!0;try{yield N("portal_rrhh.api.evaluaciones.create_appraisal",{data:JSON.stringify(C.value)}),w.value=!1,C.value={employee:"",appraisal_cycle:"",competency_profile:"",self_appraisal_enabled:!1},f(),ee()}catch(a){console.error("Error creating appraisal:",a),alert(a.message||"Error al crear la evaluaci\xF3n")}finally{Q.value=!1}}),q=a=>b(this,null,function*(){try{const t=yield N("portal_rrhh.api.evaluaciones.get_appraisal_details",{name:a});u.value=t,H.value=!0}catch(t){console.error("Error loading appraisal details:",t),alert("Error al cargar los detalles de la evaluaci\xF3n")}}),ve=a=>b(this,null,function*(){q(a)}),Be=a=>b(this,null,function*(){var t,s;if(confirm("\xBFEst\xE1s seguro de enviar esta evaluaci\xF3n?"))try{yield N("portal_rrhh.api.evaluaciones.submit_appraisal",{name:a}),f(),ee(),((s=(t=u.value)==null?void 0:t.appraisal)==null?void 0:s.name)===a&&q(a)}catch(x){console.error("Error submitting appraisal:",x),alert(x.message||"Error al enviar la evaluaci\xF3n")}}),Ne=()=>{c.value={search:"",status:"",appraisal_cycle:"",department:"",company:""},_.value=0,f()},pe=a=>{a===-1&&_.value>0?_.value-=B.value:a===1&&_.value+B.value<$.value&&(_.value+=B.value),f()},$e=()=>b(this,null,function*(){C.value.appraisal_cycle&&(yield ue())}),je=a=>{c.value.appraisal_cycle=a.name,D.value=!1,f()},te=a=>({Borrador:"subtle","Auto-evaluado":"yellow",Enviado:"blue",Completado:"green",Cancelado:"red",Activo:"green",Draft:"subtle"})[a]||"subtle",se=a=>a?new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-";return I(()=>c.value.status,()=>{_.value=0,f()}),I(()=>c.value.appraisal_cycle,()=>{_.value=0,f()}),I(()=>c.value.department,()=>{_.value=0,f()}),I(R,a=>{a&&ce()}),Te(()=>{f(),ee(),Ee(),ue(),Ve(),Ae()}),(a,t)=>(r(),d("div",Me,[e("div",Se,[e("div",Ue,[t[25]||(t[25]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Evaluaciones por Competencias"),e("p",{class:"text-sm text-gray-600 mt-1"},"Gestiona y realiza seguimiento de las evaluaciones de desempe\xF1o")],-1)),e("div",De,[o(l(y),{variant:"outline",size:"sm",onClick:t[0]||(t[0]=s=>D.value=!0)},{prefix:i(()=>[o(l(m),{name:"calendar",class:"h-4"})]),default:i(()=>[t[22]||(t[22]=h(" Ciclos ",-1))]),_:1}),o(l(y),{variant:"outline",size:"sm",onClick:t[1]||(t[1]=s=>R.value=!R.value)},{prefix:i(()=>[o(l(m),{name:"trending-down",class:"h-4"})]),default:i(()=>[t[23]||(t[23]=h(" An\xE1lisis de Brechas ",-1))]),_:1}),o(l(y),{variant:"solid",size:"sm",onClick:t[2]||(t[2]=s=>w.value=!0)},{prefix:i(()=>[o(l(m),{name:"plus",class:"h-4"})]),default:i(()=>[t[24]||(t[24]=h(" Nueva Evaluaci\xF3n ",-1))]),_:1})])])]),e("div",Fe,[e("div",Le,[o(l(E),{class:"p-4"},{default:i(()=>[e("div",Oe,[e("div",Je,[e("div",He,[o(l(m),{name:"clipboard",class:"h-5 w-5 text-blue-600"})])]),e("div",Re,[t[26]||(t[26]=e("p",{class:"text-xs font-medium text-gray-500"},"Total",-1)),e("p",qe,n(k.value.total_appraisals||0),1)])])]),_:1}),o(l(E),{class:"p-4"},{default:i(()=>[e("div",Ge,[e("div",Ie,[e("div",Ke,[o(l(m),{name:"clock",class:"h-5 w-5 text-yellow-600"})])]),e("div",Qe,[t[27]||(t[27]=e("p",{class:"text-xs font-medium text-gray-500"},"Pendientes",-1)),e("p",Xe,n(k.value.pending_count||0),1)])])]),_:1}),o(l(E),{class:"p-4"},{default:i(()=>[e("div",Ze,[e("div",We,[e("div",Ye,[o(l(m),{name:"check-circle",class:"h-5 w-5 text-green-600"})])]),e("div",et,[t[28]||(t[28]=e("p",{class:"text-xs font-medium text-gray-500"},"Completadas",-1)),e("p",tt,n(k.value.completed_count||0),1)])])]),_:1}),o(l(E),{class:"p-4"},{default:i(()=>[e("div",st,[e("div",at,[e("div",lt,[o(l(m),{name:"trending-up",class:"h-5 w-5 text-purple-600"})])]),e("div",ot,[t[29]||(t[29]=e("p",{class:"text-xs font-medium text-gray-500"},"Puntuaci\xF3n Promedio",-1)),e("p",nt,n(k.value.average_score?k.value.average_score.toFixed(1):"0.0"),1)])])]),_:1}),o(l(E),{class:"p-4"},{default:i(()=>[e("div",it,[e("div",rt,[e("div",dt,[o(l(m),{name:"alert-triangle",class:"h-5 w-5 text-red-600"})])]),e("div",ut,[t[30]||(t[30]=e("p",{class:"text-xs font-medium text-gray-500"},"Brechas Cr\xEDticas",-1)),e("p",ct,n(k.value.critical_gaps_count||0),1)])])]),_:1})])]),R.value?(r(),d("div",vt,[o(l(E),{class:"p-4"},{default:i(()=>[e("div",pt,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-gray-900"},"An\xE1lisis de Brechas de Competencias",-1)),o(l(y),{variant:"ghost",size:"sm",onClick:ce},{default:i(()=>[o(l(m),{name:"refresh-cw",class:"h-4"})]),_:1})]),Z.value?(r(),d("div",mt,[...t[32]||(t[32]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1)])])):z.value.length===0?(r(),d("div",xt," No hay brechas identificadas ")):(r(),d("div",yt,[(r(!0),d(j,null,T(z.value,s=>{var x;return r(),d("div",{key:s.competency,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",gt,[e("div",_t,[e("span",ft,n(s.competency_name),1),o(l(P),{label:s.category,variant:"subtle"},null,8,["label"]),e("span",bt,"("+n(s.competency_code)+")",1)]),e("div",ht,[t[33]||(t[33]=h(" Brecha promedio: ",-1)),e("span",kt,n((x=s.avg_gap)==null?void 0:x.toFixed(1)),1),h(" | Evaluaciones: "+n(s.evaluation_count)+" | Cr\xEDticas: "+n(s.critical_count),1)])])])}),128))]))]),_:1})])):g("",!0),e("div",Ct,[e("div",wt,[e("div",Et,[o(l(V),{modelValue:c.value.search,"onUpdate:modelValue":t[3]||(t[3]=s=>c.value.search=s),type:"text",placeholder:"Buscar por empleado o c\xF3digo...",variant:"outline",size:"sm",onInput:we},{prefix:i(()=>[o(l(m),{name:"search",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),o(l(V),{modelValue:c.value.status,"onUpdate:modelValue":t[4]||(t[4]=s=>c.value.status=s),type:"select",variant:"outline",size:"sm",onChange:f,class:"w-48"},{default:i(()=>[...t[34]||(t[34]=[e("option",{value:""},"Todos los estados",-1),e("option",{value:"Borrador"},"Borrador",-1),e("option",{value:"Auto-evaluado"},"Auto-evaluado",-1),e("option",{value:"Enviado"},"Enviado",-1),e("option",{value:"Completado"},"Completado",-1),e("option",{value:"Cancelado"},"Cancelado",-1)])]),_:1},8,["modelValue"]),o(l(V),{modelValue:c.value.appraisal_cycle,"onUpdate:modelValue":t[5]||(t[5]=s=>c.value.appraisal_cycle=s),type:"select",variant:"outline",size:"sm",onChange:f,class:"w-48"},{default:i(()=>[t[35]||(t[35]=e("option",{value:""},"Todos los ciclos",-1)),(r(!0),d(j,null,T(A.value,s=>(r(),d("option",{key:s.name,value:s.name},n(s.cycle_name),9,Vt))),128))]),_:1},8,["modelValue"]),o(l(V),{modelValue:c.value.department,"onUpdate:modelValue":t[6]||(t[6]=s=>c.value.department=s),type:"select",variant:"outline",size:"sm",onChange:f,class:"w-48"},{default:i(()=>[t[36]||(t[36]=e("option",{value:""},"Todos los departamentos",-1)),(r(!0),d(j,null,T(O.value,s=>(r(),d("option",{key:s.name,value:s.name},n(s.department_name),9,At))),128))]),_:1},8,["modelValue"]),o(l(y),{variant:"outline",size:"sm",onClick:Ne},{prefix:i(()=>[o(l(m),{name:"x",class:"h-4"})]),default:i(()=>[t[37]||(t[37]=h(" Limpiar ",-1))]),_:1})])]),e("div",zt,[o(l(E),null,{default:i(()=>[X.value?(r(),d("div",Bt,[...t[38]||(t[38]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Cargando evaluaciones...",-1)])])):S.value.length===0?(r(),d("div",Nt,[o(l(m),{name:"clipboard",class:"h-12 w-12 mx-auto text-gray-300 mb-4"}),t[40]||(t[40]=e("p",{class:"text-gray-600"},"No se encontraron evaluaciones",-1)),o(l(y),{variant:"solid",size:"sm",class:"mt-4",onClick:t[7]||(t[7]=s=>w.value=!0)},{default:i(()=>[...t[39]||(t[39]=[h(" Crear primera evaluaci\xF3n ",-1)])]),_:1})])):(r(),d("div",$t,[(r(!0),d(j,null,T(S.value,s=>(r(),d("div",{key:s.name,class:"p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:x=>q(s.name)},[e("div",Tt,[e("div",Pt,[e("div",Mt,[e("div",null,[e("h3",St,n(s.employee_name),1),e("p",Ut,n(s.name),1)]),o(l(P),{label:s.status,variant:te(s.status)},null,8,["label","variant"]),s.cycle_name?(r(),M(l(P),{key:0,label:s.cycle_name,variant:"subtle"},null,8,["label"])):g("",!0)]),e("div",Dt,[e("div",null,[t[41]||(t[41]=e("p",{class:"text-xs text-gray-500"},"Puesto",-1)),e("p",Ft,n(s.designation||"-"),1)]),e("div",null,[t[42]||(t[42]=e("p",{class:"text-xs text-gray-500"},"Departamento",-1)),e("p",Lt,n(s.department||"-"),1)]),e("div",null,[t[43]||(t[43]=e("p",{class:"text-xs text-gray-500"},"Puntuaci\xF3n",-1)),e("p",Ot,[h(n(s.total_score?s.total_score.toFixed(1):"-")+" ",1),s.self_appraisal_score?(r(),d("span",Jt," (Auto: "+n(s.self_appraisal_score.toFixed(1))+") ",1)):g("",!0)])]),e("div",null,[t[44]||(t[44]=e("p",{class:"text-xs text-gray-500"},"Fecha Evaluaci\xF3n",-1)),e("p",Ht,n(s.evaluation_date_formatted||"-"),1)])]),s.competency_count?(r(),d("div",Rt,[e("p",qt,n(s.competency_count)+" competencia(s) evaluada(s) ",1)])):g("",!0)]),e("div",{class:"flex items-center space-x-2 ml-4",onClick:t[8]||(t[8]=K(()=>{},["stop"]))},[o(l(y),{variant:"ghost",size:"sm",onClick:K(x=>q(s.name),["stop"])},{default:i(()=>[o(l(m),{name:"eye",class:"h-4"})]),_:1},8,["onClick"]),s.status==="Borrador"||s.status==="Auto-evaluado"?(r(),M(l(y),{key:0,variant:"ghost",size:"sm",onClick:K(x=>ve(s.name),["stop"])},{default:i(()=>[o(l(m),{name:"edit",class:"h-4"})]),_:1},8,["onClick"])):g("",!0),s.status==="Borrador"||s.status==="Auto-evaluado"?(r(),M(l(y),{key:1,variant:"ghost",size:"sm",onClick:K(x=>Be(s.name),["stop"])},{default:i(()=>[o(l(m),{name:"send",class:"h-4"})]),_:1},8,["onClick"])):g("",!0)])])],8,jt))),128))])),$.value>B.value?(r(),d("div",Gt,[e("div",It,[e("div",Kt," Mostrando "+n(_.value+1)+" a "+n(Math.min(_.value+B.value,$.value))+" de "+n($.value)+" evaluaciones ",1),e("div",Qt,[o(l(y),{variant:"outline",size:"sm",disabled:_.value===0,onClick:t[9]||(t[9]=s=>pe(-1))},{default:i(()=>[o(l(m),{name:"chevron-left",class:"h-4"})]),_:1},8,["disabled"]),o(l(y),{variant:"outline",size:"sm",disabled:_.value+B.value>=$.value,onClick:t[10]||(t[10]=s=>pe(1))},{default:i(()=>[o(l(m),{name:"chevron-right",class:"h-4"})]),_:1},8,["disabled"])])])])):g("",!0)]),_:1})]),o(l(oe),{modelValue:w.value,"onUpdate:modelValue":t[16]||(t[16]=s=>w.value=s),options:{title:"Nueva Evaluaci\xF3n",size:"lg"}},{body:i(()=>[e("div",Xt,[o(l(V),{modelValue:C.value.employee,"onUpdate:modelValue":t[11]||(t[11]=s=>C.value.employee=s),type:"select",label:"Empleado",options:he.value,required:""},null,8,["modelValue","options"]),o(l(V),{modelValue:C.value.appraisal_cycle,"onUpdate:modelValue":t[12]||(t[12]=s=>C.value.appraisal_cycle=s),type:"select",label:"Ciclo de Evaluaci\xF3n",options:ke.value,required:"",onChange:$e},null,8,["modelValue","options"]),o(l(V),{modelValue:C.value.competency_profile,"onUpdate:modelValue":t[13]||(t[13]=s=>C.value.competency_profile=s),type:"select",label:"Perfil de Competencias",options:Ce.value,required:""},null,8,["modelValue","options"]),o(l(V),{modelValue:C.value.self_appraisal_enabled,"onUpdate:modelValue":t[14]||(t[14]=s=>C.value.self_appraisal_enabled=s),type:"checkbox",label:"Habilitar Auto-evaluaci\xF3n"},null,8,["modelValue"])])]),actions:i(()=>[o(l(y),{variant:"outline",onClick:t[15]||(t[15]=s=>w.value=!1)},{default:i(()=>[...t[45]||(t[45]=[h("Cancelar",-1)])]),_:1}),o(l(y),{variant:"solid",onClick:ze,loading:Q.value},{default:i(()=>[...t[46]||(t[46]=[h(" Crear ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),o(l(oe),{modelValue:H.value,"onUpdate:modelValue":t[19]||(t[19]=s=>H.value=s),options:{title:"Detalles de Evaluaci\xF3n",size:"2xl"}},{body:i(()=>{var s,x,F,L,G,me,xe,ye,ge,_e,fe;return[u.value?(r(),d("div",Zt,[e("div",Wt,[e("div",null,[t[47]||(t[47]=e("label",{class:"text-sm font-medium text-gray-700"},"Empleado",-1)),e("p",Yt,n((s=u.value.employee)==null?void 0:s.employee_name),1)]),e("div",null,[t[48]||(t[48]=e("label",{class:"text-sm font-medium text-gray-700"},"Estado",-1)),e("p",es,[o(l(P),{label:(x=u.value.appraisal)==null?void 0:x.status,variant:te((F=u.value.appraisal)==null?void 0:F.status)},null,8,["label","variant"])])]),e("div",null,[t[49]||(t[49]=e("label",{class:"text-sm font-medium text-gray-700"},"Ciclo",-1)),e("p",ts,n(((L=u.value.cycle)==null?void 0:L.cycle_name)||"-"),1)]),e("div",null,[t[50]||(t[50]=e("label",{class:"text-sm font-medium text-gray-700"},"Puntuaci\xF3n Total",-1)),e("p",ss,n(((me=(G=u.value.appraisal)==null?void 0:G.total_score)==null?void 0:me.toFixed(1))||"-"),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"text-sm font-medium text-gray-700"},"Fecha de Evaluaci\xF3n",-1)),e("p",as,n(((xe=u.value.appraisal)==null?void 0:xe.evaluation_date)?se(u.value.appraisal.evaluation_date):"-"),1)]),e("div",null,[t[52]||(t[52]=e("label",{class:"text-sm font-medium text-gray-700"},"Evaluado por",-1)),e("p",ls,n(((ye=u.value.evaluator)==null?void 0:ye.full_name)||((ge=u.value.appraisal)==null?void 0:ge.evaluated_by)||"-"),1)])]),u.value.statistics?(r(),d("div",os,[t[57]||(t[57]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Estad\xEDsticas",-1)),e("div",ns,[e("div",null,[t[53]||(t[53]=e("p",{class:"text-xs text-gray-500"},"Total Competencias",-1)),e("p",is,n(u.value.statistics.total_competencies),1)]),e("div",null,[t[54]||(t[54]=e("p",{class:"text-xs text-gray-500"},"Evaluadas",-1)),e("p",rs,n(u.value.statistics.competencies_evaluated),1)]),e("div",null,[t[55]||(t[55]=e("p",{class:"text-xs text-gray-500"},"Con Brecha",-1)),e("p",ds,n(u.value.statistics.competencies_with_gap),1)]),e("div",null,[t[56]||(t[56]=e("p",{class:"text-xs text-gray-500"},"Brecha Cr\xEDtica",-1)),e("p",us,n(u.value.statistics.competencies_critical_gap),1)])])])):g("",!0),e("div",null,[t[65]||(t[65]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Evaluaciones por Competencia",-1)),e("div",cs,[(r(!0),d(j,null,T(u.value.competency_evaluations,p=>(r(),M(l(E),{key:p.competency,class:"p-4"},{default:i(()=>{var be;return[e("div",vs,[e("div",ps,[e("div",ms,[e("h5",xs,n(p.competency_name),1),o(l(P),{label:p.category,variant:"subtle"},null,8,["label"]),e("span",ys,"("+n(p.competency_code)+")",1)]),p.description?(r(),d("p",gs,n(p.description),1)):g("",!0)]),e("div",_s,[t[58]||(t[58]=e("p",{class:"text-xs text-gray-500"},"Puntuaci\xF3n",-1)),e("p",fs,n(((be=p.score)==null?void 0:be.toFixed(1))||"-"),1)])]),e("div",bs,[e("div",null,[t[59]||(t[59]=e("p",{class:"text-xs text-gray-500"},"Nivel Esperado",-1)),e("p",hs,n(p.expected_level),1)]),e("div",null,[t[60]||(t[60]=e("p",{class:"text-xs text-gray-500"},"Nivel Alcanzado",-1)),e("p",ks,n(p.achieved_level||"-"),1)]),e("div",null,[t[61]||(t[61]=e("p",{class:"text-xs text-gray-500"},"Brecha",-1)),e("p",{class:Pe([p.level_gap>0?"text-red-600":"text-green-600","text-sm font-semibold"])},n(p.level_gap||0),3)]),e("div",null,[t[62]||(t[62]=e("p",{class:"text-xs text-gray-500"},"Ponderaci\xF3n",-1)),e("p",Cs,n(p.weightage?`${p.weightage}%`:"-"),1)])]),p.comments?(r(),d("div",ws,[t[63]||(t[63]=e("p",{class:"text-xs font-medium text-gray-700 mb-1"},"Comentarios del Evaluador",-1)),e("p",Es,n(p.comments),1)])):g("",!0),p.employee_comments?(r(),d("div",Vs,[t[64]||(t[64]=e("p",{class:"text-xs font-medium text-gray-700 mb-1"},"Comentarios del Empleado",-1)),e("p",As,n(p.employee_comments),1)])):g("",!0)]}),_:2},1024))),128))])]),((_e=u.value.appraisal)==null?void 0:_e.interview_notes)?(r(),d("div",zs,[t[66]||(t[66]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"Notas de Entrevista",-1)),e("div",Bs,[e("div",{innerHTML:u.value.appraisal.interview_notes},null,8,Ns)])])):g("",!0),((fe=u.value.appraisal)==null?void 0:fe.improvement_suggestions)?(r(),d("div",$s,[t[67]||(t[67]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"Sugerencias de Mejora",-1)),e("div",js,[e("div",{innerHTML:u.value.appraisal.improvement_suggestions},null,8,Ts)])])):g("",!0)])):g("",!0)]}),actions:i(()=>{var s,x,F,L;return[o(l(y),{variant:"outline",onClick:t[17]||(t[17]=G=>H.value=!1)},{default:i(()=>[...t[68]||(t[68]=[h("Cerrar",-1)])]),_:1}),((x=(s=u.value)==null?void 0:s.appraisal)==null?void 0:x.status)==="Borrador"||((L=(F=u.value)==null?void 0:F.appraisal)==null?void 0:L.status)==="Auto-evaluado"?(r(),M(l(y),{key:0,variant:"solid",onClick:t[18]||(t[18]=G=>ve(u.value.appraisal.name))},{default:i(()=>[...t[69]||(t[69]=[h(" Editar ",-1)])]),_:1})):g("",!0)]}),_:1},8,["modelValue"]),o(l(oe),{modelValue:D.value,"onUpdate:modelValue":t[21]||(t[21]=s=>D.value=s),options:{title:"Ciclos de Evaluaci\xF3n",size:"lg"}},{body:i(()=>[W.value?(r(),d("div",Ps,[...t[70]||(t[70]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1)])])):A.value.length===0?(r(),d("div",Ms," No hay ciclos disponibles ")):(r(),d("div",Ss,[(r(!0),d(j,null,T(A.value,s=>(r(),M(l(E),{key:s.name,class:"p-4 cursor-pointer hover:bg-gray-50",onClick:x=>je(s)},{default:i(()=>[e("div",Us,[e("div",null,[e("h4",Ds,n(s.cycle_name),1),e("p",Fs,n(se(s.start_date))+" - "+n(se(s.end_date)),1),e("p",Ls,n(s.appraisal_count)+" evaluaciones | "+n(s.completed_count)+" completadas ",1)]),o(l(P),{label:s.status,variant:te(s.status)},null,8,["label","variant"])])]),_:2},1032,["onClick"]))),128))]))]),actions:i(()=>[o(l(y),{variant:"outline",onClick:t[20]||(t[20]=s=>D.value=!1)},{default:i(()=>[...t[71]||(t[71]=[h("Cerrar",-1)])]),_:1})]),_:1},8,["modelValue"])]))}};export{Hs as default};
