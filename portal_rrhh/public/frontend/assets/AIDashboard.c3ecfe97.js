var x=(o,t,c)=>new Promise((m,s)=>{var n=d=>{try{g(c.next(d))}catch(b){s(b)}},r=d=>{try{g(c.throw(d))}catch(b){s(b)}},g=d=>d.done?m(d.value):Promise.resolve(d.value).then(n,r);g((c=c.apply(o,t)).next())});import{q as v,Z as u,o as i,c as a,b as e,f as h,t as l,n as f,F as p,x as y}from"./vendor.209ea08f.js";const _={name:"AIDashboard",data(){return{stats:{cvsAnalyzed:0,reportsGenerated:0,successRate:0},recentAnalyses:[],recentReports:[],showReports:!1,loading:!1,error:null,refreshInterval:null,lastRefreshTime:null}},mounted(){this.loadDashboardData(),this.startAutoRefresh()},beforeUnmount(){this.stopAutoRefresh()},activated(){this.loadDashboardData(),this.startAutoRefresh()},deactivated(){this.stopAutoRefresh()},watch:{$route(o,t){o.name==="AIDashboard"&&this.loadDashboardData()}},methods:{loadDashboardData(o=!1){return x(this,null,function*(){var t,c,m;o||(this.loading=!0),this.error=null;try{const s=yield u("ai_hr_recruitment.ai_hr_recruitment.www.ai_dashboard.get_dashboard_data",{limit:10});if(s){s.stats&&(this.stats={cvsAnalyzed:(t=s.stats.cvsAnalyzed)!=null?t:0,reportsGenerated:(c=s.stats.reportsGenerated)!=null?c:0,successRate:(m=s.stats.successRate)!=null?m:0});const n=Array.isArray(s.recent_analyses)?JSON.parse(JSON.stringify(s.recent_analyses)):[];this.recentAnalyses=n,this.lastRefreshTime=new Date,this.showReports&&(yield this.loadReports()),this.$nextTick(()=>{this.$forceUpdate&&this.$forceUpdate()})}else this.error="No se devolvieron datos del servidor"}catch(s){this.error=s.message||s.exc||"Error al cargar los datos del panel. Por favor verifica tu conexi\xF3n."}finally{this.loading=!1}})},loadReports(){return x(this,null,function*(){try{const o=yield u("ai_hr_recruitment.ai_hr_recruitment.www.ai_dashboard.get_recent_reports",{limit:10});this.recentReports=Array.isArray(o)?JSON.parse(JSON.stringify(o)):[]}catch(o){this.recentReports=[]}})},toggleReportsView(){return x(this,null,function*(){this.showReports=!this.showReports,this.showReports&&(yield this.loadReports())})},viewReport(o){o.name&&this.$router.push({name:"RecruitmentReports",query:{reportId:o.name}})},goToReports(){this.$router.push({name:"RecruitmentReports"})},getScoreClass(o){return o>=80?"high":o>=60?"medium":"low"},formatDate(o){if(!o)return"N/A";try{return new Date(o).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return o}},viewAnalysis(o){o.name&&this.$router.push({name:"CVAnalysis",params:{jobApplicant:o.job_applicant||"",jobOpening:o.job_opening||""},query:{analysisId:o.name}})},goToAnalysis(){this.$router.push({name:"CVAnalysis"})},startAutoRefresh(){this.stopAutoRefresh(),this.refreshInterval=setInterval(()=>{this.loadDashboardData(!0)},3e4)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)}}},w={class:"flex-1 p-6 bg-gray-50"},R={class:"mb-8 pb-6 border-b border-gray-200"},A={class:"flex justify-between items-start"},k={class:"flex items-center gap-3"},D={key:0,class:"text-xs text-gray-500"},C=["disabled"],I={key:0},T={key:1},j={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center justify-between"},V={class:"flex items-center gap-3"},z={class:"text-red-700"},N={key:1,class:"text-center py-16"},S={key:2},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},G={class:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow"},O={class:"flex items-center"},P={class:"ml-4"},U={class:"text-3xl font-bold text-gray-900"},E={class:"flex items-center"},J={class:"ml-4"},B={class:"text-3xl font-bold text-gray-900"},F={key:0,class:"text-xs text-green-600 mt-1 font-semibold"},L={class:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow"},H={class:"flex items-center"},Z={class:"ml-4"},K={class:"text-3xl font-bold text-gray-900"},M={class:"bg-white rounded-lg shadow p-6"},Q={class:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200"},W={class:"flex items-center gap-3"},X={class:"text-lg font-semibold text-gray-900"},Y={key:0},$={key:1},ee={key:0,class:"px-3 py-1 bg-blue-500 text-white rounded-full text-xs font-semibold"},te={key:0,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},se={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},re=["onClick"],oe={class:"flex items-center gap-4 mb-4"},ie={class:"flex-1 min-w-0"},ae={class:"text-base font-semibold text-gray-900 truncate mb-1"},ne={key:0,class:"text-xs text-gray-500 mt-1"},le={class:"flex justify-between items-center pt-4 border-t border-gray-200"},de={class:"flex flex-col items-center px-4 py-2 rounded-lg font-semibold shadow-sm bg-green-500 text-white"},ce={class:"text-xl"},ge={key:0,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},he={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},me=["onClick"],xe={class:"flex items-center gap-4 mb-4"},pe={class:"w-14 h-14 rounded-lg bg-blue-500 flex items-center justify-center text-white text-2xl font-bold flex-shrink-0 shadow-md"},be={class:"flex-1 min-w-0"},ue={class:"text-base font-semibold text-gray-900 truncate mb-1"},fe={class:"text-sm text-gray-600 truncate"},ye={key:0,class:"text-xs text-gray-500 mt-1"},ve={class:"flex justify-between items-center pt-4 border-t border-gray-200"},_e={class:"text-xl"};function we(o,t,c,m,s,n){return i(),a("div",w,[e("div",R,[e("div",A,[t[6]||(t[6]=e("div",null,[e("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"\u{1F916} Panel de Reclutamiento con IA"),e("p",{class:"text-sm text-gray-600"},"Rastrea an\xE1lisis de CV e informaci\xF3n de reclutamiento")],-1)),e("div",k,[s.refreshInterval?(i(),a("span",D,"Actualizaci\xF3n autom\xE1tica cada 30s")):h("",!0),e("button",{onClick:t[0]||(t[0]=(...r)=>n.loadDashboardData&&n.loadDashboardData(...r)),disabled:s.loading,class:"px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed"},[s.loading?(i(),a("span",I,"\u{1F504} Cargando...")):(i(),a("span",T,"\u{1F504} Actualizar"))],8,C)])])]),s.error?(i(),a("div",j,[e("div",V,[t[7]||(t[7]=e("strong",{class:"text-red-800"},"\u26A0\uFE0F Error:",-1)),e("span",z,l(s.error),1)]),e("button",{onClick:t[1]||(t[1]=(...r)=>n.loadDashboardData&&n.loadDashboardData(...r)),class:"px-3 py-1 bg-red-600 text-white rounded text-sm font-semibold hover:bg-red-700"},"Reintentar")])):h("",!0),s.loading&&!s.stats.cvsAnalyzed?(i(),a("div",N,[...t[8]||(t[8]=[e("div",{class:"inline-block w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-gray-600"},"Cargando datos del panel...",-1)])])):(i(),a("div",S,[e("div",q,[e("div",G,[e("div",O,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-2xl"},"\u{1F4CA}")])],-1)),e("div",P,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-500"},"CVs Analizados",-1)),e("p",U,l(s.stats.cvsAnalyzed||0),1),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 mt-1"},"Total de an\xE1lisis completados",-1))])])]),e("div",{class:f(["bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",s.showReports?"ring-2 ring-green-500":""]),onClick:t[2]||(t[2]=(...r)=>n.toggleReportsView&&n.toggleReportsView(...r))},[e("div",E,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-2xl"},"\u{1F4C4}")])],-1)),e("div",J,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-500"},"Reportes Generados",-1)),e("p",B,l(s.stats.reportsGenerated||0),1),t[13]||(t[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"Reportes de reclutamiento creados",-1)),s.showReports?(i(),a("p",F,"\u2190 Haz clic para ver reportes")):h("",!0)])])],2),e("div",L,[e("div",H,[t[17]||(t[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center shadow-md"},[e("span",{class:"text-2xl"},"\u2705")])],-1)),e("div",Z,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-500"},"Tasa de \xC9xito",-1)),e("p",K,l(s.stats.successRate||0)+"%",1),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"Tasa de finalizaci\xF3n de an\xE1lisis",-1))])])])]),e("div",M,[e("div",Q,[e("div",W,[e("h3",X,[s.showReports?(i(),a("span",$,"\u{1F4C4} Reportes Recientes")):(i(),a("span",Y,"\u{1F4CB} An\xE1lisis de CV Recientes"))]),s.showReports?(i(),a("button",{key:0,onClick:t[3]||(t[3]=r=>s.showReports=!1),class:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-semibold"}," \u2190 Volver a An\xE1lisis ")):h("",!0)]),(s.showReports?s.recentReports:s.recentAnalyses).length>0?(i(),a("span",ee,l((s.showReports?s.recentReports:s.recentAnalyses).length)+" "+l(s.showReports?"reporte":"an\xE1lisis")+l(((s.showReports?s.recentReports:s.recentAnalyses).length===1,"")),1)):h("",!0)]),s.showReports?(i(),a(p,{key:0},[s.recentReports.length===0?(i(),a("div",te,[t[18]||(t[18]=e("div",{class:"text-5xl mb-4"},"\u{1F4ED}",-1)),t[19]||(t[19]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"A\xFAn no hay reportes",-1)),t[20]||(t[20]=e("p",{class:"text-sm text-gray-600 mb-6"},"Comienza a generar reportes de reclutamiento para verlos aqu\xED.",-1)),e("button",{onClick:t[4]||(t[4]=(...r)=>n.goToReports&&n.goToReports(...r)),class:"px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600"}," Ir a Reportes \u2192 ")])):(i(),a("div",se,[(i(!0),a(p,null,y(s.recentReports,(r,g)=>(i(),a("div",{key:`report-${r.name}-${s.lastRefreshTime?s.lastRefreshTime.getTime():g}`,class:"bg-gray-50 rounded-lg p-5 border-2 border-gray-200 hover:border-green-400 cursor-pointer transition-all hover:shadow-lg",onClick:d=>n.viewReport(r)},[e("div",oe,[t[21]||(t[21]=e("div",{class:"w-14 h-14 rounded-lg bg-green-500 flex items-center justify-center text-white text-2xl font-bold flex-shrink-0 shadow-md"}," \u{1F4C4} ",-1)),e("div",ie,[e("h4",ae,l(r.job_title||"Posici\xF3n Desconocida"),1),r.report_timestamp?(i(),a("p",ne,l(n.formatDate(r.report_timestamp)),1)):h("",!0)])]),e("div",le,[e("div",de,[t[22]||(t[22]=e("span",{class:"text-xs opacity-90 mb-1"},"Candidatos",-1)),e("span",ce,l(r.total_candidates||0),1)]),t[23]||(t[23]=e("span",{class:"text-sm text-green-600 font-semibold hover:text-green-800"},"Ver Reporte \u2192",-1))])],8,re))),128))]))],64)):(i(),a(p,{key:1},[s.recentAnalyses.length===0?(i(),a("div",ge,[t[24]||(t[24]=e("div",{class:"text-5xl mb-4"},"\u{1F4ED}",-1)),t[25]||(t[25]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"},"A\xFAn no hay an\xE1lisis",-1)),t[26]||(t[26]=e("p",{class:"text-sm text-gray-600 mb-6"},"Comienza a analizar CVs para ver los resultados aqu\xED.",-1)),e("button",{onClick:t[5]||(t[5]=(...r)=>n.goToAnalysis&&n.goToAnalysis(...r)),class:"px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600"}," Ir a An\xE1lisis de CV \u2192 ")])):(i(),a("div",he,[(i(!0),a(p,null,y(s.recentAnalyses,(r,g)=>(i(),a("div",{key:`analysis-${r.name}-${s.lastRefreshTime?s.lastRefreshTime.getTime():g}`,class:"bg-gray-50 rounded-lg p-5 border-2 border-gray-200 hover:border-blue-400 cursor-pointer transition-all hover:shadow-lg",onClick:d=>n.viewAnalysis(r)},[e("div",xe,[e("div",pe,l((r.candidate_name||"U")[0].toUpperCase()),1),e("div",be,[e("h4",ue,l(r.candidate_name||"Candidato Desconocido"),1),e("p",fe,l(r.job_title||"Posici\xF3n Desconocida"),1),r.analysis_timestamp?(i(),a("p",ye,l(n.formatDate(r.analysis_timestamp)),1)):h("",!0)])]),e("div",ve,[e("div",{class:f(["flex flex-col items-center px-4 py-2 rounded-lg font-semibold shadow-sm",n.getScoreClass(r.overall_score)==="high"?"bg-green-500 text-white":n.getScoreClass(r.overall_score)==="medium"?"bg-yellow-500 text-white":"bg-red-500 text-white"])},[t[27]||(t[27]=e("span",{class:"text-xs opacity-90 mb-1"},"Puntuaci\xF3n",-1)),e("span",_e,l(r.overall_score||0)+"%",1)],2),t[28]||(t[28]=e("span",{class:"text-sm text-blue-600 font-semibold hover:text-blue-800"},"Ver Detalles \u2192",-1))])],8,me))),128))]))],64))])]))])}var ke=v(_,[["render",we],["__scopeId","data-v-1809aaca"]]);export{ke as default};
