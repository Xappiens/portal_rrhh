var De=Object.defineProperty,Ve=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var me=(g,r,n)=>r in g?De(g,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):g[r]=n,ve=(g,r)=>{for(var n in r||(r={}))Be.call(r,n)&&me(g,n,r[n]);if(ue)for(var n of ue(r))Ne.call(r,n)&&me(g,n,r[n]);return g},pe=(g,r)=>Ve(g,Ae(r));var T=(g,r,n)=>new Promise((w,E)=>{var L=f=>{try{z(n.next(f))}catch(S){E(S)}},y=f=>{try{z(n.throw(f))}catch(S){E(S)}},z=f=>f.done?w(f.value):Promise.resolve(f.value).then(L,y);z((n=n.apply(g,r)).next())});import{_ as q}from"./index.7b5bdcd7.js";import{r as _,J as ze,i as A,V as Je,W as $,o,c as l,b as t,d as c,w as K,X as M,Y as D,u as d,_ as v,f as x,t as i,F as B,x as N,P as $e,n as Y,e as te,y as Ue}from"./vendor.209ea08f.js";const Re={class:"h-full bg-gray-50 flex flex-col overflow-hidden"},He={class:"bg-white rounded-lg shadow-sm border border-gray-200 mx-6 mb-6 flex-shrink-0"},Ke={class:"px-4 py-3"},We={class:"flex items-center space-x-3"},qe={class:"flex-1"},Ye={class:"flex-1"},Xe={class:"flex-1 relative"},Ge={class:"relative"},Qe={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Ze={class:"p-2"},je={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},Oe=["onMousedown"],et={class:"font-medium text-gray-900"},tt={class:"flex-1 relative"},st={class:"relative"},at={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},ot={class:"p-2"},lt={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},nt=["onMousedown"],it={class:"font-medium text-gray-900"},rt={class:"flex-shrink-0"},ct={class:"flex gap-6 px-6 pb-6 flex-1 min-h-0 overflow-hidden"},dt={class:"px-4 py-3 border-b border-gray-200 flex-shrink-0"},ut={key:0,class:"flex items-center justify-between"},mt={class:"flex-1 min-w-0"},vt={class:"text-sm font-medium text-gray-900 truncate"},pt={class:"text-xs text-gray-500 truncate"},xt={key:1,class:"text-sm font-medium text-gray-900"},_t={class:"overflow-y-auto flex-1"},ft={key:0,class:"p-4 text-center text-gray-500"},yt={key:1,class:"p-4 text-center text-gray-500"},gt={key:2,class:"p-2"},ht={class:"bg-blue-50 rounded-lg p-3 border border-blue-200"},wt={class:"flex items-start justify-between"},bt={class:"flex items-center space-x-3 flex-1 min-w-0"},kt={class:"flex-shrink-0 h-8 w-8"},Ct={class:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center"},Lt={class:"text-xs font-semibold text-blue-700"},St={class:"flex-1 min-w-0"},Et={class:"text-sm font-medium text-gray-900 truncate"},Ft={class:"text-xs text-gray-600 truncate"},Pt={class:"text-xs text-gray-500 truncate"},Tt={key:0,class:"text-xs text-gray-600"},It={class:"font-medium text-gray-700 mb-1"},Mt={key:1,class:"text-xs text-gray-500"},Dt={class:"flex-shrink-0 ml-3"},Vt={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},At={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},Bt={key:2,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Nt={key:3,class:"divide-y divide-gray-200"},zt=["onClick"],Jt={class:"flex items-start justify-between"},$t={class:"flex items-center space-x-3 flex-1 min-w-0"},Ut={class:"flex-shrink-0 h-10 w-10"},Rt={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},Ht={class:"text-sm font-semibold text-blue-700"},Kt={class:"flex-1 min-w-0"},Wt={class:"text-sm font-medium text-gray-900 truncate"},qt={class:"text-xs text-gray-600 truncate"},Yt={class:"text-xs text-gray-500 truncate"},Xt={key:0,class:"text-xs text-gray-600"},Gt={class:"font-medium text-gray-700 mb-1"},Qt={key:1,class:"text-xs text-gray-500"},Zt={class:"flex-shrink-0 ml-3"},jt={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},Ot={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},es={key:2,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},ts={class:"flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col h-full overflow-hidden"},ss={class:"px-4 py-3 border-b border-gray-200 flex-shrink-0 flex items-center justify-between"},as={class:"text-sm font-medium text-gray-900"},os={class:"overflow-y-auto flex-1"},ls={key:0,class:"p-8 text-center text-gray-500"},ns={key:1,class:"p-8 text-center text-gray-500"},is={key:2,class:"p-4 text-center text-gray-500"},rs={key:0,class:"text-xs text-gray-400 mt-2"},cs={key:3,class:"divide-y divide-gray-200"},ds={class:"flex items-start justify-between"},us={class:"flex-1"},ms={class:"flex items-center space-x-3 mb-3"},vs={class:"flex-1"},ps={class:"text-base font-semibold text-gray-900"},xs={class:"text-sm text-gray-500 font-mono"},_s={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},fs={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},ys={key:2,class:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"},gs={key:3,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},hs={key:4,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},ws={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3"},bs={class:"space-y-2"},ks={class:"flex items-center space-x-2 text-sm"},Cs={class:"font-medium text-gray-900"},Ls={class:"flex items-center space-x-2 text-sm"},Ss={class:"font-medium text-gray-900"},Es={key:0,class:"flex items-center space-x-2 text-sm"},Fs={class:"font-medium text-gray-900"},Ps={class:"space-y-2"},Ts={key:0,class:"flex items-center space-x-2 text-sm"},Is={class:"font-medium text-gray-900"},Ms={key:1,class:"flex items-center space-x-2 text-sm"},Ds={class:"font-medium text-gray-900"},Vs={key:2,class:"flex items-center space-x-2 text-sm"},As={class:"font-medium text-gray-900"},Bs={class:"flex flex-wrap gap-2 text-xs"},Ns={key:0,class:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-800 rounded-full"},zs={key:1,class:"flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full"},Js={key:2,class:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full"},$s={key:0,class:"mt-4 ml-4 border-l-2 border-blue-200 pl-4"},Us={class:"flex items-center justify-between mb-3"},Rs={class:"text-sm font-medium text-gray-700 flex items-center"},Hs=["onClick"],Ks={key:0,class:"space-y-3"},Ws={class:"flex items-start justify-between mb-2"},qs={class:"flex-1"},Ys={class:"text-sm font-semibold text-gray-900"},Xs={class:"text-xs text-gray-500 font-mono"},Gs={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},Qs={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},Zs={key:2,class:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"},js={key:3,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Os={class:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},ea={key:0,class:"flex items-center space-x-2"},ta={class:"font-medium text-gray-900"},sa={key:1,class:"flex items-center space-x-2"},aa={class:"font-medium text-gray-900"},oa={key:2,class:"flex items-center space-x-2"},la={class:"font-medium text-gray-900"},na={key:3,class:"flex items-center space-x-2"},ia={class:"font-medium text-gray-900"},ra={class:"flex flex-wrap gap-2 mt-2"},ca={key:0,class:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-800 rounded-full"},da={key:1,class:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full"},pa={__name:"Contratacion",setup(g){const r=_(null),n=_({employeeName:"",dninie:"",provincia:"",company:""}),w=_(""),E=_([]),L=_(!1),y=_(-1),z=_(!1),f=_(""),S=_([]),I=_(!1),h=_(-1),se=_(!1);let F=null;const W=_([]),U=_(!1),P=_([]),X=_(null),R=_([]),G=_(!1),V=_(new Set),J=_(!1),u=ze({url:"portal_rrhh.api.employee.get_employees",cache:!1,auto:!0,makeParams(){const s={status:"Active"};n.value.provincia.trim()&&(s.provincia=n.value.provincia.trim()),n.value.company.trim()&&(s.company=n.value.company.trim());const e={filters:JSON.stringify(s)};return console.log("\u{1F4E4} makeParams ejecutado:",s),e}}),xe=A(()=>u.loading),b=A(()=>{if(!w.value.trim())return E.value;const s=w.value.toLowerCase();return E.value.filter(e=>e&&e.toLowerCase().includes(s))}),k=A(()=>{if(!f.value.trim())return S.value;const s=f.value.toLowerCase();return S.value.filter(e=>e&&e.toLowerCase().includes(s))}),ae=()=>T(this,null,function*(){if(!(E.value.length>0)){z.value=!0;try{const{call:s}=yield q(()=>import("./vendor.209ea08f.js").then(function(p){return p.a6}),["assets/vendor.209ea08f.js","assets/vendor.1f7d581e.css"]),e=yield s("portal_rrhh.api.filters.get_unique_provinces");E.value=e||[]}catch(s){console.error("Error loading provincias:",s),E.value=[]}finally{z.value=!1}}}),oe=()=>T(this,null,function*(){if(!(S.value.length>0)){se.value=!0;try{const{call:s}=yield q(()=>import("./vendor.209ea08f.js").then(function(p){return p.a6}),["assets/vendor.209ea08f.js","assets/vendor.1f7d581e.css"]),e=yield s("portal_rrhh.api.filters.get_unique_companies");S.value=e||[]}catch(s){console.error("Error loading companies:",s),S.value=[]}finally{se.value=!1}}}),_e=()=>{const s=w.value.trim();n.value.provincia=s,L.value=!0,y.value=-1,F&&clearTimeout(F),F=setTimeout(()=>{u.reload&&u.reload()},500)},fe=()=>{E.value.length===0&&ae(),b.value.length>0&&(L.value=!0)},ye=()=>{setTimeout(()=>{L.value=!1,y.value=-1},200)},Q=s=>T(this,null,function*(){console.log("\u{1F50D} Seleccionando provincia:",s),console.log("\u{1F50D} Filtros ANTES:",{provincia:n.value.provincia,company:n.value.company}),w.value=s,n.value.provincia=s,console.log("\u{1F50D} Filtros DESPU\xC9S:",{provincia:n.value.provincia,company:n.value.company}),L.value=!1,y.value=-1,yield new Promise(e=>setTimeout(e,100)),console.log("\u{1F504} Forzando recarga del resource..."),u&&(typeof u.reload=="function"?(console.log("\u{1F504} Llamando employees.reload()"),u.reload()):typeof u.fetch=="function"&&(console.log("\u{1F504} Llamando employees.fetch()"),u.fetch()))}),le=()=>{w.value="",n.value.provincia="",L.value=!1,u.reload&&u.reload()},ne=s=>{!L.value||b.value.length===0||(y.value+=s,y.value<0?y.value=b.value.length-1:y.value>=b.value.length&&(y.value=0))},ge=()=>{y.value>=0&&y.value<b.value.length?Q(b.value[y.value]):b.value.length===1&&Q(b.value[0])},he=()=>{const s=f.value.trim();n.value.company=s,I.value=!0,h.value=-1,F&&clearTimeout(F),F=setTimeout(()=>{u.reload&&u.reload()},500)},we=()=>{S.value.length===0&&oe(),k.value.length>0&&(I.value=!0)},be=()=>{setTimeout(()=>{I.value=!1,h.value=-1},200)},Z=s=>T(this,null,function*(){console.log("\u{1F50D} Seleccionando empresa:",s),console.log("\u{1F50D} Filtros ANTES:",{provincia:n.value.provincia,company:n.value.company}),f.value=s,n.value.company=s,console.log("\u{1F50D} Filtros DESPU\xC9S:",{provincia:n.value.provincia,company:n.value.company}),I.value=!1,h.value=-1,yield new Promise(e=>setTimeout(e,100)),console.log("\u{1F504} Forzando recarga del resource..."),u&&(typeof u.reload=="function"?(console.log("\u{1F504} Llamando employees.reload()"),u.reload()):typeof u.fetch=="function"&&(console.log("\u{1F504} Llamando employees.fetch()"),u.fetch()))}),ie=()=>{f.value="",n.value.company="",I.value=!1,u.reload&&u.reload()},re=s=>{!I.value||k.value.length===0||(h.value+=s,h.value<0?h.value=k.value.length-1:h.value>=k.value.length&&(h.value=0))},ke=()=>{h.value>=0&&h.value<k.value.length?Z(k.value[h.value]):k.value.length===1&&Z(k.value[0])},Ce=s=>T(this,null,function*(){try{const{call:e}=yield q(()=>import("./vendor.209ea08f.js").then(function(a){return a.a6}),["assets/vendor.209ea08f.js","assets/vendor.1f7d581e.css"]);return(yield e("portal_rrhh.api.job_offer.get_job_offers_by_employee",{employee_name:s}))||[]}catch(e){return[]}}),Le=s=>T(this,null,function*(){try{if(console.log("\u{1F504} Cargando modificaciones para Job Offer:",s),R.value.filter(C=>C.job_offer_name===s).length>0){console.log("\u2705 Modificaciones ya cargadas para:",s);return}if(G.value){console.log("\u23F3 Ya se est\xE1 cargando modificaciones...");return}G.value=!0,console.log("\u{1F4E1} Llamando API de modificaciones...");const{call:p}=yield q(()=>import("./vendor.209ea08f.js").then(function(C){return C.a6}),["assets/vendor.209ea08f.js","assets/vendor.1f7d581e.css"]),a=yield p("portal_rrhh.api.modificaciones_rrhh.get_modificaciones_by_job_offer",{job_offer_name:s});console.log("\u{1F4CA} Respuesta de modificaciones:",(a==null?void 0:a.length)||0,"registros");const m=(a||[]).map(C=>pe(ve({},C),{job_offer_name:s}));R.value.push(...m),console.log("\u2705 Modificaciones agregadas. Total en memoria:",R.value.length)}catch(e){console.error("\u274C Error cargando modificaciones:",e)}finally{G.value=!1}}),j=s=>{const e=R.value.filter(p=>p.job_offer_name===s);return console.log(`\u{1F50D} Modificaciones para ${s}:`,e.length),e},Se=s=>{console.log("\u{1F504} Toggle modificaciones para Job Offer:",s),V.value.has(s)?(console.log("\u{1F4E4} Colapsando modificaciones..."),V.value.delete(s)):(console.log("\u{1F4E5} Expandiendo modificaciones..."),V.value.add(s))},ce=()=>{J.value=!1},Ee=s=>T(this,null,function*(){if(!U.value){if(X.value===s.name&&P.value.length>0){r.value=s;return}yield Fe(s)}}),Fe=s=>T(this,null,function*(){U.value=!0,r.value=s,X.value=s.name,P.value=[],J.value=!0;try{const e=yield Ce(s.name);P.value=e,R.value=[],V.value.clear();for(const p of e)yield Le(p.name)}catch(e){P.value=[]}finally{U.value=!1}}),de=s=>{if(!s)return"E";const e=s.trim().split(" ");return e.length>=2?(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase():s.charAt(0).toUpperCase()},H=s=>s?new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"No especificada",Pe=A(()=>n.value.employeeName.trim()!==""||n.value.dninie.trim()!==""||n.value.provincia.trim()!==""||n.value.company.trim()!==""),Te=A(()=>n.value.provincia.trim()!==""||n.value.company.trim()!==""),Ie=()=>{n.value.employeeName="",n.value.dninie="",le(),ie()};Je(()=>{ae(),oe()});const Me=A(()=>{if(!u.data)return[];const s=n.value.employeeName.trim().toLowerCase(),e=n.value.dninie.trim().toLowerCase();return u.data.filter(p=>!(s&&(!p.employee_name||!p.employee_name.toLowerCase().includes(s))||e&&(!p.custom_dninie||!p.custom_dninie.toLowerCase().includes(e))))}),O=A(()=>{if(!P.value||P.value.length===0)return[];const s=n.value.provincia.trim().toLowerCase(),e=n.value.company.trim().toLowerCase();return!s&&!e?P.value:P.value.filter(p=>!(s&&!(p.custom_provincia||"").toLowerCase().includes(s)||e&&!(p.company||"").toLowerCase().includes(e)))});return $(Me,s=>{W.value=s,console.log("\u{1F4CA} Empleados filtrados actualizados:",s.length)},{immediate:!0}),$(()=>u.data,s=>{console.log("\u{1F4E5} Datos de empleados actualizados:",(s==null?void 0:s.length)||0),console.log("\u{1F4E5} Filtros activos:",{provincia:n.value.provincia,company:n.value.company})},{immediate:!0}),$(()=>n.value.provincia,s=>{w.value!==s&&(w.value=s||"")}),$(()=>n.value.company,s=>{f.value!==s&&(f.value=s||"")}),$([()=>n.value.provincia,()=>n.value.company],([s,e],[p,a])=>{(s!==p||e!==a)&&(console.log("\u{1F504} Watcher detect\xF3 cambio en filtros:",{provincia:{old:p,new:s},company:{old:a,new:e}}),F&&clearTimeout(F),F=setTimeout(()=>{console.log("\u{1F504} Recargando empleados desde watcher..."),console.log("\u{1F504} Estado actual de filtros:",{provincia:n.value.provincia,company:n.value.company}),u?typeof u.reload=="function"?(console.log("\u{1F504} Usando employees.reload()"),u.reload()):typeof u.fetch=="function"?(console.log("\u{1F504} Usando employees.fetch()"),u.fetch()):u.submit?(console.log("\u{1F504} Usando employees.submit()"),u.submit()):(console.error("\u26A0\uFE0F No se encontr\xF3 m\xE9todo de recarga en employees"),console.log("\u{1F50D} M\xE9todos disponibles en employees:",Object.keys(u))):console.error("\u26A0\uFE0F employees es null o undefined")},150))},{immediate:!1}),$(()=>r.value,(s,e)=>{(s==null?void 0:s.name)!==(e==null?void 0:e.name)&&(P.value=[],X.value=null)}),(s,e)=>{const p=Ue("Input");return o(),l("div",Re,[t("div",He,[t("div",Ke,[t("div",We,[t("div",qe,[c(p,{modelValue:n.value.employeeName,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value.employeeName=a),type:"text",placeholder:"Buscar por nombre...",variant:"outline",size:"sm"},{prefix:K(()=>[c(d(v),{name:"search",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),t("div",Ye,[c(p,{modelValue:n.value.dninie,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.dninie=a),type:"text",placeholder:"Buscar por DNI/NIE...",variant:"outline",size:"sm"},{prefix:K(()=>[c(d(v),{name:"credit-card",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),t("div",Xe,[t("div",Ge,[c(p,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=a=>w.value=a),type:"text",placeholder:"Buscar por provincia...",variant:"outline",size:"sm",onInput:_e,onFocus:fe,onBlur:ye,onKeydown:[M(D(ge,["prevent"]),["enter"]),e[3]||(e[3]=M(a=>L.value=!1,["escape"])),e[4]||(e[4]=M(D(a=>ne(1),["prevent"]),["down"])),e[5]||(e[5]=M(D(a=>ne(-1),["prevent"]),["up"]))]},{prefix:K(()=>[c(d(v),{name:"map-pin",class:"h-4 text-gray-400"})]),_:1},8,["modelValue","onKeydown"]),n.value.provincia?(o(),l("button",{key:0,onClick:le,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",type:"button"},[c(d(v),{name:"x",class:"h-4"})])):x("",!0)]),L.value&&b.value.length>0?(o(),l("div",Qe,[t("div",Ze,[t("div",je," Seleccionar provincia ("+i(b.value.length)+" resultados): ",1),(o(!0),l(B,null,N(b.value,(a,m)=>(o(),l("div",{key:a,onMousedown:D(C=>Q(a),["prevent"]),class:Y(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",m===y.value?"bg-blue-100":"hover:bg-blue-50"])},[t("div",et,i(a),1)],42,Oe))),128))])])):x("",!0)]),t("div",tt,[t("div",st,[c(p,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=a=>f.value=a),type:"text",placeholder:"Buscar por empresa...",variant:"outline",size:"sm",onInput:he,onFocus:we,onBlur:be,onKeydown:[M(D(ke,["prevent"]),["enter"]),e[7]||(e[7]=M(a=>I.value=!1,["escape"])),e[8]||(e[8]=M(D(a=>re(1),["prevent"]),["down"])),e[9]||(e[9]=M(D(a=>re(-1),["prevent"]),["up"]))]},{prefix:K(()=>[c(d(v),{name:"building",class:"h-4 text-gray-400"})]),_:1},8,["modelValue","onKeydown"]),n.value.company?(o(),l("button",{key:0,onClick:ie,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",type:"button"},[c(d(v),{name:"x",class:"h-4"})])):x("",!0)]),I.value&&k.value.length>0?(o(),l("div",at,[t("div",ot,[t("div",lt," Seleccionar empresa ("+i(k.value.length)+" resultados): ",1),(o(!0),l(B,null,N(k.value,(a,m)=>(o(),l("div",{key:a,onMousedown:D(C=>Z(a),["prevent"]),class:Y(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",m===h.value?"bg-blue-100":"hover:bg-blue-50"])},[t("div",it,i(a),1)],42,nt))),128))])])):x("",!0)]),t("div",rt,[c(d($e),{variant:"outline",size:"sm",onClick:Ie,disabled:!Pe.value},{default:K(()=>[c(d(v),{name:"x",class:"h-4"})]),_:1},8,["disabled"])])])])]),t("div",ct,[t("div",{class:Y(["bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col h-full overflow-hidden",J.value?"w-64":"w-1/3"])},[t("div",dt,[J.value&&r.value?(o(),l("div",ut,[t("div",mt,[t("h3",vt,i(r.value.employee_name),1),t("p",pt,i(r.value.custom_dninie),1)]),t("button",{onClick:ce,class:"ml-2 p-1 text-gray-400",title:"Mostrar todos los empleados"},[c(d(v),{name:"maximize-2",class:"h-4 w-4"})])])):(o(),l("h3",xt,"Empleados"))]),t("div",_t,[xe.value?(o(),l("div",ft,[c(d(v),{name:"loader",class:"h-6 w-6 animate-spin mx-auto mb-2"}),e[10]||(e[10]=te(" Cargando empleados... ",-1))])):!W.value||W.value.length===0?(o(),l("div",yt," No hay empleados disponibles ")):J.value&&r.value?(o(),l("div",gt,[t("div",ht,[t("div",wt,[t("div",bt,[t("div",kt,[t("div",Ct,[t("span",Lt,i(de(r.value.employee_name)),1)])]),t("div",St,[t("p",Et,i(r.value.employee_name||"Sin nombre"),1),t("p",Ft,i(r.value.custom_dninie||r.value.name||"Sin DNI"),1),t("p",Pt,i(r.value.designation||"Sin puesto"),1),r.value.companies&&r.value.companies.length>0?(o(),l("div",Tt,[t("div",It,i(r.value.status_text),1),(o(!0),l(B,null,N(r.value.companies,a=>(o(),l("div",{key:a,class:"truncate"},i(a),1))),128))])):(o(),l("div",Mt,i(r.value.status_text),1))])]),t("div",Dt,[r.value.status==="Alta"?(o(),l("div",Vt,i(r.value.status),1)):r.value.status==="Baja"?(o(),l("div",At,i(r.value.status),1)):(o(),l("div",Bt,i(r.value.status),1))])])])])):(o(),l("div",Nt,[(o(!0),l(B,null,N(W.value,a=>{var m,C;return o(),l("div",{key:a.name,onClick:ee=>Ee(a),class:Y(["p-3 cursor-pointer",{"bg-blue-50 border-r-2 border-blue-500":((m=r.value)==null?void 0:m.name)===a.name,"opacity-50":U.value&&((C=r.value)==null?void 0:C.name)===a.name}])},[t("div",Jt,[t("div",$t,[t("div",Ut,[t("div",Rt,[t("span",Ht,i(de(a.employee_name)),1)])]),t("div",Kt,[t("p",Wt,i(a.employee_name||"Sin nombre"),1),t("p",qt,i(a.custom_dninie||a.name||"Sin DNI"),1),t("p",Yt,i(a.designation||"Sin puesto"),1),a.companies&&a.companies.length>0?(o(),l("div",Xt,[t("div",Gt,i(a.status_text),1),(o(!0),l(B,null,N(a.companies,ee=>(o(),l("div",{key:ee,class:"truncate"},i(ee),1))),128))])):(o(),l("div",Qt,i(a.status_text),1))])]),t("div",Zt,[a.status==="Alta"?(o(),l("div",jt,i(a.status),1)):a.status==="Baja"?(o(),l("div",Ot,i(a.status),1)):(o(),l("div",es,i(a.status),1))])])],10,zt)}),128))]))])],2),t("div",ts,[t("div",ss,[t("h3",as,i(r.value?`Hojas de Contrataci\xF3n - ${r.value.employee_name}`:"Selecciona un empleado"),1),J.value&&r.value?(o(),l("button",{key:0,onClick:ce,class:"flex items-center space-x-2 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 rounded-md"},[c(d(v),{name:"users",class:"h-4 w-4"}),e[11]||(e[11]=t("span",null,"Mostrar empleados",-1))])):x("",!0)]),t("div",os,[r.value?U.value?(o(),l("div",ns,[c(d(v),{name:"loader",class:"h-8 w-8 animate-spin mx-auto mb-4"}),e[13]||(e[13]=t("p",{class:"text-sm"},"Cargando Hojas de Contrataci\xF3n...",-1)),e[14]||(e[14]=t("p",{class:"text-xs text-gray-400 mt-2"},"Por favor espera...",-1))])):!O.value||O.value.length===0?(o(),l("div",is,[c(d(v),{name:"file-text",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e[15]||(e[15]=t("p",null,"No hay Hojas de Contrataci\xF3n para este empleado",-1)),Te.value?(o(),l("p",rs,"Intenta ajustar los filtros de provincia o empresa")):x("",!0)])):(o(),l("div",cs,[(o(!0),l(B,null,N(O.value,a=>(o(),l("div",{key:a.name,class:"p-4 border-l-4 border-transparent"},[t("div",ds,[t("div",us,[t("div",ms,[t("div",vs,[t("h4",ps,i(a.designation||"Sin t\xEDtulo"),1),t("p",xs,"ID: "+i(a.name),1)]),a.workflow_state==="Alta"?(o(),l("div",_s,i(a.workflow_state),1)):a.workflow_state==="Baja"?(o(),l("div",fs,i(a.workflow_state),1)):a.workflow_state==="Pendiente"?(o(),l("div",ys,i(a.workflow_state),1)):a.workflow_state==="Cancelado"?(o(),l("div",gs,i(a.workflow_state),1)):(o(),l("div",hs,i(a.workflow_state||"Sin estado"),1))]),t("div",ws,[t("div",bs,[t("div",ks,[c(d(v),{name:"calendar",class:"h-4 w-4 text-gray-400"}),e[16]||(e[16]=t("span",{class:"text-gray-600"},"Fecha de oferta:",-1)),t("span",Cs,i(a.offer_date?H(a.offer_date):"No especificada"),1)]),t("div",Ls,[c(d(v),{name:"building",class:"h-4 w-4 text-gray-400"}),e[17]||(e[17]=t("span",{class:"text-gray-600"},"Empresa:",-1)),t("span",Ss,i(a.company||"No especificada"),1)]),a.custom_tipo_de_contrato?(o(),l("div",Es,[c(d(v),{name:"file-text",class:"h-4 w-4 text-gray-400"}),e[18]||(e[18]=t("span",{class:"text-gray-600"},"Tipo de contrato:",-1)),t("span",Fs,i(a.custom_tipo_de_contrato),1)])):x("",!0)]),t("div",Ps,[a.custom_fecha_inicio?(o(),l("div",Ts,[c(d(v),{name:"play",class:"h-4 w-4 text-gray-400"}),e[19]||(e[19]=t("span",{class:"text-gray-600"},"Inicio:",-1)),t("span",Is,i(H(a.custom_fecha_inicio)),1)])):x("",!0),a.custom_fecha_fin?(o(),l("div",Ms,[c(d(v),{name:"stop",class:"h-4 w-4 text-gray-400"}),e[20]||(e[20]=t("span",{class:"text-gray-600"},"Fin:",-1)),t("span",Ds,i(H(a.custom_fecha_fin)),1)])):x("",!0),a.custom_estado_de_tramitacion?(o(),l("div",Vs,[c(d(v),{name:"settings",class:"h-4 w-4 text-gray-400"}),e[21]||(e[21]=t("span",{class:"text-gray-600"},"Tramitaci\xF3n:",-1)),t("span",As,i(a.custom_estado_de_tramitacion),1)])):x("",!0)])]),t("div",Bs,[a.custom_firmado?(o(),l("div",Ns,[c(d(v),{name:"check",class:"h-3 w-3"}),e[22]||(e[22]=t("span",null,"Firmado",-1))])):x("",!0),a.custom_contrato?(o(),l("div",zs,[c(d(v),{name:"file",class:"h-3 w-3"}),e[23]||(e[23]=t("span",null,"Contrato",-1))])):x("",!0),a.custom_comun?(o(),l("div",Js,[c(d(v),{name:"users",class:"h-3 w-3"}),e[24]||(e[24]=t("span",null,"Com\xFAn",-1))])):x("",!0)])]),j(a.name).length>0?(o(),l("div",$s,[t("div",Us,[t("h6",Rs,[c(d(v),{name:"edit-3",class:"h-4 w-4 mr-2 text-blue-600"}),te(" Modificaciones RRHH ("+i(j(a.name).length)+") ",1)]),t("button",{onClick:m=>Se(a.name),class:"text-sm text-blue-600 flex items-center font-medium"},[c(d(v),{name:V.value.has(a.name)?"chevron-up":"chevron-down",class:"h-4 w-4 mr-1"},null,8,["name"]),te(" "+i(V.value.has(a.name)?"Ocultar":"Mostrar"),1)],8,Hs)]),V.value.has(a.name)?(o(),l("div",Ks,[(o(!0),l(B,null,N(j(a.name),(m,C)=>(o(),l("div",{key:m.name,class:"bg-blue-50 rounded-lg p-3 border border-blue-200 relative"},[e[31]||(e[31]=t("div",{class:"absolute -left-6 top-3 w-3 h-3 bg-blue-400 rounded-full border-2 border-white"},null,-1)),t("div",Ws,[t("div",qs,[t("h6",Ys,i(m.tipo_actualizacion||"Modificaci\xF3n"),1),t("p",Xs,"ID: "+i(m.name),1)]),m.workflow_state==="Alta"?(o(),l("div",Gs,i(m.workflow_state),1)):m.workflow_state==="Baja"?(o(),l("div",Qs,i(m.workflow_state),1)):m.workflow_state==="Pendiente"?(o(),l("div",Zs,i(m.workflow_state),1)):(o(),l("div",js,i(m.workflow_state||"Sin estado"),1))]),t("div",Os,[m.start_date?(o(),l("div",ea,[c(d(v),{name:"play",class:"h-4 w-4 text-gray-400"}),e[25]||(e[25]=t("span",{class:"text-gray-600"},"Inicio:",-1)),t("span",ta,i(H(m.start_date)),1)])):x("",!0),m.end_date?(o(),l("div",sa,[c(d(v),{name:"stop",class:"h-4 w-4 text-gray-400"}),e[26]||(e[26]=t("span",{class:"text-gray-600"},"Fin:",-1)),t("span",aa,i(H(m.end_date)),1)])):x("",!0),m.custom_tipo_de_contrato?(o(),l("div",oa,[c(d(v),{name:"file-text",class:"h-4 w-4 text-gray-400"}),e[27]||(e[27]=t("span",{class:"text-gray-600"},"Tipo:",-1)),t("span",la,i(m.custom_tipo_de_contrato),1)])):x("",!0),m.custom_provincia?(o(),l("div",na,[c(d(v),{name:"map-pin",class:"h-4 w-4 text-gray-400"}),e[28]||(e[28]=t("span",{class:"text-gray-600"},"Provincia:",-1)),t("span",ia,i(m.custom_provincia),1)])):x("",!0)]),t("div",ra,[m.custom_firmado?(o(),l("div",ca,[c(d(v),{name:"check",class:"h-3 w-3"}),e[29]||(e[29]=t("span",{class:"text-xs"},"Firmado",-1))])):x("",!0),m.custom_comun?(o(),l("div",da,[c(d(v),{name:"users",class:"h-3 w-3"}),e[30]||(e[30]=t("span",{class:"text-xs"},"Com\xFAn",-1))])):x("",!0)])]))),128))])):x("",!0)])):x("",!0)])]))),128))])):(o(),l("div",ls,[c(d(v),{name:"user",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e[12]||(e[12]=t("p",null,"Selecciona un empleado para ver sus Hojas de Contrataci\xF3n",-1))]))])])])])}}};export{pa as default};
