var pt=Object.defineProperty,xt=Object.defineProperties;var ft=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var Ne=(g,u,n)=>u in g?pt(g,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):g[u]=n,Ae=(g,u)=>{for(var n in u||(u={}))_t.call(u,n)&&Ne(g,n,u[n]);if(Me)for(var n of Me(u))yt.call(u,n)&&Ne(g,n,u[n]);return g},$e=(g,u)=>xt(g,ft(u));var _=(g,u,n)=>new Promise((T,D)=>{var S=f=>{try{K(n.next(f))}catch(R){D(R)}},y=f=>{try{K(n.throw(f))}catch(R){D(R)}},K=f=>f.done?T(f.value):Promise.resolve(f.value).then(S,y);K((n=n.apply(g,u)).next())});import{_ as Q}from"./index.0692d3c2.js";import{r as m,q as U,a8 as ht,K as te,o,c as l,b as s,d,u as c,_ as v,w as Z,R as se,a9 as k,a2 as C,f as p,t as r,F as H,E as z,Q as gt,n as ae,s as bt,e as he}from"./vendor.13deb96d.js";const wt={class:"h-full bg-gray-50 flex flex-col overflow-hidden"},kt={class:"mx-6 mt-4 mb-4"},Ct={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Tt={class:"flex items-start"},It={class:"bg-white rounded-lg shadow-sm border border-gray-200 mx-6 mb-6 flex-shrink-0"},Et={class:"px-4 py-3"},Lt={class:"flex items-center space-x-3"},St={class:"flex-1"},Rt={class:"flex-1"},Pt={class:"flex-1 relative"},Dt={class:"relative"},Ft={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Vt={class:"p-2"},Mt={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},Nt=["onMousedown"],At={class:"font-medium text-gray-900"},$t={class:"flex-1 relative"},Bt={class:"relative"},Ht={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},zt={class:"p-2"},Jt={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},qt=["onMousedown"],Ut={class:"font-medium text-gray-900"},Kt={class:"flex-1 relative"},Wt={class:"relative"},jt={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Qt={class:"p-2"},Zt={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},Gt=["onMousedown"],Xt={class:"font-medium text-gray-900"},Yt={class:"flex-shrink-0"},Ot={class:"flex gap-6 px-6 pb-6 flex-1 min-h-0 overflow-hidden"},es={class:"px-4 py-3 border-b border-gray-200 flex-shrink-0"},ts={key:0,class:"flex items-center justify-between"},ss={class:"flex-1 min-w-0"},as={class:"text-sm font-medium text-gray-900 truncate"},os={class:"text-xs text-gray-500 truncate"},ls={key:1,class:"flex items-center justify-between w-full"},ns={class:"flex items-center space-x-2"},rs={class:"text-xs text-gray-500"},is={class:"overflow-y-auto flex-1"},us={key:0,class:"p-4 text-center text-gray-500"},cs={key:1,class:"p-4 text-center text-gray-500"},ds={key:2,class:"p-2"},vs={class:"bg-blue-50 rounded-lg p-3 border border-blue-200"},ms={class:"flex items-start justify-between"},ps={class:"flex items-center space-x-3 flex-1 min-w-0"},xs={class:"flex-shrink-0 h-8 w-8"},fs={class:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center"},_s={class:"text-xs font-semibold text-blue-700"},ys={class:"flex-1 min-w-0"},hs={class:"text-sm font-medium text-gray-900 truncate"},gs={class:"text-xs text-gray-600 truncate"},bs={class:"text-xs text-gray-500 truncate"},ws={key:1,class:"text-xs text-gray-600"},ks={class:"font-medium text-gray-700 mb-1"},Cs={key:2,class:"text-xs text-gray-500"},Ts={class:"flex-shrink-0 ml-3"},Is={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},Es={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},Ls={key:2,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Ss={key:3,class:"divide-y divide-gray-200"},Rs=["onClick"],Ps={class:"flex items-start justify-between"},Ds={class:"flex items-center space-x-3 flex-1 min-w-0"},Fs={class:"flex-shrink-0 h-10 w-10"},Vs={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},Ms={class:"text-sm font-semibold text-blue-700"},Ns={class:"flex-1 min-w-0"},As={class:"text-sm font-medium text-gray-900 truncate"},$s={class:"text-xs text-gray-600 truncate"},Bs={class:"text-xs text-gray-500 truncate"},Hs=["onClick"],zs={key:1,class:"text-xs text-gray-600"},Js={class:"font-medium text-gray-700 mb-1"},qs={key:2,class:"text-xs text-gray-500"},Us={class:"flex-shrink-0 ml-3"},Ks={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},Ws={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},js={key:2,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Qs={class:"flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col h-full overflow-hidden"},Zs={class:"px-4 py-3 border-b border-gray-200 flex-shrink-0 flex items-center justify-between"},Gs={class:"text-sm font-medium text-gray-900"},Xs={key:0,class:"flex items-center space-x-2"},Ys={class:"overflow-y-auto flex-1"},Os={key:0,class:"p-8 text-center text-gray-500"},ea={key:1,class:"p-8 text-center text-gray-500"},ta={key:2,class:"p-4 text-center text-gray-500"},sa={key:0,class:"text-xs text-gray-400 mt-2"},aa={key:3,class:"divide-y divide-gray-200"},oa={class:"flex items-start justify-between"},la={class:"flex-1"},na={class:"flex items-center space-x-3 mb-3"},ra={class:"flex-1"},ia={class:"flex items-center space-x-2"},ua={class:"text-base font-semibold text-gray-900"},ca=["onClick"],da=["onClick"],va={key:1,class:"text-sm text-gray-500 font-mono"},ma={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},pa={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},xa={key:2,class:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"},fa={key:3,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},_a={key:4,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},ya={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3"},ha={class:"space-y-2"},ga={class:"flex items-center space-x-2 text-sm"},ba={class:"font-medium text-gray-900"},wa={class:"flex items-center space-x-2 text-sm"},ka={class:"font-medium text-gray-900"},Ca={key:0,class:"flex items-center space-x-2 text-sm"},Ta={class:"font-medium text-gray-900"},Ia={class:"space-y-2"},Ea={key:0,class:"flex items-center space-x-2 text-sm"},La={class:"font-medium text-gray-900"},Sa={key:1,class:"flex items-center space-x-2 text-sm"},Ra={class:"font-medium text-gray-900"},Pa={key:2,class:"flex items-center space-x-2 text-sm"},Da={class:"font-medium text-gray-900"},Fa={class:"flex flex-wrap gap-2 text-xs"},Va={key:0,class:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-800 rounded-full"},Ma={key:1,class:"flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full"},Na={key:2,class:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full"},Aa={key:0,class:"mt-4 ml-4 border-l-2 border-blue-200 pl-4"},$a={class:"flex items-center justify-between mb-3"},Ba={class:"text-sm font-medium text-gray-700 flex items-center"},Ha=["onClick"],za={key:0,class:"space-y-3"},Ja={class:"flex items-start justify-between mb-2"},qa={class:"flex-1"},Ua={class:"text-sm font-semibold text-gray-900"},Ka=["onClick"],Wa={key:1,class:"text-xs text-gray-500 font-mono"},ja={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},Qa={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},Za={key:2,class:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"},Ga={key:3,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Xa={class:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},Ya={key:0,class:"flex items-center space-x-2"},Oa={class:"font-medium text-gray-900"},eo={key:1,class:"flex items-center space-x-2"},to={class:"font-medium text-gray-900"},so={key:2,class:"flex items-center space-x-2"},ao={class:"font-medium text-gray-900"},oo={key:3,class:"flex items-center space-x-2"},lo={class:"font-medium text-gray-900"},no={class:"flex flex-wrap gap-2 mt-2"},ro={key:0,class:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-800 rounded-full"},io={key:1,class:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full"},Be=100,uo=200,po={__name:"Contratacion",setup(g){const u=m(null),n=m({employeeName:"",dninie:"",provincia:"",company:"",reportsTo:""}),T=m(""),D=m([]),S=m(!1),y=m(-1),K=m(!1),f=m(""),R=m([]),M=m(!1),b=m(-1),ge=m(!1),P=m(""),N=m([]),A=m(!1),w=m(-1),be=m(!1);let F=null,ue=null;const $=m([]),oe=m(0),G=m(!1),X=m(!1),W=m(!1),Y=m([]),O=m(!1),V=m([]),ce=m(null),le=m([]),de=m(!1),J=m(new Set),j=m(!1),He=()=>{const a={},e=n.value.employeeName.trim()||n.value.dninie.trim();return e&&(a.search_text=e),n.value.provincia.trim()&&(a.provincia=n.value.provincia.trim()),n.value.company.trim()&&(a.company=n.value.company.trim()),n.value.reportsTo.trim()&&(a.reports_to=n.value.reportsTo.trim()),a},ne=(a=null,e=0,t=!1)=>_(this,null,function*(){try{const{call:i}=yield Q(()=>import("./vendor.13deb96d.js").then(function(B){return B.aq}),["assets/vendor.13deb96d.js","assets/vendor.1f7d581e.css"]),h=He(),x={filters:JSON.stringify(h)};a&&(x.limit=a,x.offset=e);const q=yield i("portal_rrhh.api.employee.get_employees",x);if(q){const B=q.data||q||[],ie=q.total||B.length;if(t){const _e=new Set($.value.map(ye=>ye.name)),Ve=B.filter(ye=>!_e.has(ye.name));$.value=[...$.value,...Ve]}else $.value=B;return oe.value=ie,ze(),{data:B,total:ie}}return{data:[],total:0}}catch(i){return console.error("Error loading employees:",i),{data:[],total:0}}}),we=()=>_(this,null,function*(){if(W.value||X.value)return;const a=$.value.length;if(a>=oe.value){W.value=!0;return}X.value=!0;try{let e=a;for(;e<oe.value;){const{data:t}=yield ne(uo,e,!0);if(!t||t.length===0)break;e+=t.length,yield new Promise(i=>setTimeout(i,50))}W.value=!0}catch(e){console.error("Error loading remaining employees:",e)}finally{X.value=!1}}),ze=()=>{Y.value=$.value},Je=()=>_(this,null,function*(){G.value=!0,W.value=!1,$.value=[];try{yield ne(Be,0,!1),setTimeout(()=>{we()},100)}finally{G.value=!1}}),qe=()=>_(this,null,function*(){G.value=!0,W.value=!1,$.value=[];try{n.value.employeeName.trim()||n.value.dninie.trim()||n.value.provincia.trim()||n.value.company.trim()||n.value.reportsTo.trim()?(yield ne(null,0,!1),W.value=!0):(yield ne(Be,0,!1),setTimeout(()=>{we()},100))}finally{G.value=!1}}),Ue=U(()=>G.value),I=U(()=>{if(!T.value.trim())return D.value;const a=T.value.toLowerCase();return D.value.filter(e=>e&&e.toLowerCase().includes(a))}),E=U(()=>{if(!f.value.trim())return R.value;const a=f.value.toLowerCase();return R.value.filter(e=>e&&e.toLowerCase().includes(a))}),L=U(()=>{if(!P.value.trim())return N.value;const a=P.value.toLowerCase();return N.value.filter(e=>e&&e.label&&e.label.toLowerCase().includes(a))}),ke=()=>_(this,null,function*(){if(!(D.value.length>0)){K.value=!0;try{const{call:a}=yield Q(()=>import("./vendor.13deb96d.js").then(function(t){return t.aq}),["assets/vendor.13deb96d.js","assets/vendor.1f7d581e.css"]),e=yield a("portal_rrhh.api.filters.get_unique_provinces");D.value=e||[]}catch(a){console.error("Error loading provincias:",a),D.value=[]}finally{K.value=!1}}}),Ce=()=>_(this,null,function*(){if(!(R.value.length>0)){ge.value=!0;try{const{call:a}=yield Q(()=>import("./vendor.13deb96d.js").then(function(t){return t.aq}),["assets/vendor.13deb96d.js","assets/vendor.1f7d581e.css"]),e=yield a("portal_rrhh.api.filters.get_unique_companies");R.value=e||[]}catch(a){console.error("Error loading companies:",a),R.value=[]}finally{ge.value=!1}}}),Te=()=>_(this,null,function*(){if(!(N.value.length>0)){be.value=!0;try{const{call:a}=yield Q(()=>import("./vendor.13deb96d.js").then(function(t){return t.aq}),["assets/vendor.13deb96d.js","assets/vendor.1f7d581e.css"]),e=yield a("portal_rrhh.api.filters.get_unique_reports_to");N.value=e||[]}catch(a){console.error("Error loading reports_to:",a),N.value=[]}finally{be.value=!1}}}),Ke=()=>{const a=T.value.trim();n.value.provincia=a,S.value=!0,y.value=-1,F&&clearTimeout(F),F=setTimeout(()=>{employees.reload&&employees.reload()},500)},We=()=>{D.value.length===0&&ke(),I.value.length>0&&(S.value=!0)},je=()=>{setTimeout(()=>{S.value=!1,y.value=-1},200)},ve=a=>_(this,null,function*(){T.value=a,n.value.provincia=a,S.value=!1,y.value=-1,yield new Promise(e=>setTimeout(e,100)),employees&&(typeof employees.reload=="function"?employees.reload():typeof employees.fetch=="function"&&employees.fetch())}),Ie=()=>{T.value="",n.value.provincia="",S.value=!1,employees.reload&&employees.reload()},Ee=a=>{!S.value||I.value.length===0||(y.value+=a,y.value<0?y.value=I.value.length-1:y.value>=I.value.length&&(y.value=0))},Qe=()=>{y.value>=0&&y.value<I.value.length?ve(I.value[y.value]):I.value.length===1&&ve(I.value[0])},Ze=()=>{const a=f.value.trim();n.value.company=a,M.value=!0,b.value=-1,F&&clearTimeout(F),F=setTimeout(()=>{employees.reload&&employees.reload()},500)},Ge=()=>{R.value.length===0&&Ce(),E.value.length>0&&(M.value=!0)},Xe=()=>{setTimeout(()=>{M.value=!1,b.value=-1},200)},me=a=>_(this,null,function*(){f.value=a,n.value.company=a,M.value=!1,b.value=-1,yield new Promise(e=>setTimeout(e,100)),employees&&(typeof employees.reload=="function"?employees.reload():typeof employees.fetch=="function"&&employees.fetch())}),Le=()=>{f.value="",n.value.company="",M.value=!1,employees.reload&&employees.reload()},Se=a=>{!M.value||E.value.length===0||(b.value+=a,b.value<0?b.value=E.value.length-1:b.value>=E.value.length&&(b.value=0))},Ye=()=>{b.value>=0&&b.value<E.value.length?me(E.value[b.value]):E.value.length===1&&me(E.value[0])},Oe=()=>{const a=P.value.trim(),e=N.value.find(t=>t.label.toLowerCase()===a.toLowerCase());n.value.reportsTo=e?e.value:"",A.value=!0,w.value=-1,F&&clearTimeout(F),F=setTimeout(()=>{employees.reload&&employees.reload()},500)},et=()=>{N.value.length===0&&Te(),L.value.length>0&&(A.value=!0)},tt=()=>{setTimeout(()=>{A.value=!1,w.value=-1},200)},pe=a=>_(this,null,function*(){P.value=a.label,n.value.reportsTo=a.value,A.value=!1,w.value=-1,yield new Promise(e=>setTimeout(e,100)),employees&&(typeof employees.reload=="function"?employees.reload():typeof employees.fetch=="function"&&employees.fetch())}),Re=()=>{P.value="",n.value.reportsTo="",A.value=!1,employees.reload&&employees.reload()},Pe=a=>{!A.value||L.value.length===0||(w.value+=a,w.value<0?w.value=L.value.length-1:w.value>=L.value.length&&(w.value=0))},st=()=>{w.value>=0&&w.value<L.value.length?pe(L.value[w.value]):L.value.length===1&&pe(L.value[0])},at=a=>_(this,null,function*(){try{const{call:e}=yield Q(()=>import("./vendor.13deb96d.js").then(function(i){return i.aq}),["assets/vendor.13deb96d.js","assets/vendor.1f7d581e.css"]);return(yield e("portal_rrhh.api.job_offer.get_job_offers_by_employee",{employee_name:a}))||[]}catch(e){return[]}}),ot=a=>_(this,null,function*(){try{if(le.value.filter(x=>x.job_offer_name===a).length>0||de.value)return;de.value=!0;const{call:t}=yield Q(()=>import("./vendor.13deb96d.js").then(function(x){return x.aq}),["assets/vendor.13deb96d.js","assets/vendor.1f7d581e.css"]),h=((yield t("portal_rrhh.api.modificaciones_rrhh.get_modificaciones_by_job_offer",{job_offer_name:a}))||[]).map(x=>$e(Ae({},x),{job_offer_name:a}));le.value.push(...h)}catch(e){console.error("Error cargando modificaciones:",e)}finally{de.value=!1}}),xe=a=>le.value.filter(t=>t.job_offer_name===a),lt=a=>{J.value.has(a)?J.value.delete(a):J.value.add(a)},De=()=>{j.value=!1},nt=a=>_(this,null,function*(){if(!O.value){if(ce.value===a.name&&V.value.length>0){u.value=a;return}yield rt(a)}}),rt=a=>_(this,null,function*(){O.value=!0,u.value=a,ce.value=a.name,V.value=[],j.value=!0;try{const e=yield at(a.name);V.value=e,le.value=[],J.value.clear();for(const t of e)yield ot(t.name)}catch(e){V.value=[]}finally{O.value=!1}}),Fe=a=>{if(!a)return"E";const e=a.trim().split(" ");return e.length>=2?(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase():a.charAt(0).toUpperCase()},it=(a,e)=>e?`/app/${a.toLowerCase().replace(/\s+/g,"-")}/${encodeURIComponent(e)}`:"#",re=(a,e,t)=>{t&&t.stopPropagation();const i=it(a,e);window.open(i,"_blank")},ut=()=>_(this,null,function*(){if(!(!u.value||!u.value.name))try{const e=`/app/job-offer/new-job-offer?custom_empleado=${encodeURIComponent(u.value.name)}`;window.open(e,"_blank")}catch(a){console.error("Error al crear nueva Job Offer:",a)}}),ct=(a,e)=>{if(e&&e.stopPropagation(),!!a)try{const t="Modificaciones RRHH".toLowerCase().replace(/\s+/g,"-"),i=encodeURIComponent(a),h=`/app/${t}/new-${t}?job_offer=${i}`;window.open(h,"_blank")}catch(t){console.error("Error al crear nueva Modificaci\xF3n RRHH:",t)}},ee=a=>a?new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"No especificada",dt=U(()=>n.value.employeeName.trim()!==""||n.value.dninie.trim()!==""||n.value.provincia.trim()!==""||n.value.company.trim()!==""||n.value.reportsTo.trim()!==""),vt=U(()=>n.value.provincia.trim()!==""||n.value.company.trim()!==""),mt=()=>{n.value.employeeName="",n.value.dninie="",Ie(),Le(),Re()};ht(()=>{ke(),Ce(),Te(),Je()});const fe=U(()=>{if(!V.value||V.value.length===0)return[];const a=n.value.provincia.trim().toLowerCase(),e=n.value.company.trim().toLowerCase();return!a&&!e?V.value:V.value.filter(t=>!(a&&!(t.custom_provincia||"").toLowerCase().includes(a)||e&&!(t.company||"").toLowerCase().includes(e)))});return te(()=>n.value.provincia,a=>{T.value!==a&&(T.value=a||"")}),te(()=>n.value.company,a=>{f.value!==a&&(f.value=a||"")}),te(()=>n.value.reportsTo,a=>{if(a){const e=N.value.find(t=>t.value===a);e&&P.value!==e.label&&(P.value=e.label)}else P.value=""}),te([()=>n.value.employeeName,()=>n.value.dninie,()=>n.value.provincia,()=>n.value.company,()=>n.value.reportsTo],([a,e,t,i,h],[x,q,B,ie,_e])=>{(a!==x||e!==q||t!==B||i!==ie||h!==_e)&&(ue&&clearTimeout(ue),ue=setTimeout(()=>{qe()},a!==x||e!==q?400:150))},{immediate:!1}),te(()=>u.value,(a,e)=>{(a==null?void 0:a.name)!==(e==null?void 0:e.name)&&(V.value=[],ce.value=null)}),(a,e)=>(o(),l("div",wt,[s("div",kt,[s("div",Ct,[s("div",Tt,[d(c(v),{name:"info",class:"h-5 w-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),e[15]||(e[15]=s("div",{class:"flex-1"},[s("h4",{class:"text-sm font-semibold text-blue-900 mb-1"},"Nuevo Procedimiento de Creaci\xF3n"),s("p",{class:"text-sm text-blue-800"}," Este es el nuevo procedimiento para crear nuevas Hojas de Contrataci\xF3n (HC) y Anexos. Por favor, utiliza esta p\xE1gina para crear todos los documentos relacionados con contrataci\xF3n, asegurando que se vinculen correctamente al empleado correspondiente. ")],-1))])])]),s("div",It,[s("div",Et,[s("div",Lt,[s("div",St,[d(c(se),{modelValue:n.value.employeeName,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.employeeName=t),type:"text",placeholder:"Buscar por nombre...",variant:"outline",size:"sm"},{prefix:Z(()=>[d(c(v),{name:"search",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),s("div",Rt,[d(c(se),{modelValue:n.value.dninie,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.dninie=t),type:"text",placeholder:"Buscar por DNI/NIE...",variant:"outline",size:"sm"},{prefix:Z(()=>[d(c(v),{name:"credit-card",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),s("div",Pt,[s("div",Dt,[d(c(se),{modelValue:T.value,"onUpdate:modelValue":e[2]||(e[2]=t=>T.value=t),type:"text",placeholder:"Buscar por provincia...",variant:"outline",size:"sm",onInput:Ke,onFocus:We,onBlur:je,onKeydown:[k(C(Qe,["prevent"]),["enter"]),e[3]||(e[3]=k(t=>S.value=!1,["escape"])),e[4]||(e[4]=k(C(t=>Ee(1),["prevent"]),["down"])),e[5]||(e[5]=k(C(t=>Ee(-1),["prevent"]),["up"]))]},{prefix:Z(()=>[d(c(v),{name:"map-pin",class:"h-4 text-gray-400"})]),_:1},8,["modelValue","onKeydown"]),n.value.provincia?(o(),l("button",{key:0,onClick:Ie,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",type:"button"},[d(c(v),{name:"x",class:"h-4"})])):p("",!0)]),S.value&&I.value.length>0?(o(),l("div",Ft,[s("div",Vt,[s("div",Mt," Seleccionar provincia ("+r(I.value.length)+" resultados): ",1),(o(!0),l(H,null,z(I.value,(t,i)=>(o(),l("div",{key:t,onMousedown:C(h=>ve(t),["prevent"]),class:ae(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",i===y.value?"bg-blue-100":"hover:bg-blue-50"])},[s("div",At,r(t),1)],42,Nt))),128))])])):p("",!0)]),s("div",$t,[s("div",Bt,[d(c(se),{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=t=>f.value=t),type:"text",placeholder:"Buscar por empresa...",variant:"outline",size:"sm",onInput:Ze,onFocus:Ge,onBlur:Xe,onKeydown:[k(C(Ye,["prevent"]),["enter"]),e[7]||(e[7]=k(t=>M.value=!1,["escape"])),e[8]||(e[8]=k(C(t=>Se(1),["prevent"]),["down"])),e[9]||(e[9]=k(C(t=>Se(-1),["prevent"]),["up"]))]},{prefix:Z(()=>[d(c(v),{name:"building",class:"h-4 text-gray-400"})]),_:1},8,["modelValue","onKeydown"]),n.value.company?(o(),l("button",{key:0,onClick:Le,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",type:"button"},[d(c(v),{name:"x",class:"h-4"})])):p("",!0)]),M.value&&E.value.length>0?(o(),l("div",Ht,[s("div",zt,[s("div",Jt," Seleccionar empresa ("+r(E.value.length)+" resultados): ",1),(o(!0),l(H,null,z(E.value,(t,i)=>(o(),l("div",{key:t,onMousedown:C(h=>me(t),["prevent"]),class:ae(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",i===b.value?"bg-blue-100":"hover:bg-blue-50"])},[s("div",Ut,r(t),1)],42,qt))),128))])])):p("",!0)]),s("div",Kt,[s("div",Wt,[d(c(se),{modelValue:P.value,"onUpdate:modelValue":e[10]||(e[10]=t=>P.value=t),type:"text",placeholder:"Buscar por responsable...",variant:"outline",size:"sm",onInput:Oe,onFocus:et,onBlur:tt,onKeydown:[k(C(st,["prevent"]),["enter"]),e[11]||(e[11]=k(t=>A.value=!1,["escape"])),e[12]||(e[12]=k(C(t=>Pe(1),["prevent"]),["down"])),e[13]||(e[13]=k(C(t=>Pe(-1),["prevent"]),["up"]))]},{prefix:Z(()=>[d(c(v),{name:"user",class:"h-4 text-gray-400"})]),_:1},8,["modelValue","onKeydown"]),n.value.reportsTo?(o(),l("button",{key:0,onClick:Re,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",type:"button"},[d(c(v),{name:"x",class:"h-4"})])):p("",!0)]),A.value&&L.value.length>0?(o(),l("div",jt,[s("div",Qt,[s("div",Zt," Seleccionar responsable ("+r(L.value.length)+" resultados): ",1),(o(!0),l(H,null,z(L.value,(t,i)=>(o(),l("div",{key:t.value,onMousedown:C(h=>pe(t),["prevent"]),class:ae(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",i===w.value?"bg-blue-100":"hover:bg-blue-50"])},[s("div",Xt,r(t.label),1)],42,Gt))),128))])])):p("",!0)]),s("div",Yt,[d(c(gt),{variant:"outline",size:"sm",onClick:mt,disabled:!dt.value},{default:Z(()=>[d(c(v),{name:"x",class:"h-4"})]),_:1},8,["disabled"])])])])]),s("div",Ot,[s("div",{class:ae(["bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col h-full overflow-hidden",j.value?"w-64":"w-1/3"])},[s("div",es,[j.value&&u.value?(o(),l("div",ts,[s("div",ss,[s("h3",as,r(u.value.employee_name),1),s("p",os,r(u.value.custom_dninie),1)]),s("button",{onClick:De,class:"ml-2 p-1 text-gray-400",title:"Mostrar todos los empleados"},[d(c(v),{name:"maximize-2",class:"h-4 w-4"})])])):(o(),l("div",ls,[e[16]||(e[16]=s("h3",{class:"text-sm font-medium text-gray-900"},"Empleados",-1)),s("div",ns,[s("span",rs,r(Y.value.length)+r(X.value?"+":"")+" de "+r(oe.value),1),X.value?(o(),bt(c(v),{key:0,name:"loader",class:"h-3 w-3 animate-spin text-blue-500"})):p("",!0)])]))]),s("div",is,[Ue.value?(o(),l("div",us,[d(c(v),{name:"loader",class:"h-6 w-6 animate-spin mx-auto mb-2"}),e[17]||(e[17]=he(" Cargando empleados... ",-1))])):!Y.value||Y.value.length===0?(o(),l("div",cs," No hay empleados disponibles ")):j.value&&u.value?(o(),l("div",ds,[s("div",vs,[s("div",ms,[s("div",ps,[s("div",xs,[s("div",fs,[s("span",_s,r(Fe(u.value.employee_name)),1)])]),s("div",ys,[s("p",hs,r(u.value.employee_name||"Sin nombre"),1),s("p",gs,r(u.value.custom_dninie||u.value.name||"Sin DNI"),1),s("p",bs,r(u.value.designation||"Sin puesto"),1),u.value.name?(o(),l("a",{key:0,onClick:e[14]||(e[14]=t=>re("Employee",u.value.name,t)),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block mt-1",title:"Ver detalle del empleado"}," ID: "+r(u.value.name),1)):p("",!0),u.value.companies&&u.value.companies.length>0?(o(),l("div",ws,[s("div",ks,r(u.value.status_text),1),(o(!0),l(H,null,z(u.value.companies,t=>(o(),l("div",{key:t,class:"truncate"},r(t),1))),128))])):(o(),l("div",Cs,r(u.value.status_text),1))])]),s("div",Ts,[u.value.status==="Alta"?(o(),l("div",Is,r(u.value.status),1)):u.value.status==="Baja"?(o(),l("div",Es,r(u.value.status),1)):(o(),l("div",Ls,r(u.value.status),1))])])])])):(o(),l("div",Ss,[(o(!0),l(H,null,z(Y.value,t=>{var i,h;return o(),l("div",{key:t.name,onClick:x=>nt(t),class:ae(["p-3 cursor-pointer",{"bg-blue-50 border-r-2 border-blue-500":((i=u.value)==null?void 0:i.name)===t.name,"opacity-50":O.value&&((h=u.value)==null?void 0:h.name)===t.name}])},[s("div",Ps,[s("div",Ds,[s("div",Fs,[s("div",Vs,[s("span",Ms,r(Fe(t.employee_name)),1)])]),s("div",Ns,[s("p",As,r(t.employee_name||"Sin nombre"),1),s("p",$s,r(t.custom_dninie||t.name||"Sin DNI"),1),s("p",Bs,r(t.designation||"Sin puesto"),1),t.name?(o(),l("a",{key:0,onClick:x=>re("Employee",t.name,x),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block mt-1",title:"Ver detalle del empleado"}," ID: "+r(t.name),9,Hs)):p("",!0),t.companies&&t.companies.length>0?(o(),l("div",zs,[s("div",Js,r(t.status_text),1),(o(!0),l(H,null,z(t.companies,x=>(o(),l("div",{key:x,class:"truncate"},r(x),1))),128))])):(o(),l("div",qs,r(t.status_text),1))])]),s("div",Us,[t.status==="Alta"?(o(),l("div",Ks,r(t.status),1)):t.status==="Baja"?(o(),l("div",Ws,r(t.status),1)):(o(),l("div",js,r(t.status),1))])])],10,Rs)}),128))]))])],2),s("div",Qs,[s("div",Zs,[s("h3",Gs,r(u.value?`Hojas de Contrataci\xF3n - ${u.value.employee_name}`:"Selecciona un empleado"),1),u.value?(o(),l("div",Xs,[s("button",{onClick:ut,class:"flex items-center space-x-2 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",title:"Crear nueva HC para este empleado"},[d(c(v),{name:"plus",class:"h-4 w-4"}),e[18]||(e[18]=s("span",null,"Nueva HC",-1))]),j.value?(o(),l("button",{key:0,onClick:De,class:"flex items-center space-x-2 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 rounded-md"},[d(c(v),{name:"users",class:"h-4 w-4"}),e[19]||(e[19]=s("span",null,"Mostrar empleados",-1))])):p("",!0)])):p("",!0)]),s("div",Ys,[u.value?O.value?(o(),l("div",ea,[d(c(v),{name:"loader",class:"h-8 w-8 animate-spin mx-auto mb-4"}),e[21]||(e[21]=s("p",{class:"text-sm"},"Cargando Hojas de Contrataci\xF3n...",-1)),e[22]||(e[22]=s("p",{class:"text-xs text-gray-400 mt-2"},"Por favor espera...",-1))])):!fe.value||fe.value.length===0?(o(),l("div",ta,[d(c(v),{name:"file-text",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e[23]||(e[23]=s("p",null,"No hay Hojas de Contrataci\xF3n para este empleado",-1)),vt.value?(o(),l("p",sa,"Intenta ajustar los filtros de provincia o empresa")):p("",!0)])):(o(),l("div",aa,[(o(!0),l(H,null,z(fe.value,t=>(o(),l("div",{key:t.name,class:"p-4 border-l-4 border-transparent"},[s("div",oa,[s("div",la,[s("div",na,[s("div",ra,[s("div",ia,[s("h4",ua,r(t.designation||"Sin t\xEDtulo"),1),t.name?(o(),l("button",{key:0,onClick:i=>ct(t.name,i),class:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors",title:"Crear nuevo anexo para esta hoja de contrataci\xF3n"},[d(c(v),{name:"plus",class:"h-3 w-3"}),e[24]||(e[24]=s("span",null,"Nuevo Anexo",-1))],8,ca)):p("",!0)]),t.name?(o(),l("a",{key:0,onClick:i=>re("Job Offer",t.name,i),class:"text-sm text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block",title:"Ver detalle de la hoja de contrataci\xF3n"}," ID: "+r(t.name),9,da)):(o(),l("p",va,"ID: Sin ID"))]),t.workflow_state==="Alta"?(o(),l("div",ma,r(t.workflow_state),1)):t.workflow_state==="Baja"?(o(),l("div",pa,r(t.workflow_state),1)):t.workflow_state==="Pendiente"?(o(),l("div",xa,r(t.workflow_state),1)):t.workflow_state==="Cancelado"?(o(),l("div",fa,r(t.workflow_state),1)):(o(),l("div",_a,r(t.workflow_state||"Sin estado"),1))]),s("div",ya,[s("div",ha,[s("div",ga,[d(c(v),{name:"calendar",class:"h-4 w-4 text-gray-400"}),e[25]||(e[25]=s("span",{class:"text-gray-600"},"Fecha de oferta:",-1)),s("span",ba,r(t.offer_date?ee(t.offer_date):"No especificada"),1)]),s("div",wa,[d(c(v),{name:"building",class:"h-4 w-4 text-gray-400"}),e[26]||(e[26]=s("span",{class:"text-gray-600"},"Empresa:",-1)),s("span",ka,r(t.company||"No especificada"),1)]),t.custom_tipo_de_contrato?(o(),l("div",Ca,[d(c(v),{name:"file-text",class:"h-4 w-4 text-gray-400"}),e[27]||(e[27]=s("span",{class:"text-gray-600"},"Tipo de contrato:",-1)),s("span",Ta,r(t.custom_tipo_de_contrato),1)])):p("",!0)]),s("div",Ia,[t.custom_fecha_inicio?(o(),l("div",Ea,[d(c(v),{name:"play",class:"h-4 w-4 text-gray-400"}),e[28]||(e[28]=s("span",{class:"text-gray-600"},"Inicio:",-1)),s("span",La,r(ee(t.custom_fecha_inicio)),1)])):p("",!0),t.custom_fecha_fin?(o(),l("div",Sa,[d(c(v),{name:"stop",class:"h-4 w-4 text-gray-400"}),e[29]||(e[29]=s("span",{class:"text-gray-600"},"Fin:",-1)),s("span",Ra,r(ee(t.custom_fecha_fin)),1)])):p("",!0),t.custom_estado_de_tramitacion?(o(),l("div",Pa,[d(c(v),{name:"settings",class:"h-4 w-4 text-gray-400"}),e[30]||(e[30]=s("span",{class:"text-gray-600"},"Tramitaci\xF3n:",-1)),s("span",Da,r(t.custom_estado_de_tramitacion),1)])):p("",!0)])]),s("div",Fa,[t.custom_firmado?(o(),l("div",Va,[d(c(v),{name:"check",class:"h-3 w-3"}),e[31]||(e[31]=s("span",null,"Firmado",-1))])):p("",!0),t.custom_contrato?(o(),l("div",Ma,[d(c(v),{name:"file",class:"h-3 w-3"}),e[32]||(e[32]=s("span",null,"Contrato",-1))])):p("",!0),t.custom_comun?(o(),l("div",Na,[d(c(v),{name:"users",class:"h-3 w-3"}),e[33]||(e[33]=s("span",null,"Com\xFAn",-1))])):p("",!0)])]),xe(t.name).length>0?(o(),l("div",Aa,[s("div",$a,[s("h6",Ba,[d(c(v),{name:"edit-3",class:"h-4 w-4 mr-2 text-blue-600"}),he(" Modificaciones RRHH ("+r(xe(t.name).length)+") ",1)]),s("button",{onClick:i=>lt(t.name),class:"text-sm text-blue-600 flex items-center font-medium"},[d(c(v),{name:J.value.has(t.name)?"chevron-up":"chevron-down",class:"h-4 w-4 mr-1"},null,8,["name"]),he(" "+r(J.value.has(t.name)?"Ocultar":"Mostrar"),1)],8,Ha)]),J.value.has(t.name)?(o(),l("div",za,[(o(!0),l(H,null,z(xe(t.name),(i,h)=>(o(),l("div",{key:i.name,class:"bg-blue-50 rounded-lg p-3 border border-blue-200 relative"},[e[40]||(e[40]=s("div",{class:"absolute -left-6 top-3 w-3 h-3 bg-blue-400 rounded-full border-2 border-white"},null,-1)),s("div",Ja,[s("div",qa,[s("h6",Ua,r(i.tipo_actualizacion||"Modificaci\xF3n"),1),i.name?(o(),l("a",{key:0,onClick:x=>re("Modificaciones RRHH",i.name,x),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block",title:"Ver detalle de la modificaci\xF3n RRHH"}," ID: "+r(i.name),9,Ka)):(o(),l("p",Wa,"ID: Sin ID"))]),i.workflow_state==="Alta"?(o(),l("div",ja,r(i.workflow_state),1)):i.workflow_state==="Baja"?(o(),l("div",Qa,r(i.workflow_state),1)):i.workflow_state==="Pendiente"?(o(),l("div",Za,r(i.workflow_state),1)):(o(),l("div",Ga,r(i.workflow_state||"Sin estado"),1))]),s("div",Xa,[i.start_date?(o(),l("div",Ya,[d(c(v),{name:"play",class:"h-4 w-4 text-gray-400"}),e[34]||(e[34]=s("span",{class:"text-gray-600"},"Inicio:",-1)),s("span",Oa,r(ee(i.start_date)),1)])):p("",!0),i.end_date?(o(),l("div",eo,[d(c(v),{name:"stop",class:"h-4 w-4 text-gray-400"}),e[35]||(e[35]=s("span",{class:"text-gray-600"},"Fin:",-1)),s("span",to,r(ee(i.end_date)),1)])):p("",!0),i.custom_tipo_de_contrato?(o(),l("div",so,[d(c(v),{name:"file-text",class:"h-4 w-4 text-gray-400"}),e[36]||(e[36]=s("span",{class:"text-gray-600"},"Tipo:",-1)),s("span",ao,r(i.custom_tipo_de_contrato),1)])):p("",!0),i.custom_provincia?(o(),l("div",oo,[d(c(v),{name:"map-pin",class:"h-4 w-4 text-gray-400"}),e[37]||(e[37]=s("span",{class:"text-gray-600"},"Provincia:",-1)),s("span",lo,r(i.custom_provincia),1)])):p("",!0)]),s("div",no,[i.custom_firmado?(o(),l("div",ro,[d(c(v),{name:"check",class:"h-3 w-3"}),e[38]||(e[38]=s("span",{class:"text-xs"},"Firmado",-1))])):p("",!0),i.custom_comun?(o(),l("div",io,[d(c(v),{name:"users",class:"h-3 w-3"}),e[39]||(e[39]=s("span",{class:"text-xs"},"Com\xFAn",-1))])):p("",!0)])]))),128))])):p("",!0)])):p("",!0)])]))),128))])):(o(),l("div",Os,[d(c(v),{name:"user",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e[20]||(e[20]=s("p",null,"Selecciona un empleado para ver sus Hojas de Contrataci\xF3n",-1))]))])])])]))}};export{po as default};
