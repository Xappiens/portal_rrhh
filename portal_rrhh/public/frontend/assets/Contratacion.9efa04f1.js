var Ne=Object.defineProperty,Be=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var ve=(h,r,i)=>r in h?Ne(h,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[r]=i,xe=(h,r)=>{for(var i in r||(r={}))Ae.call(r,i)&&ve(h,i,r[i]);if(me)for(var i of me(r))Re.call(r,i)&&ve(h,i,r[i]);return h},pe=(h,r)=>Be(h,$e(r));var E=(h,r,i)=>new Promise((b,S)=>{var I=f=>{try{R(i.next(f))}catch(L){S(L)}},y=f=>{try{R(i.throw(f))}catch(L){S(L)}},R=f=>f.done?b(f.value):Promise.resolve(f.value).then(I,y);R((i=i.apply(h,r)).next())});import{_ as W}from"./index.9d618bb3.js";import{r as _,l as Je,q as B,X as ze,K as U,o,c as n,b as t,d as u,w as K,Y as T,Z as V,u as c,_ as m,f as p,t as l,F as $,E as A,Q as He,n as X,e as se,G as Ue}from"./vendor.b007e8f2.js";const Ke={class:"h-full bg-gray-50 flex flex-col overflow-hidden"},qe={class:"bg-white rounded-lg shadow-sm border border-gray-200 mx-6 mb-6 flex-shrink-0"},Ge={class:"px-4 py-3"},Qe={class:"flex items-center space-x-3"},We={class:"flex-1"},Xe={class:"flex-1"},Ye={class:"flex-1 relative"},Ze={class:"relative"},je={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Oe={class:"p-2"},et={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},tt=["onMousedown"],st={class:"font-medium text-gray-900"},at={class:"flex-1 relative"},ot={class:"relative"},nt={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},lt={class:"p-2"},it={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},rt=["onMousedown"],ut={class:"font-medium text-gray-900"},dt={class:"flex-shrink-0"},ct={class:"flex gap-6 px-6 pb-6 flex-1 min-h-0 overflow-hidden"},mt={class:"px-4 py-3 border-b border-gray-200 flex-shrink-0"},vt={key:0,class:"flex items-center justify-between"},xt={class:"flex-1 min-w-0"},pt={class:"text-sm font-medium text-gray-900 truncate"},_t={class:"text-xs text-gray-500 truncate"},ft={key:1,class:"text-sm font-medium text-gray-900"},yt={class:"overflow-y-auto flex-1"},ht={key:0,class:"p-4 text-center text-gray-500"},gt={key:1,class:"p-4 text-center text-gray-500"},bt={key:2,class:"p-2"},wt={class:"bg-blue-50 rounded-lg p-3 border border-blue-200"},kt={class:"flex items-start justify-between"},Ct={class:"flex items-center space-x-3 flex-1 min-w-0"},It={class:"flex-shrink-0 h-8 w-8"},Lt={class:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center"},St={class:"text-xs font-semibold text-blue-700"},Dt={class:"flex-1 min-w-0"},Pt={class:"text-sm font-medium text-gray-900 truncate"},Et={class:"text-xs text-gray-600 truncate"},Ft={class:"text-xs text-gray-500 truncate"},Tt={key:1,class:"text-xs text-gray-600"},Vt={class:"font-medium text-gray-700 mb-1"},Mt={key:2,class:"text-xs text-gray-500"},Nt={class:"flex-shrink-0 ml-3"},Bt={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},$t={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},At={key:2,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Rt={key:3,class:"divide-y divide-gray-200"},Jt=["onClick"],zt={class:"flex items-start justify-between"},Ht={class:"flex items-center space-x-3 flex-1 min-w-0"},Ut={class:"flex-shrink-0 h-10 w-10"},Kt={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},qt={class:"text-sm font-semibold text-blue-700"},Gt={class:"flex-1 min-w-0"},Qt={class:"text-sm font-medium text-gray-900 truncate"},Wt={class:"text-xs text-gray-600 truncate"},Xt={class:"text-xs text-gray-500 truncate"},Yt=["onClick"],Zt={key:1,class:"text-xs text-gray-600"},jt={class:"font-medium text-gray-700 mb-1"},Ot={key:2,class:"text-xs text-gray-500"},es={class:"flex-shrink-0 ml-3"},ts={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},ss={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},as={key:2,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},os={class:"flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col h-full overflow-hidden"},ns={class:"px-4 py-3 border-b border-gray-200 flex-shrink-0 flex items-center justify-between"},ls={class:"text-sm font-medium text-gray-900"},is={class:"overflow-y-auto flex-1"},rs={key:0,class:"p-8 text-center text-gray-500"},us={key:1,class:"p-8 text-center text-gray-500"},ds={key:2,class:"p-4 text-center text-gray-500"},cs={key:0,class:"text-xs text-gray-400 mt-2"},ms={key:3,class:"divide-y divide-gray-200"},vs={class:"flex items-start justify-between"},xs={class:"flex-1"},ps={class:"flex items-center space-x-3 mb-3"},_s={class:"flex-1"},fs={class:"text-base font-semibold text-gray-900"},ys=["onClick"],hs={key:1,class:"text-sm text-gray-500 font-mono"},gs={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},bs={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},ws={key:2,class:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"},ks={key:3,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Cs={key:4,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},Is={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3"},Ls={class:"space-y-2"},Ss={class:"flex items-center space-x-2 text-sm"},Ds={class:"font-medium text-gray-900"},Ps={class:"flex items-center space-x-2 text-sm"},Es={class:"font-medium text-gray-900"},Fs={key:0,class:"flex items-center space-x-2 text-sm"},Ts={class:"font-medium text-gray-900"},Vs={class:"space-y-2"},Ms={key:0,class:"flex items-center space-x-2 text-sm"},Ns={class:"font-medium text-gray-900"},Bs={key:1,class:"flex items-center space-x-2 text-sm"},$s={class:"font-medium text-gray-900"},As={key:2,class:"flex items-center space-x-2 text-sm"},Rs={class:"font-medium text-gray-900"},Js={class:"flex flex-wrap gap-2 text-xs"},zs={key:0,class:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-800 rounded-full"},Hs={key:1,class:"flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full"},Us={key:2,class:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full"},Ks={key:0,class:"mt-4 ml-4 border-l-2 border-blue-200 pl-4"},qs={class:"flex items-center justify-between mb-3"},Gs={class:"text-sm font-medium text-gray-700 flex items-center"},Qs=["onClick"],Ws={key:0,class:"space-y-3"},Xs={class:"flex items-start justify-between mb-2"},Ys={class:"flex-1"},Zs={class:"text-sm font-semibold text-gray-900"},js=["onClick"],Os={key:1,class:"text-xs text-gray-500 font-mono"},ea={key:0,class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"},ta={key:1,class:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium"},sa={key:2,class:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"},aa={key:3,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium"},oa={class:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},na={key:0,class:"flex items-center space-x-2"},la={class:"font-medium text-gray-900"},ia={key:1,class:"flex items-center space-x-2"},ra={class:"font-medium text-gray-900"},ua={key:2,class:"flex items-center space-x-2"},da={class:"font-medium text-gray-900"},ca={key:3,class:"flex items-center space-x-2"},ma={class:"font-medium text-gray-900"},va={class:"flex flex-wrap gap-2 mt-2"},xa={key:0,class:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-800 rounded-full"},pa={key:1,class:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full"},ha={__name:"Contratacion",setup(h){const r=_(null),i=_({employeeName:"",dninie:"",provincia:"",company:""}),b=_(""),S=_([]),I=_(!1),y=_(-1),R=_(!1),f=_(""),L=_([]),F=_(!1),g=_(-1),ae=_(!1);let D=null;const q=_([]),z=_(!1),P=_([]),Y=_(null),G=_([]),Z=_(!1),M=_(new Set),J=_(!1),x=Je({url:"portal_rrhh.api.employee.get_employees",cache:!1,auto:!0,makeParams(){const a={status:"Active"};return i.value.provincia.trim()&&(a.provincia=i.value.provincia.trim()),i.value.company.trim()&&(a.company=i.value.company.trim()),{filters:JSON.stringify(a)}}}),_e=B(()=>x.loading),w=B(()=>{if(!b.value.trim())return S.value;const a=b.value.toLowerCase();return S.value.filter(e=>e&&e.toLowerCase().includes(a))}),k=B(()=>{if(!f.value.trim())return L.value;const a=f.value.toLowerCase();return L.value.filter(e=>e&&e.toLowerCase().includes(a))}),oe=()=>E(this,null,function*(){if(!(S.value.length>0)){R.value=!0;try{const{call:a}=yield W(()=>import("./vendor.b007e8f2.js").then(function(v){return v.af}),["assets/vendor.b007e8f2.js","assets/vendor.1f7d581e.css"]),e=yield a("portal_rrhh.api.filters.get_unique_provinces");S.value=e||[]}catch(a){console.error("Error loading provincias:",a),S.value=[]}finally{R.value=!1}}}),ne=()=>E(this,null,function*(){if(!(L.value.length>0)){ae.value=!0;try{const{call:a}=yield W(()=>import("./vendor.b007e8f2.js").then(function(v){return v.af}),["assets/vendor.b007e8f2.js","assets/vendor.1f7d581e.css"]),e=yield a("portal_rrhh.api.filters.get_unique_companies");L.value=e||[]}catch(a){console.error("Error loading companies:",a),L.value=[]}finally{ae.value=!1}}}),fe=()=>{const a=b.value.trim();i.value.provincia=a,I.value=!0,y.value=-1,D&&clearTimeout(D),D=setTimeout(()=>{x.reload&&x.reload()},500)},ye=()=>{S.value.length===0&&oe(),w.value.length>0&&(I.value=!0)},he=()=>{setTimeout(()=>{I.value=!1,y.value=-1},200)},j=a=>E(this,null,function*(){b.value=a,i.value.provincia=a,I.value=!1,y.value=-1,yield new Promise(e=>setTimeout(e,100)),x&&(typeof x.reload=="function"?x.reload():typeof x.fetch=="function"&&x.fetch())}),le=()=>{b.value="",i.value.provincia="",I.value=!1,x.reload&&x.reload()},ie=a=>{!I.value||w.value.length===0||(y.value+=a,y.value<0?y.value=w.value.length-1:y.value>=w.value.length&&(y.value=0))},ge=()=>{y.value>=0&&y.value<w.value.length?j(w.value[y.value]):w.value.length===1&&j(w.value[0])},be=()=>{const a=f.value.trim();i.value.company=a,F.value=!0,g.value=-1,D&&clearTimeout(D),D=setTimeout(()=>{x.reload&&x.reload()},500)},we=()=>{L.value.length===0&&ne(),k.value.length>0&&(F.value=!0)},ke=()=>{setTimeout(()=>{F.value=!1,g.value=-1},200)},O=a=>E(this,null,function*(){f.value=a,i.value.company=a,F.value=!1,g.value=-1,yield new Promise(e=>setTimeout(e,100)),x&&(typeof x.reload=="function"?x.reload():typeof x.fetch=="function"&&x.fetch())}),re=()=>{f.value="",i.value.company="",F.value=!1,x.reload&&x.reload()},ue=a=>{!F.value||k.value.length===0||(g.value+=a,g.value<0?g.value=k.value.length-1:g.value>=k.value.length&&(g.value=0))},Ce=()=>{g.value>=0&&g.value<k.value.length?O(k.value[g.value]):k.value.length===1&&O(k.value[0])},Ie=a=>E(this,null,function*(){try{const{call:e}=yield W(()=>import("./vendor.b007e8f2.js").then(function(s){return s.af}),["assets/vendor.b007e8f2.js","assets/vendor.1f7d581e.css"]);return(yield e("portal_rrhh.api.job_offer.get_job_offers_by_employee",{employee_name:a}))||[]}catch(e){return[]}}),Le=a=>E(this,null,function*(){try{if(G.value.filter(C=>C.job_offer_name===a).length>0||Z.value)return;Z.value=!0;const{call:v}=yield W(()=>import("./vendor.b007e8f2.js").then(function(C){return C.af}),["assets/vendor.b007e8f2.js","assets/vendor.1f7d581e.css"]),d=((yield v("portal_rrhh.api.modificaciones_rrhh.get_modificaciones_by_job_offer",{job_offer_name:a}))||[]).map(C=>pe(xe({},C),{job_offer_name:a}));G.value.push(...d)}catch(e){console.error("Error cargando modificaciones:",e)}finally{Z.value=!1}}),ee=a=>G.value.filter(v=>v.job_offer_name===a),Se=a=>{M.value.has(a)?M.value.delete(a):M.value.add(a)},de=()=>{J.value=!1},De=a=>E(this,null,function*(){if(!z.value){if(Y.value===a.name&&P.value.length>0){r.value=a;return}yield Pe(a)}}),Pe=a=>E(this,null,function*(){z.value=!0,r.value=a,Y.value=a.name,P.value=[],J.value=!0;try{const e=yield Ie(a.name);P.value=e,G.value=[],M.value.clear();for(const v of e)yield Le(v.name)}catch(e){P.value=[]}finally{z.value=!1}}),ce=a=>{if(!a)return"E";const e=a.trim().split(" ");return e.length>=2?(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase():a.charAt(0).toUpperCase()},Ee=(a,e)=>e?`/app/${a.toLowerCase().replace(/\s+/g,"-")}/${encodeURIComponent(e)}`:"#",Q=(a,e,v)=>{v&&v.stopPropagation();const s=Ee(a,e);window.open(s,"_blank")},H=a=>a?new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"No especificada",Fe=B(()=>i.value.employeeName.trim()!==""||i.value.dninie.trim()!==""||i.value.provincia.trim()!==""||i.value.company.trim()!==""),Te=B(()=>i.value.provincia.trim()!==""||i.value.company.trim()!==""),Ve=()=>{i.value.employeeName="",i.value.dninie="",le(),re()};ze(()=>{oe(),ne()});const Me=B(()=>{if(!x.data)return[];const a=i.value.employeeName.trim().toLowerCase(),e=i.value.dninie.trim().toLowerCase();return x.data.filter(v=>!(a&&(!v.employee_name||!v.employee_name.toLowerCase().includes(a))||e&&(!v.custom_dninie||!v.custom_dninie.toLowerCase().includes(e))))}),te=B(()=>{if(!P.value||P.value.length===0)return[];const a=i.value.provincia.trim().toLowerCase(),e=i.value.company.trim().toLowerCase();return!a&&!e?P.value:P.value.filter(v=>!(a&&!(v.custom_provincia||"").toLowerCase().includes(a)||e&&!(v.company||"").toLowerCase().includes(e)))});return U(Me,a=>{q.value=a},{immediate:!0}),U(()=>i.value.provincia,a=>{b.value!==a&&(b.value=a||"")}),U(()=>i.value.company,a=>{f.value!==a&&(f.value=a||"")}),U([()=>i.value.provincia,()=>i.value.company],([a,e],[v,s])=>{(a!==v||e!==s)&&(D&&clearTimeout(D),D=setTimeout(()=>{x&&(typeof x.reload=="function"?x.reload():typeof x.fetch=="function"?x.fetch():x.submit&&x.submit())},150))},{immediate:!1}),U(()=>r.value,(a,e)=>{(a==null?void 0:a.name)!==(e==null?void 0:e.name)&&(P.value=[],Y.value=null)}),(a,e)=>{const v=Ue("Input");return o(),n("div",Ke,[t("div",qe,[t("div",Ge,[t("div",Qe,[t("div",We,[u(v,{modelValue:i.value.employeeName,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.employeeName=s),type:"text",placeholder:"Buscar por nombre...",variant:"outline",size:"sm"},{prefix:K(()=>[u(c(m),{name:"search",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),t("div",Xe,[u(v,{modelValue:i.value.dninie,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.dninie=s),type:"text",placeholder:"Buscar por DNI/NIE...",variant:"outline",size:"sm"},{prefix:K(()=>[u(c(m),{name:"credit-card",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),t("div",Ye,[t("div",Ze,[u(v,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=s=>b.value=s),type:"text",placeholder:"Buscar por provincia...",variant:"outline",size:"sm",onInput:fe,onFocus:ye,onBlur:he,onKeydown:[T(V(ge,["prevent"]),["enter"]),e[3]||(e[3]=T(s=>I.value=!1,["escape"])),e[4]||(e[4]=T(V(s=>ie(1),["prevent"]),["down"])),e[5]||(e[5]=T(V(s=>ie(-1),["prevent"]),["up"]))]},{prefix:K(()=>[u(c(m),{name:"map-pin",class:"h-4 text-gray-400"})]),_:1},8,["modelValue","onKeydown"]),i.value.provincia?(o(),n("button",{key:0,onClick:le,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",type:"button"},[u(c(m),{name:"x",class:"h-4"})])):p("",!0)]),I.value&&w.value.length>0?(o(),n("div",je,[t("div",Oe,[t("div",et," Seleccionar provincia ("+l(w.value.length)+" resultados): ",1),(o(!0),n($,null,A(w.value,(s,d)=>(o(),n("div",{key:s,onMousedown:V(C=>j(s),["prevent"]),class:X(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",d===y.value?"bg-blue-100":"hover:bg-blue-50"])},[t("div",st,l(s),1)],42,tt))),128))])])):p("",!0)]),t("div",at,[t("div",ot,[u(v,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=s=>f.value=s),type:"text",placeholder:"Buscar por empresa...",variant:"outline",size:"sm",onInput:be,onFocus:we,onBlur:ke,onKeydown:[T(V(Ce,["prevent"]),["enter"]),e[7]||(e[7]=T(s=>F.value=!1,["escape"])),e[8]||(e[8]=T(V(s=>ue(1),["prevent"]),["down"])),e[9]||(e[9]=T(V(s=>ue(-1),["prevent"]),["up"]))]},{prefix:K(()=>[u(c(m),{name:"building",class:"h-4 text-gray-400"})]),_:1},8,["modelValue","onKeydown"]),i.value.company?(o(),n("button",{key:0,onClick:re,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",type:"button"},[u(c(m),{name:"x",class:"h-4"})])):p("",!0)]),F.value&&k.value.length>0?(o(),n("div",nt,[t("div",lt,[t("div",it," Seleccionar empresa ("+l(k.value.length)+" resultados): ",1),(o(!0),n($,null,A(k.value,(s,d)=>(o(),n("div",{key:s,onMousedown:V(C=>O(s),["prevent"]),class:X(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",d===g.value?"bg-blue-100":"hover:bg-blue-50"])},[t("div",ut,l(s),1)],42,rt))),128))])])):p("",!0)]),t("div",dt,[u(c(He),{variant:"outline",size:"sm",onClick:Ve,disabled:!Fe.value},{default:K(()=>[u(c(m),{name:"x",class:"h-4"})]),_:1},8,["disabled"])])])])]),t("div",ct,[t("div",{class:X(["bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col h-full overflow-hidden",J.value?"w-64":"w-1/3"])},[t("div",mt,[J.value&&r.value?(o(),n("div",vt,[t("div",xt,[t("h3",pt,l(r.value.employee_name),1),t("p",_t,l(r.value.custom_dninie),1)]),t("button",{onClick:de,class:"ml-2 p-1 text-gray-400",title:"Mostrar todos los empleados"},[u(c(m),{name:"maximize-2",class:"h-4 w-4"})])])):(o(),n("h3",ft,"Empleados"))]),t("div",yt,[_e.value?(o(),n("div",ht,[u(c(m),{name:"loader",class:"h-6 w-6 animate-spin mx-auto mb-2"}),e[11]||(e[11]=se(" Cargando empleados... ",-1))])):!q.value||q.value.length===0?(o(),n("div",gt," No hay empleados disponibles ")):J.value&&r.value?(o(),n("div",bt,[t("div",wt,[t("div",kt,[t("div",Ct,[t("div",It,[t("div",Lt,[t("span",St,l(ce(r.value.employee_name)),1)])]),t("div",Dt,[t("p",Pt,l(r.value.employee_name||"Sin nombre"),1),t("p",Et,l(r.value.custom_dninie||r.value.name||"Sin DNI"),1),t("p",Ft,l(r.value.designation||"Sin puesto"),1),r.value.name?(o(),n("a",{key:0,onClick:e[10]||(e[10]=s=>Q("Employee",r.value.name,s)),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block mt-1",title:"Ver detalle del empleado"}," ID: "+l(r.value.name),1)):p("",!0),r.value.companies&&r.value.companies.length>0?(o(),n("div",Tt,[t("div",Vt,l(r.value.status_text),1),(o(!0),n($,null,A(r.value.companies,s=>(o(),n("div",{key:s,class:"truncate"},l(s),1))),128))])):(o(),n("div",Mt,l(r.value.status_text),1))])]),t("div",Nt,[r.value.status==="Alta"?(o(),n("div",Bt,l(r.value.status),1)):r.value.status==="Baja"?(o(),n("div",$t,l(r.value.status),1)):(o(),n("div",At,l(r.value.status),1))])])])])):(o(),n("div",Rt,[(o(!0),n($,null,A(q.value,s=>{var d,C;return o(),n("div",{key:s.name,onClick:N=>De(s),class:X(["p-3 cursor-pointer",{"bg-blue-50 border-r-2 border-blue-500":((d=r.value)==null?void 0:d.name)===s.name,"opacity-50":z.value&&((C=r.value)==null?void 0:C.name)===s.name}])},[t("div",zt,[t("div",Ht,[t("div",Ut,[t("div",Kt,[t("span",qt,l(ce(s.employee_name)),1)])]),t("div",Gt,[t("p",Qt,l(s.employee_name||"Sin nombre"),1),t("p",Wt,l(s.custom_dninie||s.name||"Sin DNI"),1),t("p",Xt,l(s.designation||"Sin puesto"),1),s.name?(o(),n("a",{key:0,onClick:N=>Q("Employee",s.name,N),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block mt-1",title:"Ver detalle del empleado"}," ID: "+l(s.name),9,Yt)):p("",!0),s.companies&&s.companies.length>0?(o(),n("div",Zt,[t("div",jt,l(s.status_text),1),(o(!0),n($,null,A(s.companies,N=>(o(),n("div",{key:N,class:"truncate"},l(N),1))),128))])):(o(),n("div",Ot,l(s.status_text),1))])]),t("div",es,[s.status==="Alta"?(o(),n("div",ts,l(s.status),1)):s.status==="Baja"?(o(),n("div",ss,l(s.status),1)):(o(),n("div",as,l(s.status),1))])])],10,Jt)}),128))]))])],2),t("div",os,[t("div",ns,[t("h3",ls,l(r.value?`Hojas de Contrataci\xF3n - ${r.value.employee_name}`:"Selecciona un empleado"),1),J.value&&r.value?(o(),n("button",{key:0,onClick:de,class:"flex items-center space-x-2 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 rounded-md"},[u(c(m),{name:"users",class:"h-4 w-4"}),e[12]||(e[12]=t("span",null,"Mostrar empleados",-1))])):p("",!0)]),t("div",is,[r.value?z.value?(o(),n("div",us,[u(c(m),{name:"loader",class:"h-8 w-8 animate-spin mx-auto mb-4"}),e[14]||(e[14]=t("p",{class:"text-sm"},"Cargando Hojas de Contrataci\xF3n...",-1)),e[15]||(e[15]=t("p",{class:"text-xs text-gray-400 mt-2"},"Por favor espera...",-1))])):!te.value||te.value.length===0?(o(),n("div",ds,[u(c(m),{name:"file-text",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e[16]||(e[16]=t("p",null,"No hay Hojas de Contrataci\xF3n para este empleado",-1)),Te.value?(o(),n("p",cs,"Intenta ajustar los filtros de provincia o empresa")):p("",!0)])):(o(),n("div",ms,[(o(!0),n($,null,A(te.value,s=>(o(),n("div",{key:s.name,class:"p-4 border-l-4 border-transparent"},[t("div",vs,[t("div",xs,[t("div",ps,[t("div",_s,[t("h4",fs,l(s.designation||"Sin t\xEDtulo"),1),s.name?(o(),n("a",{key:0,onClick:d=>Q("Job Offer",s.name,d),class:"text-sm text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block",title:"Ver detalle de la hoja de contrataci\xF3n"}," ID: "+l(s.name),9,ys)):(o(),n("p",hs,"ID: Sin ID"))]),s.workflow_state==="Alta"?(o(),n("div",gs,l(s.workflow_state),1)):s.workflow_state==="Baja"?(o(),n("div",bs,l(s.workflow_state),1)):s.workflow_state==="Pendiente"?(o(),n("div",ws,l(s.workflow_state),1)):s.workflow_state==="Cancelado"?(o(),n("div",ks,l(s.workflow_state),1)):(o(),n("div",Cs,l(s.workflow_state||"Sin estado"),1))]),t("div",Is,[t("div",Ls,[t("div",Ss,[u(c(m),{name:"calendar",class:"h-4 w-4 text-gray-400"}),e[17]||(e[17]=t("span",{class:"text-gray-600"},"Fecha de oferta:",-1)),t("span",Ds,l(s.offer_date?H(s.offer_date):"No especificada"),1)]),t("div",Ps,[u(c(m),{name:"building",class:"h-4 w-4 text-gray-400"}),e[18]||(e[18]=t("span",{class:"text-gray-600"},"Empresa:",-1)),t("span",Es,l(s.company||"No especificada"),1)]),s.custom_tipo_de_contrato?(o(),n("div",Fs,[u(c(m),{name:"file-text",class:"h-4 w-4 text-gray-400"}),e[19]||(e[19]=t("span",{class:"text-gray-600"},"Tipo de contrato:",-1)),t("span",Ts,l(s.custom_tipo_de_contrato),1)])):p("",!0)]),t("div",Vs,[s.custom_fecha_inicio?(o(),n("div",Ms,[u(c(m),{name:"play",class:"h-4 w-4 text-gray-400"}),e[20]||(e[20]=t("span",{class:"text-gray-600"},"Inicio:",-1)),t("span",Ns,l(H(s.custom_fecha_inicio)),1)])):p("",!0),s.custom_fecha_fin?(o(),n("div",Bs,[u(c(m),{name:"stop",class:"h-4 w-4 text-gray-400"}),e[21]||(e[21]=t("span",{class:"text-gray-600"},"Fin:",-1)),t("span",$s,l(H(s.custom_fecha_fin)),1)])):p("",!0),s.custom_estado_de_tramitacion?(o(),n("div",As,[u(c(m),{name:"settings",class:"h-4 w-4 text-gray-400"}),e[22]||(e[22]=t("span",{class:"text-gray-600"},"Tramitaci\xF3n:",-1)),t("span",Rs,l(s.custom_estado_de_tramitacion),1)])):p("",!0)])]),t("div",Js,[s.custom_firmado?(o(),n("div",zs,[u(c(m),{name:"check",class:"h-3 w-3"}),e[23]||(e[23]=t("span",null,"Firmado",-1))])):p("",!0),s.custom_contrato?(o(),n("div",Hs,[u(c(m),{name:"file",class:"h-3 w-3"}),e[24]||(e[24]=t("span",null,"Contrato",-1))])):p("",!0),s.custom_comun?(o(),n("div",Us,[u(c(m),{name:"users",class:"h-3 w-3"}),e[25]||(e[25]=t("span",null,"Com\xFAn",-1))])):p("",!0)])]),ee(s.name).length>0?(o(),n("div",Ks,[t("div",qs,[t("h6",Gs,[u(c(m),{name:"edit-3",class:"h-4 w-4 mr-2 text-blue-600"}),se(" Modificaciones RRHH ("+l(ee(s.name).length)+") ",1)]),t("button",{onClick:d=>Se(s.name),class:"text-sm text-blue-600 flex items-center font-medium"},[u(c(m),{name:M.value.has(s.name)?"chevron-up":"chevron-down",class:"h-4 w-4 mr-1"},null,8,["name"]),se(" "+l(M.value.has(s.name)?"Ocultar":"Mostrar"),1)],8,Qs)]),M.value.has(s.name)?(o(),n("div",Ws,[(o(!0),n($,null,A(ee(s.name),(d,C)=>(o(),n("div",{key:d.name,class:"bg-blue-50 rounded-lg p-3 border border-blue-200 relative"},[e[32]||(e[32]=t("div",{class:"absolute -left-6 top-3 w-3 h-3 bg-blue-400 rounded-full border-2 border-white"},null,-1)),t("div",Xs,[t("div",Ys,[t("h6",Zs,l(d.tipo_actualizacion||"Modificaci\xF3n"),1),d.name?(o(),n("a",{key:0,onClick:N=>Q("Modificaciones RRHH",d.name,N),class:"text-xs text-blue-600 hover:text-blue-800 hover:underline font-mono cursor-pointer inline-block",title:"Ver detalle de la modificaci\xF3n RRHH"}," ID: "+l(d.name),9,js)):(o(),n("p",Os,"ID: Sin ID"))]),d.workflow_state==="Alta"?(o(),n("div",ea,l(d.workflow_state),1)):d.workflow_state==="Baja"?(o(),n("div",ta,l(d.workflow_state),1)):d.workflow_state==="Pendiente"?(o(),n("div",sa,l(d.workflow_state),1)):(o(),n("div",aa,l(d.workflow_state||"Sin estado"),1))]),t("div",oa,[d.start_date?(o(),n("div",na,[u(c(m),{name:"play",class:"h-4 w-4 text-gray-400"}),e[26]||(e[26]=t("span",{class:"text-gray-600"},"Inicio:",-1)),t("span",la,l(H(d.start_date)),1)])):p("",!0),d.end_date?(o(),n("div",ia,[u(c(m),{name:"stop",class:"h-4 w-4 text-gray-400"}),e[27]||(e[27]=t("span",{class:"text-gray-600"},"Fin:",-1)),t("span",ra,l(H(d.end_date)),1)])):p("",!0),d.custom_tipo_de_contrato?(o(),n("div",ua,[u(c(m),{name:"file-text",class:"h-4 w-4 text-gray-400"}),e[28]||(e[28]=t("span",{class:"text-gray-600"},"Tipo:",-1)),t("span",da,l(d.custom_tipo_de_contrato),1)])):p("",!0),d.custom_provincia?(o(),n("div",ca,[u(c(m),{name:"map-pin",class:"h-4 w-4 text-gray-400"}),e[29]||(e[29]=t("span",{class:"text-gray-600"},"Provincia:",-1)),t("span",ma,l(d.custom_provincia),1)])):p("",!0)]),t("div",va,[d.custom_firmado?(o(),n("div",xa,[u(c(m),{name:"check",class:"h-3 w-3"}),e[30]||(e[30]=t("span",{class:"text-xs"},"Firmado",-1))])):p("",!0),d.custom_comun?(o(),n("div",pa,[u(c(m),{name:"users",class:"h-3 w-3"}),e[31]||(e[31]=t("span",{class:"text-xs"},"Com\xFAn",-1))])):p("",!0)])]))),128))])):p("",!0)])):p("",!0)])]))),128))])):(o(),n("div",rs,[u(c(m),{name:"user",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e[13]||(e[13]=t("p",null,"Selecciona un empleado para ver sus Hojas de Contrataci\xF3n",-1))]))])])])])}}};export{ha as default};
