var F=(R,A,b)=>new Promise((w,j)=>{var k=l=>{try{$(b.next(l))}catch(h){j(h)}},V=l=>{try{$(b.throw(l))}catch(h){j(h)}},$=l=>l.done?w(l.value):Promise.resolve(l.value).then(k,V);$((b=b.apply(R,A)).next())});import{r as g,q as J,K as T,a8 as X,o as n,c as _,b as e,d as o,w as r,n as M,u as a,U as y,s as D,f as C,W as Z,Y as ee,F as I,E as S,Q as E,t as i,aa as H,G as te,_ as u,C as v,e as f,S as U,ab as se}from"./vendor.13deb96d.js";const ae={class:"flex-1 p-6 bg-gray-50"},oe={class:"mb-6"},le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ie={class:"flex items-center"},ne={class:"flex-shrink-0"},re={class:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"},de={class:"ml-4"},ce={class:"text-2xl font-semibold text-gray-900"},_e={class:"text-xs text-gray-500 mt-1"},ue={class:"flex items-center"},me={class:"flex-shrink-0"},fe={class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},ve={class:"ml-4"},xe={class:"text-2xl font-semibold text-gray-900"},pe={class:"flex items-center"},ge={class:"flex-shrink-0"},ye={class:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center"},he={class:"ml-4"},be={class:"text-2xl font-semibold text-gray-900"},we={class:"flex items-center"},je={class:"flex-shrink-0"},ke={class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},Ce={class:"ml-4"},Ee={class:"text-2xl font-semibold text-gray-900"},Ae={key:0,class:"mb-6"},Ve={class:"flex items-center justify-between mb-4"},$e={class:"flex items-center space-x-2"},De={class:"text-lg font-semibold text-gray-900"},Ie={class:"max-h-96 overflow-y-auto space-y-2 pr-2"},Se={class:"flex-1"},Be={class:"flex items-center space-x-2 flex-wrap"},ze={class:"font-medium text-gray-900"},Fe={class:"mt-1 text-sm text-gray-600"},Me={class:"font-semibold text-red-600"},Ne={class:"flex items-center justify-between mb-4"},He={class:"flex items-center space-x-2"},Re={class:"text-lg font-semibold text-gray-900"},Oe={class:"max-h-96 overflow-y-auto space-y-2 pr-2"},Pe={class:"flex-1"},Je={class:"flex items-center space-x-2 flex-wrap"},Te={class:"font-medium text-gray-900"},Ue={class:"mt-1 text-sm text-gray-600"},Le={class:"font-semibold"},Qe={class:"font-semibold text-orange-600"},qe={class:"flex items-center justify-between mb-4"},Ge={class:"flex items-center space-x-2"},Ke={class:"text-lg font-semibold text-gray-900"},We={class:"max-h-96 overflow-y-auto space-y-2 pr-2"},Ye={class:"flex-1"},Xe={class:"flex items-center space-x-2 flex-wrap"},Ze={class:"font-medium text-gray-900"},et={class:"mt-1 text-sm text-gray-600"},tt={class:"font-semibold"},st={class:"font-semibold text-yellow-600"},at={class:"flex items-center justify-between mb-4"},ot={class:"flex items-center space-x-2"},lt={class:"text-lg font-semibold text-gray-900"},it={class:"max-h-96 overflow-y-auto space-y-2 pr-2"},nt={class:"flex-1"},rt={class:"flex items-center space-x-2 flex-wrap"},dt={class:"font-medium text-gray-900"},ct={class:"mt-1 text-sm text-gray-600"},_t={class:"font-semibold text-purple-600"},ut={class:"bg-white rounded-lg shadow p-4 mb-6"},mt={class:"flex items-center space-x-4"},ft={class:"flex-1"},vt=["value"],xt={class:"bg-white rounded-lg shadow overflow-hidden"},pt={class:"overflow-x-auto"},gt={class:"min-w-full divide-y divide-gray-200"},yt={class:"bg-white divide-y divide-gray-200"},ht={key:0,class:"text-center"},bt={key:1,class:"text-center"},wt={class:"px-6 py-4 whitespace-nowrap"},jt={class:"flex items-center"},kt={class:"flex-shrink-0 h-10 w-10"},Ct=["src","alt"],Et={key:1,class:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center"},At={class:"text-sm font-medium text-gray-700"},Vt={class:"ml-4"},$t={class:"text-sm font-medium text-gray-900"},Dt={class:"text-sm text-gray-500"},It={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Bt={class:"px-6 py-4 whitespace-nowrap"},zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ft={class:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between"},Mt={class:"text-sm text-gray-500"},N=6,Rt={__name:"Empleados",setup(R){const A=g([]),b=g([]),w=g(!1),j=g(""),k=g(""),V=g(0),$=g(!1),l=g({employees_missing_data:[],job_offers_expired_active:[],modificaciones_expired_active:[],job_offers_baja_modificaciones_alta:[],summary:{total_employees:0,employees_missing_data_count:0,job_offers_expired_active_count:0,modificaciones_expired_active_count:0,job_offers_baja_modificaciones_alta_count:0}}),h=g(!1),d=g(null),L=J(()=>{var c,t,p,m;return(((c=l.value.summary)==null?void 0:c.employees_missing_data_count)||0)+(((t=l.value.summary)==null?void 0:t.job_offers_expired_active_count)||0)+(((p=l.value.summary)==null?void 0:p.modificaciones_expired_active_count)||0)+(((m=l.value.summary)==null?void 0:m.job_offers_baja_modificaciones_alta_count)||0)}),Q=()=>{var c,t,p,m;switch(d.value){case"missing_data":return((c=l.value.employees_missing_data)==null?void 0:c.length)||0;case"job_offers_expired":return((t=l.value.job_offers_expired_active)==null?void 0:t.length)||0;case"modificaciones_expired":return((p=l.value.modificaciones_expired_active)==null?void 0:p.length)||0;case"inconsistencies":return((m=l.value.job_offers_baja_modificaciones_alta)==null?void 0:m.length)||0;default:return 0}},q=()=>F(this,null,function*(){h.value=!0;try{const c=yield H("portal_rrhh.portal_rrhh.employee_data.get_rrhh_dashboard_stats");c&&(l.value=c)}catch(c){console.error("Error loading dashboard stats:",c)}finally{h.value=!1}}),B=(c="init")=>F(this,null,function*(){let t=V.value;c==="next"?t+=N:c==="prev"?t=Math.max(0,t-N):c==="init"&&(t=0),w.value=!0;const p={status:"Active"};k.value&&(p.department=k.value);try{const m=yield H("portal_rrhh.portal_rrhh.employee_data.get_employees_list",{filters:p,limit:N,offset:t,search_term:j.value});if(m&&m.employees){const z=m.employees.map(x=>({id:x.name,nombre:x.employee_name,email:x.email,departamento:x.department||"Sin departamento",cargo:x.designation||"Sin cargo",estado:x.status==="Active"?"Activo":"Inactivo",fechaIngreso:x.date_of_joining_formatted||"N/A",avatar:x.avatar}));A.value=z,$.value=m.has_more,V.value=t}}catch(m){console.error("Error loading employees:",m)}finally{w.value=!1}}),G=()=>{B("next")},K=()=>{B("prev")},W=J(()=>Math.floor(V.value/N)+1),Y=()=>F(this,null,function*(){try{const c=yield H("portal_rrhh.portal_rrhh.employee_data.get_departments_list");c&&(b.value=c)}catch(c){console.error("Error loading departments:",c)}});return T(k,()=>{B("init")}),T(j,se(()=>{B("init")},300)),X(()=>{B(),Y(),q()}),(c,t)=>{var m,z,x,O;const p=te("Input");return n(),_("div",ae,[e("div",oe,[t[28]||(t[28]=e("div",{class:"mb-4"},[e("h2",{class:"text-2xl font-bold text-gray-900"},"Dashboard RRHH"),e("p",{class:"text-sm text-gray-600 mt-1"},"Estad\xEDsticas e indicadores importantes del departamento")],-1)),e("div",le,[o(a(y),{class:M(["p-4 cursor-pointer hover:shadow-lg transition-shadow",{"ring-2 ring-red-500":d.value==="missing_data"}]),onClick:t[0]||(t[0]=s=>d.value="missing_data")},{default:r(()=>{var s,P;return[e("div",ie,[e("div",ne,[e("div",re,[o(a(u),{name:"alert-triangle",class:"h-6 w-6 text-red-600"})])]),e("div",de,[t[10]||(t[10]=e("p",{class:"text-xs font-medium text-gray-500"},"Empleados sin Datos",-1)),e("p",ce,i(((s=l.value.summary)==null?void 0:s.employees_missing_data_count)||0),1),e("p",_e," de "+i(((P=l.value.summary)==null?void 0:P.total_employees)||0)+" empleados ",1)])])]}),_:1},8,["class"]),o(a(y),{class:M(["p-4 cursor-pointer hover:shadow-lg transition-shadow",{"ring-2 ring-orange-500":d.value==="job_offers_expired"}]),onClick:t[1]||(t[1]=s=>d.value="job_offers_expired")},{default:r(()=>{var s;return[e("div",ue,[e("div",me,[e("div",fe,[o(a(u),{name:"file-text",class:"h-6 w-6 text-orange-600"})])]),e("div",ve,[t[11]||(t[11]=e("p",{class:"text-xs font-medium text-gray-500"},"Job Offers Vencidos",-1)),e("p",xe,i(((s=l.value.summary)==null?void 0:s.job_offers_expired_active_count)||0),1),t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 mt-1"},"Estado Alta con fecha vencida",-1))])])]}),_:1},8,["class"]),o(a(y),{class:M(["p-4 cursor-pointer hover:shadow-lg transition-shadow",{"ring-2 ring-yellow-500":d.value==="modificaciones_expired"}]),onClick:t[2]||(t[2]=s=>d.value="modificaciones_expired")},{default:r(()=>{var s;return[e("div",pe,[e("div",ge,[e("div",ye,[o(a(u),{name:"edit",class:"h-6 w-6 text-yellow-600"})])]),e("div",he,[t[13]||(t[13]=e("p",{class:"text-xs font-medium text-gray-500"},"Modificaciones Vencidas",-1)),e("p",be,i(((s=l.value.summary)==null?void 0:s.modificaciones_expired_active_count)||0),1),t[14]||(t[14]=e("p",{class:"text-xs text-gray-500 mt-1"},"Estado Alta con fecha vencida",-1))])])]}),_:1},8,["class"]),o(a(y),{class:M(["p-4 cursor-pointer hover:shadow-lg transition-shadow",{"ring-2 ring-purple-500":d.value==="inconsistencies"}]),onClick:t[3]||(t[3]=s=>d.value="inconsistencies")},{default:r(()=>{var s;return[e("div",we,[e("div",je,[e("div",ke,[o(a(u),{name:"alert-circle",class:"h-6 w-6 text-purple-600"})])]),e("div",Ce,[t[15]||(t[15]=e("p",{class:"text-xs font-medium text-gray-500"},"Incoherencias",-1)),e("p",Ee,i(((s=l.value.summary)==null?void 0:s.job_offers_baja_modificaciones_alta_count)||0),1),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500 mt-1"},"Job Offer Baja / Mod. Alta",-1))])])]}),_:1},8,["class"])]),d.value?(n(),_("div",Ae,[d.value==="missing_data"&&((m=l.value.employees_missing_data)==null?void 0:m.length)>0?(n(),D(a(y),{key:0,class:"p-4"},{default:r(()=>[e("div",Ve,[e("div",$e,[o(a(u),{name:"user-x",class:"h-5 w-5 text-red-600"}),e("h3",De," Empleados con Datos Faltantes ("+i(l.value.employees_missing_data.length)+") ",1)]),o(a(E),{variant:"ghost",size:"sm",onClick:t[4]||(t[4]=s=>d.value=null)},{default:r(()=>[o(a(u),{name:"x",class:"h-4"})]),_:1})]),e("div",Ie,[(n(!0),_(I,null,S(l.value.employees_missing_data,s=>(n(),_("div",{key:s.employee_name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",Se,[e("div",Be,[e("span",ze,i(s.employee_display_name),1),o(a(v),{label:s.department,variant:"subtle"},null,8,["label"]),o(a(v),{label:s.designation,variant:"subtle"},null,8,["label"])]),e("div",Fe,[t[17]||(t[17]=f(" Faltan: ",-1)),e("span",Me,i(s.missing_fields.join(", ")),1)])]),o(a(v),{label:`${s.missing_count} campos`,variant:"error"},null,8,["label"])]))),128))])]),_:1})):C("",!0),d.value==="job_offers_expired"&&((z=l.value.job_offers_expired_active)==null?void 0:z.length)>0?(n(),D(a(y),{key:1,class:"p-4"},{default:r(()=>[e("div",Ne,[e("div",He,[o(a(u),{name:"file-text",class:"h-5 w-5 text-orange-600"}),e("h3",Re," Job Offers Vencidos en Estado Alta ("+i(l.value.job_offers_expired_active.length)+") ",1)]),o(a(E),{variant:"ghost",size:"sm",onClick:t[5]||(t[5]=s=>d.value=null)},{default:r(()=>[o(a(u),{name:"x",class:"h-4"})]),_:1})]),e("div",Oe,[(n(!0),_(I,null,S(l.value.job_offers_expired_active,s=>(n(),_("div",{key:s.job_offer_name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",Pe,[e("div",Je,[e("span",Te,i(s.job_offer_name),1),o(a(v),{label:s.applicant_name,variant:"subtle"},null,8,["label"]),o(a(v),{label:s.designation,variant:"subtle"},null,8,["label"])]),e("div",Ue,[t[18]||(t[18]=f(" Fecha fin: ",-1)),e("span",Le,i(s.fecha_fin),1),t[19]||(t[19]=f(" | Vencido hace: ",-1)),e("span",Qe,i(s.dias_vencido)+" d\xEDas",1)])]),o(a(v),{label:`${s.dias_vencido} d\xEDas`,variant:"warning"},null,8,["label"])]))),128))])]),_:1})):C("",!0),d.value==="modificaciones_expired"&&((x=l.value.modificaciones_expired_active)==null?void 0:x.length)>0?(n(),D(a(y),{key:2,class:"p-4"},{default:r(()=>[e("div",qe,[e("div",Ge,[o(a(u),{name:"edit",class:"h-5 w-5 text-yellow-600"}),e("h3",Ke," Modificaciones RRHH Vencidas en Estado Alta ("+i(l.value.modificaciones_expired_active.length)+") ",1)]),o(a(E),{variant:"ghost",size:"sm",onClick:t[6]||(t[6]=s=>d.value=null)},{default:r(()=>[o(a(u),{name:"x",class:"h-4"})]),_:1})]),e("div",We,[(n(!0),_(I,null,S(l.value.modificaciones_expired_active,s=>(n(),_("div",{key:s.modificacion_name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",Ye,[e("div",Xe,[e("span",Ze,i(s.modificacion_name),1),o(a(v),{label:s.employee_display_name,variant:"subtle"},null,8,["label"]),o(a(v),{label:s.tipo_actualizacion,variant:"subtle"},null,8,["label"])]),e("div",et,[t[20]||(t[20]=f(" Fecha fin: ",-1)),e("span",tt,i(s.end_date),1),t[21]||(t[21]=f(" | Vencido hace: ",-1)),e("span",st,i(s.dias_vencido)+" d\xEDas",1)])]),o(a(v),{label:`${s.dias_vencido} d\xEDas`,variant:"warning"},null,8,["label"])]))),128))])]),_:1})):C("",!0),d.value==="inconsistencies"&&((O=l.value.job_offers_baja_modificaciones_alta)==null?void 0:O.length)>0?(n(),D(a(y),{key:3,class:"p-4"},{default:r(()=>[e("div",at,[e("div",ot,[o(a(u),{name:"alert-circle",class:"h-5 w-5 text-purple-600"}),e("h3",lt," Incoherencias Detectadas ("+i(l.value.job_offers_baja_modificaciones_alta.length)+") ",1)]),o(a(E),{variant:"ghost",size:"sm",onClick:t[7]||(t[7]=s=>d.value=null)},{default:r(()=>[o(a(u),{name:"x",class:"h-4"})]),_:1})]),e("div",it,[(n(!0),_(I,null,S(l.value.job_offers_baja_modificaciones_alta,s=>(n(),_("div",{key:s.job_offer_name,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",nt,[e("div",rt,[e("span",dt,i(s.job_offer_name),1),o(a(v),{label:s.job_offer_state,variant:"error"},null,8,["label"]),o(a(v),{label:s.employee_display_name,variant:"subtle"},null,8,["label"])]),e("div",ct,[t[22]||(t[22]=f(" Job Offer en ",-1)),t[23]||(t[23]=e("span",{class:"font-semibold text-red-600"},"Baja",-1)),t[24]||(t[24]=f(" pero tiene ",-1)),e("span",_t,i(s.modificaciones_count)+" modificaci\xF3n(es)",1),t[25]||(t[25]=f(" en estado Alta ",-1))])]),o(a(v),{label:`${s.modificaciones_count} mods`,variant:"info"},null,8,["label"])]))),128))])]),_:1})):C("",!0),d.value&&Q()===0&&!h.value?(n(),D(a(y),{key:4,class:"p-4"},{default:r(()=>[o(a(U),{variant:"info",title:"Sin problemas"},{default:r(()=>[...t[26]||(t[26]=[f(" No se encontraron problemas para este indicador. ",-1)])]),_:1})]),_:1})):C("",!0)])):C("",!0),L.value===0&&!h.value&&!d.value?(n(),D(a(y),{key:1,class:"p-4 mb-6"},{default:r(()=>[o(a(U),{variant:"success",title:"\xA1Todo en orden!"},{default:r(()=>[...t[27]||(t[27]=[f(" No se han detectado problemas en los datos del departamento de RRHH. ",-1)])]),_:1})]),_:1})):C("",!0)]),e("div",ut,[e("div",mt,[e("div",ft,[o(p,{modelValue:j.value,"onUpdate:modelValue":t[8]||(t[8]=s=>j.value=s),type:"text",placeholder:"Buscar empleados...",variant:"outline",size:"sm"},{prefix:r(()=>[o(a(u),{name:"search",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),Z(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>k.value=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[29]||(t[29]=e("option",{value:""},"Todos los departamentos",-1)),(n(!0),_(I,null,S(b.value,s=>(n(),_("option",{key:s.name,value:s.department_name},i(s.department_name),9,vt))),128))],512),[[ee,k.value]]),o(a(E),{variant:"outline",size:"sm"},{prefix:r(()=>[o(a(u),{name:"filter",class:"h-4"})]),default:r(()=>[t[30]||(t[30]=f(" Filtrar ",-1))]),_:1})])]),e("div",xt,[e("div",pt,[e("table",gt,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Empleado "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Departamento "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cargo "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha de Ingreso ")])],-1)),e("tbody",yt,[w.value&&A.value.length===0?(n(),_("tr",ht,[...t[31]||(t[31]=[e("td",{colspan:"6",class:"px-6 py-4"},[e("div",{class:"flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e("span",{class:"ml-2"},"Cargando empleados...")])],-1)])])):A.value.length===0?(n(),_("tr",bt,[...t[32]||(t[32]=[e("td",{colspan:"6",class:"px-6 py-4 text-gray-500"}," No se encontraron empleados ",-1)])])):(n(!0),_(I,{key:2},S(A.value,s=>(n(),_("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",wt,[e("div",jt,[e("div",kt,[s.avatar?(n(),_("img",{key:0,src:s.avatar,alt:s.nombre,class:"h-10 w-10 rounded-full object-cover"},null,8,Ct)):(n(),_("div",Et,[e("span",At,i(s.nombre.charAt(0)),1)]))]),e("div",Vt,[e("div",$t,i(s.nombre),1),e("div",Dt,i(s.email),1)])])]),e("td",It,i(s.departamento),1),e("td",St,i(s.cargo),1),e("td",Bt,[o(a(v),{theme:s.estado==="Activo"?"green":"red",variant:"subtle"},{default:r(()=>[f(i(s.estado),1)]),_:2},1032,["theme"])]),e("td",zt,i(s.fechaIngreso),1)]))),128))])])]),e("div",Ft,[o(a(E),{onClick:K,disabled:w.value||V.value===0,variant:"outline"},{prefix:r(()=>[o(a(u),{name:"chevron-left",class:"h-4"})]),default:r(()=>[t[34]||(t[34]=f(" Anterior ",-1))]),_:1},8,["disabled"]),e("span",Mt," P\xE1gina "+i(W.value),1),o(a(E),{onClick:G,disabled:w.value||!$.value,variant:"outline"},{suffix:r(()=>[o(a(u),{name:"chevron-right",class:"h-4"})]),default:r(()=>[t[35]||(t[35]=f(" Siguiente ",-1))]),_:1},8,["disabled"])])])])}}};export{Rt as default};
