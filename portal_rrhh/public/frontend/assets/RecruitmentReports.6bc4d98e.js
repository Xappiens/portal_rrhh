var d=(r,e,u)=>new Promise((p,s)=>{var a=m=>{try{b(u.next(m))}catch(y){s(y)}},i=m=>{try{b(u.throw(m))}catch(y){s(y)}},b=m=>m.done?p(m.value):Promise.resolve(m.value).then(a,i);b((u=u.apply(r,e)).next())});import{q as v,Z as h,o,c as n,b as t,e as c,$ as k,a2 as w,F as x,x as _,f as g,t as l,a1 as f,s as R,n as O}from"./vendor.b02fecb1.js";const C={name:"RecruitmentReports",props:{jobOpening:String},data(){return{report:null,isGenerating:!1,error:null,formJobOpening:"",pollingAttempts:0,pollingInterval:null,jobOpeningData:null,loadingJobOpening:!1,jobOpeningsList:[],loadingJobOpenings:!1}},computed:{effectiveJobOpening(){return this.formJobOpening||this.jobOpening||this.$route.params.jobOpening||this.$route.query.opening||""},canGenerate(){return this.formJobOpening}},mounted(){this.loadJobOpeningsList(),this.$route.query.reportId?this.loadReportById(this.$route.query.reportId):this.effectiveJobOpening&&this.loadJobOpeningData()},watch:{effectiveJobOpening(r){r&&!this.jobOpeningData&&this.loadJobOpeningData()}},beforeUnmount(){this.pollingInterval&&clearTimeout(this.pollingInterval)},methods:{clearInputs(){this.formJobOpening="",this.report=null,this.error=null,this.isGenerating=!1,this.jobOpeningData=null},clearError(){this.error=null},cancelGeneration(){this.pollingInterval&&(clearTimeout(this.pollingInterval),this.pollingInterval=null),this.isGenerating=!1,this.pollingAttempts=0,this.error="Report generation cancelled"},generateReport(){return d(this,null,function*(){if(!this.effectiveJobOpening){this.error="Please select a Job Opening";return}yield this.loadJobOpeningData(),this.isGenerating=!0,this.error=null,this.pollingAttempts=0;try{const r=yield h("ai_hr_recruitment.ai_hr_recruitment.api.recruitment_reports.generate_recruitment_report",{job_opening:this.effectiveJobOpening});r&&r.status?r.status==="processing"||r.status==="exists"?(yield this.loadReport(r.report_id),this.report&&this.report.status==="Generating"&&(this.isGenerating=!0,this.pollReportStatus(r.report_id))):r.status==="error"&&(this.error=r.message||"Report generation failed",this.isGenerating=!1):(this.error="Unexpected response from server",this.isGenerating=!1)}catch(r){console.error("Error generating report:",r),this.error=r.message||"Failed to generate report. Please check your connection and try again.",this.isGenerating=!1}})},pollReportStatus(r){return d(this,null,function*(){const e=60;this.pollingAttempts=0,console.log("Starting polling for report:",r),this.isGenerating=!0;const u=()=>d(this,null,function*(){try{if(this.pollingAttempts>=e){console.log("Polling stopped - reached max attempts"),this.report&&this.report.status==="Generating"&&(this.error=`Report still processing after ${e*2} seconds. The background workers might not be running. Please check if 'bench start' is running, or click "Reload" to check the status again.`),this.isGenerating=!1,this.pollingInterval=null;return}console.log(`Polling attempt ${this.pollingAttempts+1}/${e} for report ${r}`);const p=yield h("ai_hr_recruitment.ai_hr_recruitment.api.recruitment_reports.get_recruitment_report",{report_id:r});if(this.pollingAttempts++,console.log("Report status:",p?p.status:"null"),console.log("Full report data:",p),p)if(this.report=p,console.log("Updated report in UI. Status:",p.status),console.log("Report has top_candidates:",p.top_candidates?p.top_candidates.length:0),p.status==="Completed"){console.log("\u2705 Report completed!",p),console.log("Report summary length:",p.ai_analysis_summary?p.ai_analysis_summary.length:0),console.log("Top candidates count:",p.top_candidates?p.top_candidates.length:0),this.isGenerating=!1,this.pollingInterval=null,this.pollingAttempts=0,this.error=null;return}else if(p.status==="Failed"){console.log("\u274C Report failed"),this.error=p.ai_analysis_summary||"Report generation failed",this.isGenerating=!1,this.pollingInterval=null;return}else if(p.status==="Generating"||p.status==="Draft"){console.log(`\u23F3 Still generating... (attempt ${this.pollingAttempts}/${e})`),this.isGenerating=!0,this.pollingAttempts<e?this.pollingInterval=setTimeout(u,2e3):(this.error=`Report still processing after ${e*2} seconds. The background workers might not be running. Please check if 'bench start' is running, or click "Reload" to check the status again.`,this.isGenerating=!1,this.pollingInterval=null);return}else{console.log("\u26A0\uFE0F Unknown status:",p.status),this.pollingAttempts<e?(this.isGenerating=!0,this.pollingInterval=setTimeout(u,2e3)):(this.error=`Unknown report status: ${p.status}. Showing current data anyway.`,this.isGenerating=!1,this.pollingInterval=null);return}else console.log("\u26A0\uFE0F No report data returned"),this.pollingAttempts<e?(this.isGenerating=!0,this.pollingInterval=setTimeout(u,2e3)):(this.error="Could not retrieve report data after multiple attempts",this.isGenerating=!1,this.pollingInterval=null)}catch(p){console.error("\u274C Error polling:",p),this.pollingAttempts++,this.pollingAttempts<e?(console.log(`Retrying after error (attempt ${this.pollingAttempts}/${e})...`),this.isGenerating=!0,this.pollingInterval=setTimeout(u,3e3)):(this.error="Error checking report status: "+(p.message||"Unknown error"),this.isGenerating=!1,this.pollingInterval=null)}});u()})},loadReport(r){return d(this,null,function*(){try{this.error=null,console.log("Loading report:",r);const e=yield h("ai_hr_recruitment.ai_hr_recruitment.api.recruitment_reports.get_recruitment_report",{report_id:r});console.log("Loaded report:",e),console.log("Report status:",e?e.status:"null"),console.log("Report data:",JSON.stringify(e,null,2)),e?(this.report=e,e.job_opening&&(this.formJobOpening=e.job_opening,this.loadJobOpeningData()),e.status==="Generating"?(console.log("Report still generating, starting polling..."),this.isGenerating=!0,this.pollingInterval&&(clearTimeout(this.pollingInterval),this.pollingInterval=null),this.pollReportStatus(r)):e.status==="Completed"?(console.log("\u2705 Report already completed, showing results"),this.isGenerating=!1,this.error=null):e.status==="Failed"?(console.log("\u274C Report failed"),this.isGenerating=!1,this.error="Report generation failed"):(console.log("\u26A0\uFE0F Unknown report status:",e.status),this.isGenerating=!1)):(this.error="Report not found",this.isGenerating=!1)}catch(e){console.error("Error loading report:",e),this.error="Failed to load report: "+(e.message||"Unknown error"),this.isGenerating=!1}})},loadReportById(r=null){return d(this,null,function*(){if(!r){this.error="Please provide a Report ID";return}this.isGenerating=!0,this.error=null,yield this.loadReport(r)})},reloadReport(){return d(this,null,function*(){this.report&&this.report.name?(console.log("Reloading report:",this.report.name),this.isGenerating=!0,this.error=null,yield this.loadReport(this.report.name)):console.log("No report to reload")})},triggerProcessing(){return d(this,null,function*(){if(!this.report||!this.report.name){this.error="No report available to trigger processing";return}if(this.report.status!=="Generating"){this.error="Report is not in Generating status";return}try{this.error=null;const r=yield h("ai_hr_recruitment.ai_hr_recruitment.api.recruitment_reports.trigger_report_processing",{report_id:this.report.name});console.log("Triggered processing:",r),this.isGenerating=!0,this.pollReportStatus(this.report.name)}catch(r){console.error("Error triggering processing:",r),this.error="Failed to trigger processing: "+(r.message||"Unknown error")}})},formatDate(r){if(!r)return"N/A";try{return new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return r}},loadJobOpeningData(){return d(this,null,function*(){if(!!this.effectiveJobOpening){this.loadingJobOpening=!0;try{const r=yield h("frappe.client.get",{doctype:"Job Opening",name:this.effectiveJobOpening});this.jobOpeningData=r,console.log("Loaded job opening data:",r)}catch(r){console.error("Error loading job opening data:",r),this.jobOpeningData=null}finally{this.loadingJobOpening=!1}}})},loadJobOpeningsList(){return d(this,null,function*(){this.loadingJobOpenings=!0;try{const r=yield h("frappe.client.get_list",{doctype:"Job Opening",fields:["name","job_title","designation","status","company"],limit_page_length:1e3,order_by:"modified desc"});this.jobOpeningsList=r||[],console.log("Loaded job openings list:",this.jobOpeningsList.length)}catch(r){console.error("Error loading job openings list:",r),this.jobOpeningsList=[]}finally{this.loadingJobOpenings=!1}})},onJobOpeningChange(){return d(this,null,function*(){this.formJobOpening?yield this.loadJobOpeningData():this.jobOpeningData=null})},getRecommendationClass(r){return{Hire:"bg-green-100 text-green-800",Consider:"bg-blue-100 text-blue-800","Additional Interview":"bg-yellow-100 text-yellow-800",Reject:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"},viewCVAnalysis(r){this.$router.push({name:"CVAnalysis",query:{analysisId:r}})},exportToPDF(){return d(this,null,function*(){if(!this.report||!this.report.name){this.error="No report available to export";return}if(this.report.status!=="Completed"){this.error="Report must be completed before exporting";return}try{const r=`/api/method/ai_hr_recruitment.ai_hr_recruitment.api.recruitment_reports.export_report_to_pdf?report_id=${this.report.name}`,e=document.createElement("a");e.href=r,e.download=`recruitment_report_${this.report.name}.pdf`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(r){console.error("Error exporting PDF:",r),this.error="Failed to export PDF: "+(r.message||"Unknown error")}})},exportToExcel(){return d(this,null,function*(){if(!this.report||!this.report.name){this.error="No report available to export";return}if(this.report.status!=="Completed"){this.error="Report must be completed before exporting";return}try{const r=`/api/method/ai_hr_recruitment.ai_hr_recruitment.api.recruitment_reports.export_report_to_excel?report_id=${this.report.name}`,e=document.createElement("a");e.href=r,e.download=`recruitment_report_${this.report.name}.csv`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(r){console.error("Error exporting Excel:",r),this.error="Failed to export Excel: "+(r.message||"Unknown error")}})}}},G={class:"flex-1 p-6 bg-gray-50 overflow-y-auto"},J={key:0,class:"mb-6"},j={class:"bg-white rounded-lg shadow p-6"},D={class:"mb-6"},A=["disabled"],I=["value"],T={key:0,class:"text-xs text-gray-500 mt-1"},E=["disabled"],S={key:0},N={key:1},L={key:1,class:"mb-6"},P={class:"bg-white rounded-lg shadow p-6 mb-4"},F={class:"flex items-center gap-3 mb-4 pb-3 border-b border-gray-200"},U={class:"text-xs text-gray-500 font-mono ml-auto"},V={key:0,class:"space-y-2"},q={class:"text-sm"},M={class:"text-gray-900"},z={key:0,class:"text-sm"},H={class:"text-gray-900"},B={key:1,class:"text-sm"},Y={class:"text-gray-900"},Z={key:2,class:"text-sm"},K={class:"text-gray-900"},Q={key:1,class:"text-sm text-gray-500 italic"},W={class:"flex gap-3 flex-wrap"},X=["disabled"],$={key:0},ee={key:1},te={key:2,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center justify-between"},se={class:"flex items-center gap-3"},re={class:"text-red-700"},oe={key:3,class:"bg-white rounded-lg shadow p-8 text-center mb-6"},ne={class:"mb-4"},ie={class:"text-sm text-gray-600 mb-2"},le={class:"w-full bg-gray-200 rounded-full h-2"},ae={key:4,class:"space-y-6"},pe={class:"bg-white rounded-lg shadow p-6"},ge={class:"flex justify-between items-center mb-4 pb-4 border-b border-gray-200"},de={key:0,class:"text-xl font-semibold text-gray-900"},ue={key:1,class:"text-xl font-semibold text-gray-900"},me={key:2,class:"text-xl font-semibold text-gray-900"},ce={key:3,class:"text-xl font-semibold text-gray-900"},be={key:4,class:"text-sm text-gray-500"},he={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},ye={class:"bg-gray-50 rounded-lg p-4"},xe={class:"text-sm font-mono text-gray-900"},_e={class:"bg-gray-50 rounded-lg p-4"},fe={class:"text-3xl font-bold text-gray-900"},ve={class:"bg-gray-50 rounded-lg p-4"},ke={class:"text-3xl font-bold text-gray-900"},we={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6"},Re={class:"text-yellow-800"},Oe={class:"mb-2"},Ce={class:"font-mono"},Ge={class:"mb-2"},Je={key:0,class:"mb-2"},je={key:1,class:"bg-gray-50 rounded-lg p-6 mb-6"},De=["innerHTML"],Ae={key:1,class:"text-gray-500 italic"},Ie={key:2,class:"text-gray-500 italic"},Te={key:2,class:"bg-gray-50 rounded-lg p-6 mb-6"},Ee={class:"overflow-x-auto"},Se={class:"min-w-full divide-y divide-gray-200"},Ne={class:"bg-white divide-y divide-gray-200"},Le={class:"px-4 py-3 text-sm font-medium text-gray-900"},Pe={class:"px-4 py-3 text-sm text-gray-900"},Fe={class:"px-4 py-3 text-sm text-gray-900"},Ue={class:"flex items-center"},Ve={class:"font-semibold"},qe={class:"ml-2 w-16 bg-gray-200 rounded-full h-2"},Me={class:"px-4 py-3 text-sm"},ze={class:"px-4 py-3 text-sm text-gray-600 max-w-xs"},He={class:"px-4 py-3 text-sm text-gray-600 max-w-xs"},Be={class:"px-4 py-3 text-sm"},Ye=["onClick"],Ze={key:1,class:"text-gray-400 text-xs"},Ke={key:3,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6"},Qe={key:4,class:"bg-gray-50 rounded-lg p-6 mb-6"},We=["innerHTML"],Xe={key:1,class:"text-gray-500 italic"},$e={key:5,class:"bg-gray-50 rounded-lg p-6 mb-6"},et={key:0,class:"text-gray-700 leading-relaxed whitespace-pre-wrap font-mono text-sm bg-white p-4 rounded border"},tt={key:1,class:"text-gray-500 italic"},st={key:6,class:"bg-gray-50 rounded-lg p-6 mb-6"},rt={key:0,class:"text-gray-700 leading-relaxed whitespace-pre-wrap font-mono text-sm bg-white p-4 rounded border"},ot={key:1,class:"text-gray-500 italic"},nt={key:7,class:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},lt={class:"text-blue-700 font-mono ml-2"},at={class:"text-blue-700 ml-2"},pt={class:"text-blue-700 ml-2"},gt={class:"text-blue-700 ml-2"},dt={key:0},ut={class:"text-blue-700 ml-2"},mt={key:1},ct={class:"text-blue-700 ml-2"};function bt(r,e,u,p,s,a){return o(),n("div",G,[e[54]||(e[54]=t("div",{class:"mb-8"},[t("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"\u{1F4CA} AI Recruitment Reports"),t("p",{class:"text-sm text-gray-600"},"Generate comprehensive recruitment reports based on CV analysis")],-1)),a.effectiveJobOpening?(o(),n("div",L,[t("div",P,[t("div",F,[e[15]||(e[15]=t("span",{class:"text-2xl"},"\u{1F4BC}",-1)),e[16]||(e[16]=t("h4",{class:"text-lg font-semibold text-gray-900"},"Job Opening",-1)),t("span",U,l(a.effectiveJobOpening),1)]),s.jobOpeningData?(o(),n("div",V,[t("p",q,[e[17]||(e[17]=t("span",{class:"font-medium text-gray-700"},"Title:",-1)),e[18]||(e[18]=c()),t("span",M,l(s.jobOpeningData.job_title||"N/A"),1)]),s.jobOpeningData.designation?(o(),n("p",z,[e[19]||(e[19]=t("span",{class:"font-medium text-gray-700"},"Designation:",-1)),e[20]||(e[20]=c()),t("span",H,l(s.jobOpeningData.designation),1)])):g("",!0),s.jobOpeningData.company?(o(),n("p",B,[e[21]||(e[21]=t("span",{class:"font-medium text-gray-700"},"Company:",-1)),e[22]||(e[22]=c()),t("span",Y,l(s.jobOpeningData.company),1)])):g("",!0),s.jobOpeningData.department?(o(),n("p",Z,[e[23]||(e[23]=t("span",{class:"font-medium text-gray-700"},"Department:",-1)),e[24]||(e[24]=c()),t("span",K,l(s.jobOpeningData.department),1)])):g("",!0)])):(o(),n("div",Q,"Loading job opening data..."))]),t("div",W,[t("button",{onClick:e[3]||(e[3]=(...i)=>a.generateReport&&a.generateReport(...i)),disabled:s.isGenerating,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed"},[s.isGenerating?(o(),n("span",$,"\u{1F504} Generating...")):(o(),n("span",ee,"\u{1F4CA} Generate Report"))],8,X),t("button",{onClick:e[4]||(e[4]=(...i)=>a.clearInputs&&a.clearInputs(...i)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"},"Change Job Opening"),s.report?(o(),n("button",{key:0,onClick:e[5]||(e[5]=(...i)=>a.reloadReport&&a.reloadReport(...i)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"},"\u{1F504} Reload")):g("",!0),s.report&&s.report.status==="Generating"?(o(),n("button",{key:1,onClick:e[6]||(e[6]=(...i)=>a.triggerProcessing&&a.triggerProcessing(...i)),class:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700"},"\u26A1 Trigger Processing")):g("",!0),s.report&&s.report.status==="Completed"?(o(),n("button",{key:2,onClick:e[7]||(e[7]=(...i)=>a.exportToPDF&&a.exportToPDF(...i)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"},"\u{1F4C4} Export PDF")):g("",!0),s.report&&s.report.status==="Completed"?(o(),n("button",{key:3,onClick:e[8]||(e[8]=(...i)=>a.exportToExcel&&a.exportToExcel(...i)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"},"\u{1F4CA} Export Excel")):g("",!0)])])):(o(),n("div",J,[t("div",j,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"\u{1F4DD} Select Job Opening",-1)),e[14]||(e[14]=t("p",{class:"text-sm text-gray-600 mb-6"},"Select a Job Opening to generate a recruitment report.",-1)),t("div",D,[e[12]||(e[12]=t("label",{for:"job-opening",class:"block text-sm font-medium text-gray-700 mb-2"},[t("span",null,"\u{1F4BC}"),c(" Job Opening ")],-1)),k(t("select",{id:"job-opening","onUpdate:modelValue":e[0]||(e[0]=i=>s.formJobOpening=i),onChange:e[1]||(e[1]=(...i)=>a.onJobOpeningChange&&a.onJobOpeningChange(...i)),disabled:s.loadingJobOpenings,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[e[11]||(e[11]=t("option",{value:""},"Select Job Opening...",-1)),(o(!0),n(x,null,_(s.jobOpeningsList,i=>(o(),n("option",{key:i.name,value:i.name},l(i.job_title||i.name)+" "+l(i.designation?`(${i.designation})`:""),9,I))),128))],40,A),[[w,s.formJobOpening]]),s.loadingJobOpenings?(o(),n("p",T,"Loading openings...")):g("",!0)]),t("button",{onClick:e[2]||(e[2]=(...i)=>a.generateReport&&a.generateReport(...i)),disabled:!a.canGenerate||s.isGenerating,class:"w-full px-6 py-3 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed"},[s.isGenerating?(o(),n("span",S,"\u{1F504} Generating...")):(o(),n("span",N,"\u{1F680} Generate Report"))],8,E)])])),s.error?(o(),n("div",te,[t("div",se,[e[26]||(e[26]=t("span",{class:"text-xl"},"\u26A0\uFE0F",-1)),t("div",null,[e[25]||(e[25]=t("strong",{class:"text-red-800"},"Error:",-1)),t("span",re,l(s.error),1)])]),t("button",{onClick:e[9]||(e[9]=(...i)=>a.clearError&&a.clearError(...i)),class:"text-red-600 hover:text-red-800"},"\u2715")])):g("",!0),s.isGenerating&&!s.report?(o(),n("div",oe,[e[27]||(e[27]=t("div",{class:"relative inline-block mb-6"},[t("div",{class:"w-16 h-16 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})],-1)),e[28]||(e[28]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"\u{1F916} Generating Report...",-1)),e[29]||(e[29]=t("p",{class:"text-sm text-gray-600 mb-6"},"This may take a few moments",-1)),t("div",ne,[t("p",ie,"Checking status... ("+l(s.pollingAttempts)+"/60 attempts, ~"+l(Math.round(s.pollingAttempts*2))+"s elapsed)",1),t("div",le,[t("div",{class:"bg-blue-500 h-2 rounded-full transition-all",style:f({width:Math.min(s.pollingAttempts/60*100,100)+"%"})},null,4)])]),s.pollingAttempts>5?(o(),n("button",{key:0,onClick:e[10]||(e[10]=(...i)=>a.cancelGeneration&&a.cancelGeneration(...i)),class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600"},"Cancel Generation")):g("",!0)])):g("",!0),s.report?(o(),n("div",ae,[t("div",pe,[t("div",ge,[s.report.status==="Completed"?(o(),n("h3",de,"\u2705 Report Complete")):s.report.status==="Generating"?(o(),n("h3",ue,"\u23F3 Report Generating")):s.report.status==="Failed"?(o(),n("h3",me,"\u274C Report Failed")):(o(),n("h3",ce,"\u{1F4CA} Report (Status: "+l(s.report.status)+")",1)),s.report.report_generated_date?(o(),n("div",be," Generated on "+l(a.formatDate(s.report.report_generated_date)),1)):g("",!0)]),t("div",he,[t("div",ye,[e[30]||(e[30]=t("div",{class:"flex items-center gap-2 mb-2"},[t("span",{class:"text-xl"},"\u{1F4CB}"),t("h4",{class:"text-sm font-medium text-gray-700"},"Report ID")],-1)),t("div",xe,l(s.report.name),1)]),t("div",_e,[e[31]||(e[31]=t("div",{class:"flex items-center gap-2 mb-2"},[t("span",{class:"text-xl"},"\u{1F465}"),t("h4",{class:"text-sm font-medium text-gray-700"},"Candidates Analyzed")],-1)),t("div",fe,l(s.report.candidates_analyzed||0),1)]),t("div",ve,[e[32]||(e[32]=t("div",{class:"flex items-center gap-2 mb-2"},[t("span",{class:"text-xl"},"\u{1F3C6}"),t("h4",{class:"text-sm font-medium text-gray-700"},"Top Candidates")],-1)),t("div",ke,l(s.report.top_candidates?s.report.top_candidates.length:0),1)])]),s.report.status==="Generating"?(o(),n("div",we,[e[39]||(e[39]=t("h4",{class:"text-lg font-semibold text-yellow-900 mb-4 pb-3 border-b border-yellow-300"},"\u23F3 Report is being generated",-1)),t("div",Re,[e[37]||(e[37]=t("p",{class:"mb-2"},"The report is currently being processed in the background.",-1)),t("p",Oe,[e[33]||(e[33]=t("strong",null,"Report ID:",-1)),e[34]||(e[34]=c()),t("span",Ce,l(s.report.name),1)]),t("p",Ge,[e[35]||(e[35]=t("strong",null,"Job Opening:",-1)),c(" "+l(s.report.job_opening),1)]),s.report.report_generated_date?(o(),n("p",Je,[e[36]||(e[36]=t("strong",null,"Started:",-1)),c(" "+l(a.formatDate(s.report.report_generated_date)),1)])):g("",!0),e[38]||(e[38]=R('<div class="mt-4 p-3 bg-yellow-100 rounded border border-yellow-300" data-v-495a315c><p class="text-sm font-semibold mb-2" data-v-495a315c>\u26A0\uFE0F If the report is stuck in &quot;Generating&quot; status:</p><ul class="text-sm list-disc list-inside space-y-1" data-v-495a315c><li data-v-495a315c>Make sure <code class="bg-yellow-200 px-1 rounded" data-v-495a315c>bench start</code> is running (background workers)</li><li data-v-495a315c>Check if the background job queue is processing</li><li data-v-495a315c>Click the &quot;Reload&quot; button to manually check the status</li><li data-v-495a315c>The report might be waiting for CV analyses to complete</li></ul></div><p class="text-sm mt-4" data-v-495a315c>This page will automatically update when the report is ready. You can also click the &quot;Reload&quot; button to check the status.</p>',2))])])):g("",!0),s.report.status==="Completed"||s.report.status==="Generating"&&s.report.ai_analysis_summary&&s.report.ai_analysis_summary!=="<p>Report is being generated. Please wait...</p>"?(o(),n("div",je,[e[40]||(e[40]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F4CB} Executive Summary",-1)),s.report.ai_analysis_summary&&s.report.ai_analysis_summary!=="<p>Report is being generated. Please wait...</p>"?(o(),n("div",{key:0,class:"text-gray-700 leading-relaxed prose max-w-none",innerHTML:s.report.ai_analysis_summary},null,8,De)):s.report.status==="Completed"?(o(),n("div",Ae,"No summary available")):(o(),n("div",Ie,"Summary will appear when report is ready..."))])):g("",!0),s.report.status==="Completed"&&s.report.top_candidates&&s.report.top_candidates.length>0?(o(),n("div",Te,[e[42]||(e[42]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F3C6} Top Candidates",-1)),t("div",Ee,[t("table",Se,[e[41]||(e[41]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Rank"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Candidate"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Score"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Recommendation"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Strengths"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Concerns"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Actions")])],-1)),t("tbody",Ne,[(o(!0),n(x,null,_(s.report.top_candidates,(i,b)=>(o(),n("tr",{key:i.name||i.candidate||b,class:"hover:bg-gray-50"},[t("td",Le,"#"+l(i.ai_ranking||b+1),1),t("td",Pe,l(i.candidate_name||i.candidate||"N/A"),1),t("td",Fe,[t("div",Ue,[t("span",Ve,l(i.overall_score||0)+"%",1),t("div",qe,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:f({width:(i.overall_score||0)+"%"})},null,4)])])]),t("td",Me,[t("span",{class:O([a.getRecommendationClass(i.recommendation),"px-2 py-1 rounded-full text-xs font-medium"])},l(i.recommendation||"N/A"),3)]),t("td",ze,l(i.strengths||"N/A"),1),t("td",He,l(i.concerns||"N/A"),1),t("td",Be,[i.cv_analysis_link?(o(),n("button",{key:0,onClick:m=>a.viewCVAnalysis(i.cv_analysis_link),class:"text-blue-600 hover:text-blue-800 underline"},"View CV Analysis",8,Ye)):(o(),n("span",Ze,"No link"))])]))),128))])])])])):g("",!0),s.report.status==="Completed"&&(!s.report.top_candidates||s.report.top_candidates.length===0)?(o(),n("div",Ke,[...e[43]||(e[43]=[t("h4",{class:"text-lg font-semibold text-yellow-900 mb-2"},"\u{1F3C6} Top Candidates",-1),t("p",{class:"text-yellow-800"},"No top candidates found. This usually means there are no completed CV analyses for this job opening.",-1)])])):g("",!0),s.report.status==="Completed"?(o(),n("div",Qe,[e[44]||(e[44]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F4A1} Hiring Recommendations",-1)),s.report.hiring_recommendations&&s.report.hiring_recommendations.trim().length>0?(o(),n("div",{key:0,class:"text-gray-700 leading-relaxed prose max-w-none",innerHTML:s.report.hiring_recommendations},null,8,We)):(o(),n("div",Xe,"No recommendations available"))])):g("",!0),s.report.status==="Completed"?(o(),n("div",$e,[e[45]||(e[45]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F4CA} Skills Gap Analysis",-1)),s.report.skills_gap_analysis&&s.report.skills_gap_analysis.trim().length>0?(o(),n("div",et,l(s.report.skills_gap_analysis),1)):(o(),n("div",tt,"No skills gap analysis available"))])):g("",!0),s.report.status==="Completed"?(o(),n("div",st,[e[46]||(e[46]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F310} Market Insights",-1)),s.report.market_insights&&s.report.market_insights.trim().length>0?(o(),n("div",rt,l(s.report.market_insights),1)):(o(),n("div",ot,"No market insights available"))])):g("",!0),s.report.status==="Completed"?(o(),n("div",nt,[e[53]||(e[53]=t("h4",{class:"text-lg font-semibold text-blue-900 mb-4 pb-3 border-b border-blue-300"},"\u{1F50D} Report Details",-1)),t("div",it,[t("div",null,[e[47]||(e[47]=t("strong",{class:"text-blue-900"},"Report ID:",-1)),t("span",lt,l(s.report.name),1)]),t("div",null,[e[48]||(e[48]=t("strong",{class:"text-blue-900"},"Job Opening:",-1)),t("span",at,l(s.report.job_opening),1)]),t("div",null,[e[49]||(e[49]=t("strong",{class:"text-blue-900"},"Status:",-1)),t("span",pt,l(s.report.status),1)]),t("div",null,[e[50]||(e[50]=t("strong",{class:"text-blue-900"},"Candidates Analyzed:",-1)),t("span",gt,l(s.report.candidates_analyzed||0),1)]),s.report.report_generated_date?(o(),n("div",dt,[e[51]||(e[51]=t("strong",{class:"text-blue-900"},"Generated Date:",-1)),t("span",ut,l(a.formatDate(s.report.report_generated_date)),1)])):g("",!0),s.report.top_candidates?(o(),n("div",mt,[e[52]||(e[52]=t("strong",{class:"text-blue-900"},"Top Candidates Count:",-1)),t("span",ct,l(s.report.top_candidates.length||0),1)])):g("",!0)])])):g("",!0)])])):g("",!0)])}var xt=v(C,[["render",bt],["__scopeId","data-v-495a315c"]]);export{xt as default};
