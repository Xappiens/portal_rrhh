var b=(V,y,c)=>new Promise((_,m)=>{var p=r=>{try{x(c.next(r))}catch(s){m(s)}},w=r=>{try{x(c.throw(r))}catch(s){m(s)}},x=r=>r.done?_(r.value):Promise.resolve(r.value).then(p,w);x((c=c.apply(V,y)).next())});import{r as h,i as j,W as z,o as n,c as l,b as e,d as o,w as i,F as B,x as C,y as k,u as f,_ as g,t as d,e as E}from"./vendor.47156cf5.js";const I={class:"flex-1 p-6 bg-gray-50"},L={class:"bg-white rounded-lg shadow p-4 mb-6"},N={class:"flex items-center space-x-4"},D={class:"flex-1"},F=["value"],S={class:"bg-white rounded-lg shadow overflow-hidden"},T={class:"overflow-x-auto"},U={class:"min-w-full divide-y divide-gray-200"},q={class:"bg-white divide-y divide-gray-200"},M={key:0,class:"text-center"},Q={key:1,class:"text-center"},W={class:"px-6 py-4 whitespace-nowrap"},$={class:"flex items-center"},G={class:"flex-shrink-0 h-10 w-10"},H=["src","alt"],J={key:1,class:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center"},K={class:"text-sm font-medium text-gray-700"},O={class:"ml-4"},P={class:"text-sm font-medium text-gray-900"},R={class:"text-sm text-gray-500"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},te={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},se={class:"flex items-center justify-end space-x-2"},re={__name:"Empleados",setup(V){const y=h([]),c=h([]),_=h(!1),m=h(""),p=h(""),w=()=>b(this,null,function*(){_.value=!0;try{const s=yield frappe.call("portal_rrhh.portal_rrhh.employee_data.get_employees_list",{filters:{status:"Active"},limit:50,offset:0});s.message&&(y.value=s.message.employees.map(t=>({id:t.name,nombre:t.employee_name,email:t.email,departamento:t.department||"Sin departamento",cargo:t.designation||"Sin cargo",estado:t.status==="Active"?"Activo":"Inactivo",fechaIngreso:t.date_of_joining_formatted||"N/A",avatar:t.avatar})))}catch(s){console.error("Error loading employees:",s)}finally{_.value=!1}}),x=()=>b(this,null,function*(){try{const s=yield frappe.call("portal_rrhh.portal_rrhh.employee_data.get_departments_list");s.message&&(c.value=s.message)}catch(s){console.error("Error loading departments:",s)}}),r=j(()=>{let s=y.value;if(m.value){const t=m.value.toLowerCase();s=s.filter(u=>u.nombre.toLowerCase().includes(t)||u.email.toLowerCase().includes(t)||u.departamento.toLowerCase().includes(t))}return p.value&&(s=s.filter(t=>t.departamento===p.value)),s});return z(()=>{w(),x()}),(s,t)=>{const u=k("Input"),v=k("Button"),A=k("Badge");return n(),l("div",I,[e("div",L,[e("div",N,[e("div",D,[o(u,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),type:"text",placeholder:"Buscar empleados...",variant:"outline",size:"sm"},{prefix:i(()=>[o(f(g),{name:"search",class:"h-4 text-gray-400"})]),_:1},8,["modelValue"])]),o(u,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),type:"select",variant:"outline",size:"sm"},{default:i(()=>[t[2]||(t[2]=e("option",{value:""},"Todos los departamentos",-1)),(n(!0),l(B,null,C(c.value,a=>(n(),l("option",{key:a.name,value:a.department_name},d(a.department_name),9,F))),128))]),_:1},8,["modelValue"]),o(v,{variant:"outline",size:"sm"},{prefix:i(()=>[o(f(g),{name:"filter",class:"h-4"})]),default:i(()=>[t[3]||(t[3]=E(" Filtrar ",-1))]),_:1})])]),e("div",S,[e("div",T,[e("table",U,[t[6]||(t[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Empleado "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Departamento "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cargo "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha de Ingreso "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",q,[_.value?(n(),l("tr",M,[...t[4]||(t[4]=[e("td",{colspan:"6",class:"px-6 py-4"},[e("div",{class:"flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e("span",{class:"ml-2"},"Cargando empleados...")])],-1)])])):r.value.length===0?(n(),l("tr",Q,[...t[5]||(t[5]=[e("td",{colspan:"6",class:"px-6 py-4 text-gray-500"}," No se encontraron empleados ",-1)])])):(n(!0),l(B,{key:2},C(r.value,a=>(n(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",W,[e("div",$,[e("div",G,[a.avatar?(n(),l("img",{key:0,src:a.avatar,alt:a.nombre,class:"h-10 w-10 rounded-full object-cover"},null,8,H)):(n(),l("div",J,[e("span",K,d(a.nombre.charAt(0)),1)]))]),e("div",O,[e("div",P,d(a.nombre),1),e("div",R,d(a.email),1)])])]),e("td",X,d(a.departamento),1),e("td",Y,d(a.cargo),1),e("td",Z,[o(A,{theme:a.estado==="Activo"?"green":"red",variant:"subtle"},{default:i(()=>[E(d(a.estado),1)]),_:2},1032,["theme"])]),e("td",ee,d(a.fechaIngreso),1),e("td",te,[e("div",se,[o(v,{variant:"ghost",size:"sm",theme:"blue"},{default:i(()=>[o(f(g),{name:"edit",class:"h-4"})]),_:1}),o(v,{variant:"ghost",size:"sm",theme:"gray"},{default:i(()=>[o(f(g),{name:"eye",class:"h-4"})]),_:1}),o(v,{variant:"ghost",size:"sm",theme:"red"},{default:i(()=>[o(f(g),{name:"trash-2",class:"h-4"})]),_:1})])])]))),128))])])])])])}}};export{re as default};
