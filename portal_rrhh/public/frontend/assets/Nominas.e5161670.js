var X=Object.defineProperty,$=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var S=(m,e,i)=>e in m?X(m,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[e]=i,T=(m,e)=>{for(var i in e||(e={}))te.call(e,i)&&S(m,i,e[i]);if(j)for(var i of j(e))se.call(e,i)&&S(m,i,e[i]);return m},q=(m,e)=>$(m,ee(e));var D=(m,e,i)=>new Promise((s,w)=>{var E=d=>{try{u(i.next(d))}catch(f){w(f)}},x=d=>{try{u(i.throw(d))}catch(f){w(f)}},u=d=>d.done?s(d.value):Promise.resolve(d.value).then(E,x);u((i=i.apply(m,e)).next())});import{z as ae,U as oe,C as re,Q as le,_ as ne,$ as ie,R as de,J as ce,r as b,a8 as me,o as g,c as y,b as t,d as l,w as c,f as k,aa as N,G as C,W as V,Y as xe,e as p,t as o,n as M,s as B,F as H,E as I,Z as L}from"./vendor.13deb96d.js";const ue={name:"Nominas",components:{Card:oe,Badge:re,Button:le,FeatherIcon:ne,LoadingIndicator:ie,Input:de,Dialog:ce},setup(){const m=b(!1),e=b("previsiones"),i=b({mes:K(),a\u00F1o:new Date().getFullYear(),employee:"",course:""}),s=b([]),w=b([]),E=b(null),x=b([]),u=b([]),d=b(!1),f=b(null),A=b(!1),_=b(null),v=()=>D(this,null,function*(){m.value=!0;try{const n=yield N("portal_rrhh.api.nominas.get_prevision_mes",{mes:i.value.mes,a\u00F1o:i.value.a\u00F1o,employee:i.value.employee||null,course:i.value.course||null});n&&(s.value=n.previsiones||[],E.value=n.resumen||{});const r=yield N("portal_rrhh.api.nominas.get_liquidaciones_mes",{mes:i.value.mes,a\u00F1o:i.value.a\u00F1o,employee:i.value.employee||null,course:i.value.course||null});r&&(w.value=r.liquidaciones||[],r.resumen&&(E.value=r.resumen))}catch(n){console.error("Error cargando datos:",n)}finally{m.value=!1}}),a=()=>{i.value.employee="",i.value.course="",v()},h=()=>D(this,null,function*(){yield v()}),F=()=>D(this,null,function*(){if(x.value.length!==0&&!!confirm(`\xBFEst\xE1 seguro de liquidar ${x.value.length} n\xF3minas?`)){m.value=!0;try{const n=s.value.filter(r=>x.value.includes(`${r.employee}-${r.course}`));yield N("portal_rrhh.api.nominas.crear_liquidaciones_mes",{mes:i.value.mes,a\u00F1o:i.value.a\u00F1o,liquidaciones_data:n}),x.value=[],yield v(),e.value="liquidaciones"}catch(n){console.error("Error liquidando n\xF3minas:",n)}finally{m.value=!1}}}),P=()=>D(this,null,function*(){if(u.value.length!==0&&!!confirm(`\xBFMarcar ${u.value.length} liquidaciones como enviadas?`)){m.value=!0;try{yield N("portal_rrhh.api.nominas.marcar_como_enviado",{liquidaciones_ids:u.value}),u.value=[],yield v()}catch(n){console.error("Error:",n)}finally{m.value=!1}}}),U=()=>D(this,null,function*(){m.value=!0;try{yield N("portal_rrhh.api.nominas.generar_reporte_excel",{mes:i.value.mes,a\u00F1o:i.value.a\u00F1o,liquidaciones_ids:u.value.length>0?u.value:null})}catch(n){console.error("Error generando reporte:",n)}finally{m.value=!1}}),O=n=>{f.value=n,d.value=!0},z=n=>{_.value=q(T({},n),{horas_extras:n.horas_extras||0,precio_hora_extra:n.precio_hora_extra||n.precio_hora*1.2}),A.value=!0},G=()=>{const n=s.value.findIndex(r=>r.employee===_.value.employee&&r.course===_.value.course);if(n!==-1){const r=s.value[n];r.horas_extras=_.value.horas_extras,r.precio_hora_extra=_.value.precio_hora_extra,r.total_horas=r.horas_normales+r.horas_extras,r.importe_horas_extras=r.horas_extras*r.precio_hora_extra,r.bruto=r.importe_horas_normales+r.importe_horas_extras,r.vacaciones_mes=Math.round(r.bruto*.0833*100)/100,r.bruto_menos_vacaciones=r.bruto-r.vacaciones_mes,r.base_ss=r.bruto_menos_vacaciones,r.importe_ss=Math.round(r.base_ss*.3207*100)/100,r.total=r.base_ss+r.importe_ss}A.value=!1},J=n=>{n.target.checked?x.value=s.value.map(r=>`${r.employee}-${r.course}`):x.value=[]},R=n=>{n.target.checked?u.value=w.value.map(r=>r.name):u.value=[]},Y=n=>{window.open(`/app/liquidacion-nomina/${n}`,"_blank")},Q=n=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(n||0),W=n=>new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n||0),Z=n=>({Borrador:"gray",Previsi\u00F3n:"blue",Liquidado:"orange","Enviado a Asesor\xEDa":"purple",Pagado:"green"})[n]||"gray";function K(){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][new Date().getMonth()]}return me(()=>{v()}),{loading:m,activeTab:e,filters:i,previsiones:s,liquidaciones:w,resumen:E,seleccionadas:x,seleccionadasLiquidaciones:u,showDetalleModal:d,detalleActual:f,showHorasExtrasModal:A,horasExtrasData:_,cargarDatos:v,limpiarFiltros:a,generarPrevisiones:h,liquidarSeleccionadas:F,marcarComoEnviado:P,generarReporteExcel:U,verDetalle:O,agregarHorasExtras:z,guardarHorasExtras:G,toggleSelectAll:J,toggleSelectAllLiquidaciones:R,abrirLiquidacion:Y,formatCurrency:Q,formatNumber:W,getEstadoBadgeTheme:Z}}},ge={class:"px-5 py-6 sm:px-8 h-full overflow-y-auto"},ye={class:"flex items-center gap-2"},pe={class:"p-4 space-y-4"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},be={class:"flex gap-2"},ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},_e={class:"p-4 flex items-center gap-4"},he={class:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100"},we={class:"text-2xl font-bold text-gray-900"},ke={class:"p-4 flex items-center gap-4"},Ce={class:"flex h-12 w-12 items-center justify-center rounded-lg bg-green-100"},Ee={class:"text-2xl font-bold text-gray-900"},Ae={class:"p-4 flex items-center gap-4"},De={class:"flex h-12 w-12 items-center justify-center rounded-lg bg-yellow-100"},Ne={class:"text-2xl font-bold text-gray-900"},Ve={class:"p-4 flex items-center gap-4"},je={class:"flex h-12 w-12 items-center justify-center rounded-lg bg-white bg-opacity-20"},Se={class:"text-2xl font-bold text-white"},Te={class:"p-4 flex flex-wrap gap-2"},qe={class:"border-b border-gray-200"},Me={class:"flex -mb-px"},Be={key:0,class:"p-4"},He={key:1,class:"text-center py-12"},Ie={key:2,class:"overflow-x-auto"},Le={class:"min-w-full divide-y divide-gray-200"},Fe={class:"bg-gray-50"},Pe={class:"px-4 py-3 text-left"},Ue={class:"bg-white divide-y divide-gray-200"},Oe={class:"px-4 py-3"},ze=["value"],Ge={class:"px-4 py-3 text-sm text-gray-900"},Je={class:"px-4 py-3 text-sm text-gray-500"},Re={class:"px-4 py-3 text-sm text-gray-500"},Ye={class:"px-4 py-3 text-sm text-gray-900 text-right"},Qe={class:"px-4 py-3 text-sm text-gray-900 text-right"},We={class:"px-4 py-3 text-sm text-gray-500 text-right"},Ze={class:"px-4 py-3 text-sm text-gray-500 text-right"},Ke={class:"px-4 py-3 text-sm font-semibold text-gray-900 text-right"},Xe={class:"px-4 py-3 text-center"},$e={class:"flex items-center justify-center gap-1"},et={key:1,class:"p-4"},tt={key:1,class:"text-center py-12"},st={key:2,class:"overflow-x-auto"},at={class:"min-w-full divide-y divide-gray-200"},ot={class:"bg-gray-50"},rt={class:"px-4 py-3 text-left"},lt={class:"bg-white divide-y divide-gray-200"},nt={class:"px-4 py-3"},it=["value"],dt={class:"px-4 py-3 text-sm text-gray-900"},ct={class:"px-4 py-3 text-sm text-gray-500"},mt={class:"px-4 py-3 text-sm text-gray-500"},xt={class:"px-4 py-3 text-sm text-gray-900 text-right"},ut={class:"px-4 py-3 text-sm text-gray-900 text-right"},gt={class:"px-4 py-3 text-sm text-gray-900 text-right"},yt={class:"px-4 py-3 text-sm text-gray-900 text-right"},pt={class:"px-4 py-3 text-sm text-gray-500 text-right"},ft={class:"px-4 py-3 text-sm font-semibold text-gray-900 text-right"},bt={class:"px-4 py-3 text-center"},vt={class:"px-4 py-3 text-center"},_t={key:0,class:"space-y-6"},ht={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},wt={class:"bg-gray-50 rounded-lg p-4"},kt={class:"space-y-2"},Ct={class:"flex justify-between text-sm"},Et={class:"font-medium text-gray-900"},At={class:"flex justify-between text-sm"},Dt={class:"font-medium text-gray-900"},Nt={class:"flex justify-between text-sm"},Vt={class:"font-medium text-gray-900"},jt={class:"flex justify-between text-sm"},St={class:"font-medium text-gray-900"},Tt={class:"bg-gray-50 rounded-lg p-4"},qt={class:"space-y-2"},Mt={class:"flex justify-between text-sm"},Bt={class:"font-medium text-gray-900"},Ht={class:"flex justify-between text-sm"},It={class:"font-medium text-gray-900"},Lt={class:"flex justify-between text-sm border-t pt-2"},Ft={class:"font-semibold text-gray-900"},Pt={class:"flex justify-between text-sm"},Ut={class:"font-medium text-gray-900"},Ot={class:"bg-white border border-gray-200 rounded-lg p-4"},zt={class:"space-y-2"},Gt={class:"flex justify-between text-sm"},Jt={class:"text-gray-900"},Rt={class:"flex justify-between text-sm"},Yt={class:"text-gray-900"},Qt={key:0,class:"flex justify-between text-sm"},Wt={class:"text-gray-900"},Zt={class:"flex justify-between text-sm font-semibold border-t border-b py-2"},Kt={class:"text-gray-900"},Xt={class:"flex justify-between text-sm text-red-600"},$t={class:"flex justify-between text-sm border-t pt-2"},es={class:"text-gray-900"},ts={key:1,class:"flex justify-between text-sm"},ss={class:"text-gray-900"},as={class:"flex justify-between text-sm"},os={class:"text-gray-900"},rs={class:"flex justify-between text-sm"},ls={class:"text-gray-900"},ns={class:"flex justify-between text-lg font-bold bg-blue-50 p-3 rounded-lg mt-3"},is={class:"text-blue-900"},ds={key:0,class:"space-y-4"},cs={class:"bg-gray-50 rounded-lg p-3"},ms={class:"text-sm"},xs={class:"text-sm"};function us(m,e,i,s,w,E){const x=C("FeatherIcon"),u=C("Input"),d=C("Button"),f=C("Card"),A=C("LoadingIndicator"),_=C("Badge"),v=C("Dialog");return g(),y("div",ge,[e[86]||(e[86]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Gesti\xF3n de N\xF3minas"),t("p",{class:"text-base text-gray-500"},"Sistema de liquidaci\xF3n de n\xF3minas para docentes")],-1)),l(f,{class:"mb-6"},{header:c(()=>[t("div",ye,[l(x,{name:"filter",class:"h-5 w-5 text-gray-500"}),e[17]||(e[17]=t("span",{class:"text-lg font-medium"},"Filtros",-1))])]),default:c(()=>[t("div",pe,[t("div",fe,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mes",-1)),V(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.filters.mes=a),onChange:e[1]||(e[1]=(...a)=>s.cargarDatos&&s.cargarDatos(...a)),class:"form-select w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[...e[18]||(e[18]=[t("option",{value:"Enero"},"Enero",-1),t("option",{value:"Febrero"},"Febrero",-1),t("option",{value:"Marzo"},"Marzo",-1),t("option",{value:"Abril"},"Abril",-1),t("option",{value:"Mayo"},"Mayo",-1),t("option",{value:"Junio"},"Junio",-1),t("option",{value:"Julio"},"Julio",-1),t("option",{value:"Agosto"},"Agosto",-1),t("option",{value:"Septiembre"},"Septiembre",-1),t("option",{value:"Octubre"},"Octubre",-1),t("option",{value:"Noviembre"},"Noviembre",-1),t("option",{value:"Diciembre"},"Diciembre",-1)])],544),[[xe,s.filters.mes]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"A\xF1o",-1)),l(u,{type:"number",modelValue:s.filters.a\u00F1o,"onUpdate:modelValue":e[2]||(e[2]=a=>s.filters.a\u00F1o=a),onChange:s.cargarDatos},null,8,["modelValue","onChange"])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Docente (Opcional)",-1)),l(u,{type:"text",modelValue:s.filters.employee,"onUpdate:modelValue":e[3]||(e[3]=a=>s.filters.employee=a),placeholder:"Buscar docente..."},null,8,["modelValue"])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Course (Opcional)",-1)),l(u,{type:"text",modelValue:s.filters.course,"onUpdate:modelValue":e[4]||(e[4]=a=>s.filters.course=a),placeholder:"Buscar course..."},null,8,["modelValue"])])]),t("div",be,[l(d,{onClick:s.cargarDatos,"icon-left":"search"},{default:c(()=>[...e[23]||(e[23]=[p(" Buscar ",-1)])]),_:1},8,["onClick"]),l(d,{onClick:s.limpiarFiltros,appearance:"white"},{default:c(()=>[...e[24]||(e[24]=[p(" Limpiar ",-1)])]),_:1},8,["onClick"])])])]),_:1}),s.resumen?(g(),y("div",ve,[l(f,null,{default:c(()=>[t("div",_e,[t("div",he,[l(x,{name:"users",class:"h-6 w-6 text-blue-600"})]),t("div",null,[e[25]||(e[25]=t("div",{class:"text-xs font-medium text-gray-500 uppercase"},"Total Docentes",-1)),t("div",we,o(s.resumen.total_docentes),1)])])]),_:1}),l(f,null,{default:c(()=>[t("div",ke,[t("div",Ce,[l(x,{name:"clock",class:"h-6 w-6 text-green-600"})]),t("div",null,[e[26]||(e[26]=t("div",{class:"text-xs font-medium text-gray-500 uppercase"},"Total Horas",-1)),t("div",Ee,o(s.formatNumber(s.resumen.total_horas))+"h",1)])])]),_:1}),l(f,null,{default:c(()=>[t("div",Ae,[t("div",De,[l(x,{name:"dollar-sign",class:"h-6 w-6 text-yellow-600"})]),t("div",null,[e[27]||(e[27]=t("div",{class:"text-xs font-medium text-gray-500 uppercase"},"Total Bruto",-1)),t("div",Ne,o(s.formatCurrency(s.resumen.total_bruto)),1)])])]),_:1}),l(f,{class:"bg-gradient-to-br from-blue-500 to-blue-600"},{default:c(()=>[t("div",Ve,[t("div",je,[l(x,{name:"trending-up",class:"h-6 w-6 text-white"})]),t("div",null,[e[28]||(e[28]=t("div",{class:"text-xs font-medium text-blue-100 uppercase"},"Total a Pagar",-1)),t("div",Se,o(s.formatCurrency(s.resumen.total_pagar)),1)])])]),_:1})])):k("",!0),l(f,{class:"mb-6"},{default:c(()=>[t("div",Te,[l(d,{onClick:s.generarPrevisiones,"icon-left":"calculator",loading:s.loading},{default:c(()=>[...e[29]||(e[29]=[p(" Generar Previsiones ",-1)])]),_:1},8,["onClick","loading"]),l(d,{onClick:s.liquidarSeleccionadas,"icon-left":"check",disabled:s.seleccionadas.length===0||s.loading},{default:c(()=>[p(" Liquidar Seleccionadas ("+o(s.seleccionadas.length)+") ",1)]),_:1},8,["onClick","disabled"]),l(d,{onClick:s.marcarComoEnviado,"icon-left":"send",appearance:"white",disabled:s.seleccionadasLiquidaciones.length===0||s.loading},{default:c(()=>[...e[30]||(e[30]=[p(" Marcar como Enviado ",-1)])]),_:1},8,["onClick","disabled"]),l(d,{onClick:s.generarReporteExcel,"icon-left":"file-text",appearance:"white",disabled:s.liquidaciones.length===0||s.loading},{default:c(()=>[...e[31]||(e[31]=[p(" Generar Reporte Excel ",-1)])]),_:1},8,["onClick","disabled"])])]),_:1}),l(f,null,{default:c(()=>[t("div",qe,[t("nav",Me,[t("button",{onClick:e[5]||(e[5]=a=>s.activeTab="previsiones"),class:M(["flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors",s.activeTab==="previsiones"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[l(x,{name:"eye",class:"h-4 w-4"}),e[32]||(e[32]=p(" Previsiones ",-1))],2),t("button",{onClick:e[6]||(e[6]=a=>s.activeTab="liquidaciones"),class:M(["flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors",s.activeTab==="liquidaciones"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[l(x,{name:"file-text",class:"h-4 w-4"}),e[33]||(e[33]=p(" Liquidaciones ",-1))],2)])]),s.activeTab==="previsiones"?(g(),y("div",Be,[s.loading?(g(),B(A,{key:0,class:"py-12"})):s.previsiones.length===0?(g(),y("div",He,[l(x,{name:"inbox",class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e[35]||(e[35]=t("p",{class:"text-gray-500 mb-4"},"No hay previsiones para este mes",-1)),l(d,{onClick:s.generarPrevisiones,"icon-left":"plus"},{default:c(()=>[...e[34]||(e[34]=[p(" Generar Previsiones ",-1)])]),_:1},8,["onClick"])])):(g(),y("div",Ie,[t("table",Le,[t("thead",Fe,[t("tr",null,[t("th",Pe,[t("input",{type:"checkbox",onChange:e[7]||(e[7]=(...a)=>s.toggleSelectAll&&s.toggleSelectAll(...a)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,32)]),e[36]||(e[36]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Docente",-1)),e[37]||(e[37]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"DNI/NIE",-1)),e[38]||(e[38]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Course",-1)),e[39]||(e[39]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Horas",-1)),e[40]||(e[40]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Bruto",-1)),e[41]||(e[41]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Vacaciones",-1)),e[42]||(e[42]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"SS",-1)),e[43]||(e[43]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total",-1)),e[44]||(e[44]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones",-1))])]),t("tbody",Ue,[(g(!0),y(H,null,I(s.previsiones,a=>(g(),y("tr",{key:`prev-${a.employee}-${a.course}`,class:"hover:bg-gray-50"},[t("td",Oe,[V(t("input",{type:"checkbox",value:`${a.employee}-${a.course}`,"onUpdate:modelValue":e[8]||(e[8]=h=>s.seleccionadas=h),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,ze),[[L,s.seleccionadas]])]),t("td",Ge,o(a.employee_name),1),t("td",Je,o(a.dni_nie),1),t("td",Re,o(a.course),1),t("td",Ye,o(s.formatNumber(a.total_horas))+"h",1),t("td",Qe,o(s.formatCurrency(a.bruto)),1),t("td",We,o(s.formatCurrency(a.vacaciones_mes)),1),t("td",Ze,o(s.formatCurrency(a.importe_ss)),1),t("td",Ke,o(s.formatCurrency(a.total)),1),t("td",Xe,[t("div",$e,[l(d,{onClick:h=>s.verDetalle(a),appearance:"minimal",icon:"eye",class:"!p-1"},null,8,["onClick"]),l(d,{onClick:h=>s.agregarHorasExtras(a),appearance:"minimal",icon:"clock",class:"!p-1"},null,8,["onClick"])])])]))),128))])])]))])):k("",!0),s.activeTab==="liquidaciones"?(g(),y("div",et,[s.loading?(g(),B(A,{key:0,class:"py-12"})):s.liquidaciones.length===0?(g(),y("div",tt,[l(x,{name:"inbox",class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e[45]||(e[45]=t("p",{class:"text-gray-500"},"No hay liquidaciones creadas para este mes",-1))])):(g(),y("div",st,[t("table",at,[t("thead",ot,[t("tr",null,[t("th",rt,[t("input",{type:"checkbox",onChange:e[9]||(e[9]=(...a)=>s.toggleSelectAllLiquidaciones&&s.toggleSelectAllLiquidaciones(...a)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,32)]),e[46]||(e[46]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Docente",-1)),e[47]||(e[47]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"DNI/NIE",-1)),e[48]||(e[48]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Course",-1)),e[49]||(e[49]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Horas N",-1)),e[50]||(e[50]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Horas E",-1)),e[51]||(e[51]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total H",-1)),e[52]||(e[52]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Bruto",-1)),e[53]||(e[53]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"SS",-1)),e[54]||(e[54]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total",-1)),e[55]||(e[55]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado",-1)),e[56]||(e[56]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones",-1))])]),t("tbody",lt,[(g(!0),y(H,null,I(s.liquidaciones,a=>(g(),y("tr",{key:a.name,class:"hover:bg-gray-50"},[t("td",nt,[V(t("input",{type:"checkbox",value:a.name,"onUpdate:modelValue":e[10]||(e[10]=h=>s.seleccionadasLiquidaciones=h),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,it),[[L,s.seleccionadasLiquidaciones]])]),t("td",dt,o(a.employee_name),1),t("td",ct,o(a.dni_nie),1),t("td",mt,o(a.course),1),t("td",xt,o(s.formatNumber(a.horas_normales)),1),t("td",ut,o(s.formatNumber(a.horas_extras)),1),t("td",gt,o(s.formatNumber(a.total_horas)),1),t("td",yt,o(s.formatCurrency(a.bruto)),1),t("td",pt,o(s.formatCurrency(a.importe_ss)),1),t("td",ft,o(s.formatCurrency(a.total)),1),t("td",bt,[l(_,{theme:s.getEstadoBadgeTheme(a.estado)},{default:c(()=>[p(o(a.estado),1)]),_:2},1032,["theme"])]),t("td",vt,[l(d,{onClick:h=>s.abrirLiquidacion(a.name),appearance:"minimal",icon:"external-link",class:"!p-1"},null,8,["onClick"])])]))),128))])])]))])):k("",!0)]),_:1}),l(v,{modelValue:s.showDetalleModal,"onUpdate:modelValue":e[12]||(e[12]=a=>s.showDetalleModal=a),options:{title:"Detalle de Liquidaci\xF3n",size:"3xl"}},{"body-content":c(()=>[s.detalleActual?(g(),y("div",_t,[t("div",ht,[t("div",wt,[e[61]||(e[61]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Informaci\xF3n B\xE1sica",-1)),t("div",kt,[t("div",Ct,[e[57]||(e[57]=t("span",{class:"text-gray-500"},"Empleado:",-1)),t("span",Et,o(s.detalleActual.employee_name),1)]),t("div",At,[e[58]||(e[58]=t("span",{class:"text-gray-500"},"DNI/NIE:",-1)),t("span",Dt,o(s.detalleActual.dni_nie),1)]),t("div",Nt,[e[59]||(e[59]=t("span",{class:"text-gray-500"},"Designation:",-1)),t("span",Vt,o(s.detalleActual.designation),1)]),t("div",jt,[e[60]||(e[60]=t("span",{class:"text-gray-500"},"Course:",-1)),t("span",St,o(s.detalleActual.course),1)])])]),t("div",Tt,[e[66]||(e[66]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Horas Trabajadas",-1)),t("div",qt,[t("div",Mt,[e[62]||(e[62]=t("span",{class:"text-gray-500"},"Horas Normales:",-1)),t("span",Bt,o(s.formatNumber(s.detalleActual.horas_normales))+"h",1)]),t("div",Ht,[e[63]||(e[63]=t("span",{class:"text-gray-500"},"Horas Extras:",-1)),t("span",It,o(s.formatNumber(s.detalleActual.horas_extras))+"h",1)]),t("div",Lt,[e[64]||(e[64]=t("span",{class:"text-gray-500 font-medium"},"Total Horas:",-1)),t("span",Ft,o(s.formatNumber(s.detalleActual.total_horas))+"h",1)]),t("div",Pt,[e[65]||(e[65]=t("span",{class:"text-gray-500"},"D\xEDas Trabajados:",-1)),t("span",Ut,o(s.detalleActual.dias_trabajados)+" d\xEDas",1)])])])]),t("div",Ot,[e[77]||(e[77]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"C\xE1lculo de Importes",-1)),t("div",zt,[t("div",Gt,[e[67]||(e[67]=t("span",{class:"text-gray-600"},"Precio por Hora:",-1)),t("span",Jt,o(s.formatCurrency(s.detalleActual.precio_hora)),1)]),t("div",Rt,[e[68]||(e[68]=t("span",{class:"text-gray-600"},"Importe Horas Normales:",-1)),t("span",Yt,o(s.formatCurrency(s.detalleActual.importe_horas_normales)),1)]),s.detalleActual.horas_extras>0?(g(),y("div",Qt,[e[69]||(e[69]=t("span",{class:"text-gray-600"},"Importe Horas Extras:",-1)),t("span",Wt,o(s.formatCurrency(s.detalleActual.importe_horas_extras)),1)])):k("",!0),t("div",Zt,[e[70]||(e[70]=t("span",{class:"text-gray-900"},"BRUTO TOTAL:",-1)),t("span",Kt,o(s.formatCurrency(s.detalleActual.bruto)),1)]),t("div",Xt,[e[71]||(e[71]=t("span",null,"Vacaciones (8.33%):",-1)),t("span",null,"-"+o(s.formatCurrency(s.detalleActual.vacaciones_mes)),1)]),t("div",$t,[e[72]||(e[72]=t("span",{class:"text-gray-600"},"Bruto - Vacaciones:",-1)),t("span",es,o(s.formatCurrency(s.detalleActual.bruto_menos_vacaciones)),1)]),s.detalleActual.vacaciones_acumuladas>0?(g(),y("div",ts,[e[73]||(e[73]=t("span",{class:"text-gray-600"},"Vacaciones Acumuladas:",-1)),t("span",ss,o(s.formatCurrency(s.detalleActual.vacaciones_acumuladas)),1)])):k("",!0),t("div",as,[e[74]||(e[74]=t("span",{class:"text-gray-600"},"Base para SS:",-1)),t("span",os,o(s.formatCurrency(s.detalleActual.base_ss)),1)]),t("div",rs,[e[75]||(e[75]=t("span",{class:"text-gray-600"},"Seguridad Social (32.07%):",-1)),t("span",ls,o(s.formatCurrency(s.detalleActual.importe_ss)),1)]),t("div",ns,[e[76]||(e[76]=t("span",{class:"text-blue-900"},"TOTAL A PAGAR:",-1)),t("span",is,o(s.formatCurrency(s.detalleActual.total)),1)])])])])):k("",!0)]),actions:c(()=>[l(d,{appearance:"white",onClick:e[11]||(e[11]=a=>s.showDetalleModal=!1)},{default:c(()=>[...e[78]||(e[78]=[p(" Cerrar ",-1)])]),_:1})]),_:1},8,["modelValue"]),l(v,{modelValue:s.showHorasExtrasModal,"onUpdate:modelValue":e[16]||(e[16]=a=>s.showHorasExtrasModal=a),options:{title:"Agregar Horas Extras",size:"md"}},{"body-content":c(()=>[s.horasExtrasData?(g(),y("div",ds,[t("div",cs,[t("p",ms,[e[79]||(e[79]=t("strong",null,"Docente:",-1)),p(" "+o(s.horasExtrasData.employee_name),1)]),t("p",xs,[e[80]||(e[80]=t("strong",null,"Course:",-1)),p(" "+o(s.horasExtrasData.course),1)])]),t("div",null,[e[81]||(e[81]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Horas Extras",-1)),l(u,{type:"number",modelValue:s.horasExtrasData.horas_extras,"onUpdate:modelValue":e[13]||(e[13]=a=>s.horasExtrasData.horas_extras=a),step:"0.5",min:"0"},null,8,["modelValue"])]),t("div",null,[e[82]||(e[82]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Precio Hora Extra (opcional)",-1)),l(u,{type:"number",modelValue:s.horasExtrasData.precio_hora_extra,"onUpdate:modelValue":e[14]||(e[14]=a=>s.horasExtrasData.precio_hora_extra=a),step:"0.01",min:"0",placeholder:`Por defecto: ${s.formatCurrency(s.horasExtrasData.precio_hora*1.2)}`},null,8,["modelValue","placeholder"]),e[83]||(e[83]=t("p",{class:"text-xs text-gray-500 mt-1"},"Si no se especifica, se usa 120% del precio normal",-1))])])):k("",!0)]),actions:c(()=>[l(d,{appearance:"white",onClick:e[15]||(e[15]=a=>s.showHorasExtrasModal=!1)},{default:c(()=>[...e[84]||(e[84]=[p(" Cancelar ",-1)])]),_:1}),l(d,{onClick:s.guardarHorasExtras},{default:c(()=>[...e[85]||(e[85]=[p(" Guardar ",-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue"])])}var ps=ae(ue,[["render",us],["__scopeId","data-v-97daee6e"]]);export{ps as default};
