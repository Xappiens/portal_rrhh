var re=Object.defineProperty,le=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var M=(c,e,n)=>e in c?re(c,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[e]=n,B=(c,e)=>{for(var n in e||(e={}))ie.call(e,n)&&M(c,n,e[n]);if(S)for(var n of S(e))de.call(e,n)&&M(c,n,e[n]);return c},H=(c,e)=>le(c,ne(e));var D=(c,e,n)=>new Promise((s,C)=>{var E=u=>{try{d(n.next(u))}catch(p){C(p)}},y=u=>{try{d(n.throw(u))}catch(p){C(p)}},d=u=>u.done?s(u.value):Promise.resolve(u.value).then(E,y);d((n=n.apply(c,e)).next())});import{z as ce,U as me,C as ue,Q as xe,_ as ge,$ as ye,R as pe,J as fe,r as b,q as I,a8 as ve,o as x,c as g,b as t,d as i,w as m,f as w,aa as T,G as k,W as q,Y as be,e as f,t as l,n as F,s as P,F as U,E as R,Z as O}from"./vendor.13deb96d.js";const _e={name:"Nominas",components:{Card:me,Badge:ue,Button:xe,FeatherIcon:ge,LoadingIndicator:ye,Input:pe,Dialog:fe},setup(){const c=b(!1),e=b("previsiones"),n=b({mes:oe(),a\u00F1o:new Date().getFullYear(),employee:"",course:""}),s=b([]),C=b([]),E=b(null),y=b([]),d=b([]),u=I(()=>{let r=s.value;if(n.value.employee&&n.value.employee.trim()!==""){const o=n.value.employee.toLowerCase().trim();r=r.filter(_=>{var h,N,V;return((h=_.employee_name)==null?void 0:h.toLowerCase().includes(o))||((N=_.employee)==null?void 0:N.toLowerCase().includes(o))||((V=_.dni_nie)==null?void 0:V.toLowerCase().includes(o))})}if(n.value.course&&n.value.course.trim()!==""){const o=n.value.course.toLowerCase().trim();r=r.filter(_=>{var h;return(h=_.course)==null?void 0:h.toLowerCase().includes(o)})}return r}),p=I(()=>{let r=C.value;if(n.value.employee&&n.value.employee.trim()!==""){const o=n.value.employee.toLowerCase().trim();r=r.filter(_=>{var h,N,V;return((h=_.employee_name)==null?void 0:h.toLowerCase().includes(o))||((N=_.employee)==null?void 0:N.toLowerCase().includes(o))||((V=_.dni_nie)==null?void 0:V.toLowerCase().includes(o))})}if(n.value.course&&n.value.course.trim()!==""){const o=n.value.course.toLowerCase().trim();r=r.filter(_=>{var h;return(h=_.course)==null?void 0:h.toLowerCase().includes(o)})}return r}),L=b(!1),j=b(null),A=b(!1),a=b(null),v=()=>D(this,null,function*(){c.value=!0;try{const r=yield T("portal_rrhh.api.nominas.get_prevision_mes",{mes:n.value.mes,a\u00F1o:n.value.a\u00F1o,employee:null,course:null});r&&(s.value=r.previsiones||[],E.value=r.resumen||{});const o=yield T("portal_rrhh.api.nominas.get_liquidaciones_mes",{mes:n.value.mes,a\u00F1o:n.value.a\u00F1o,employee:null,course:null});o&&(C.value=o.liquidaciones||[],o.resumen&&(E.value=o.resumen))}catch(r){console.error("Error cargando datos:",r)}finally{c.value=!1}}),z=()=>{n.value.employee="",n.value.course="",v()},J=()=>D(this,null,function*(){yield v()}),G=()=>D(this,null,function*(){if(y.value.length!==0&&!!confirm(`\xBFEst\xE1 seguro de liquidar ${y.value.length} n\xF3minas?`)){c.value=!0;try{const r=u.value.filter(o=>y.value.includes(`${o.employee}-${o.course}`));yield T("portal_rrhh.api.nominas.crear_liquidaciones_mes",{mes:n.value.mes,a\u00F1o:n.value.a\u00F1o,liquidaciones_data:r}),y.value=[],yield v(),e.value="liquidaciones"}catch(r){console.error("Error liquidando n\xF3minas:",r)}finally{c.value=!1}}}),Y=()=>D(this,null,function*(){if(d.value.length!==0&&!!confirm(`\xBFMarcar ${d.value.length} liquidaciones como enviadas?`)){c.value=!0;try{yield T("portal_rrhh.api.nominas.marcar_como_enviado",{liquidaciones_ids:d.value}),d.value=[],yield v()}catch(r){console.error("Error:",r)}finally{c.value=!1}}}),Q=()=>D(this,null,function*(){c.value=!0;try{yield T("portal_rrhh.api.nominas.generar_reporte_excel",{mes:n.value.mes,a\u00F1o:n.value.a\u00F1o,liquidaciones_ids:d.value.length>0?d.value:null})}catch(r){console.error("Error generando reporte:",r)}finally{c.value=!1}}),W=r=>{j.value=r,L.value=!0},Z=r=>{a.value=H(B({},r),{horas_extras:r.horas_extras||0,precio_hora_extra:r.precio_hora_extra||r.precio_hora*1.2}),A.value=!0},K=()=>{const r=s.value.findIndex(o=>o.employee===a.value.employee&&o.course===a.value.course);if(r!==-1){const o=s.value[r];o.horas_extras=a.value.horas_extras,o.precio_hora_extra=a.value.precio_hora_extra,o.total_horas=o.horas_normales+o.horas_extras,o.importe_horas_extras=o.horas_extras*o.precio_hora_extra,o.bruto=o.importe_horas_normales+o.importe_horas_extras,o.vacaciones_mes=Math.round(o.bruto*.0833*100)/100,o.bruto_menos_vacaciones=o.bruto-o.vacaciones_mes,o.base_ss=o.bruto_menos_vacaciones,o.importe_ss=Math.round(o.base_ss*.3207*100)/100,o.total=o.base_ss+o.importe_ss}A.value=!1},X=r=>{r.target.checked?y.value=u.value.map(o=>`${o.employee}-${o.course}`):y.value=[]},$=r=>{r.target.checked?d.value=p.value.map(o=>o.name):d.value=[]},ee=r=>{window.open(`/app/liquidacion-nomina/${r}`,"_blank")},te=r=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(r||0),se=r=>new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0),ae=r=>({Borrador:"gray",Previsi\u00F3n:"blue",Liquidado:"orange","Enviado a Asesor\xEDa":"purple",Pagado:"green"})[r]||"gray";function oe(){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][new Date().getMonth()]}return ve(()=>{v()}),{loading:c,activeTab:e,filters:n,previsiones:u,liquidaciones:p,resumen:E,seleccionadas:y,seleccionadasLiquidaciones:d,showDetalleModal:L,detalleActual:j,showHorasExtrasModal:A,horasExtrasData:a,cargarDatos:v,limpiarFiltros:z,generarPrevisiones:J,liquidarSeleccionadas:G,marcarComoEnviado:Y,generarReporteExcel:Q,verDetalle:W,agregarHorasExtras:Z,guardarHorasExtras:K,toggleSelectAll:X,toggleSelectAllLiquidaciones:$,abrirLiquidacion:ee,formatCurrency:te,formatNumber:se,getEstadoBadgeTheme:ae}}},he={class:"h-full flex flex-col overflow-hidden"},we={class:"flex-1 overflow-y-auto px-5 py-4 sm:px-8"},ke={class:"p-2"},Ce={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-2"},Ee={class:"flex flex-wrap gap-2"},Ae={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-4"},De={class:"p-2.5 flex items-center gap-2.5"},Le={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100 flex-shrink-0"},Ne={class:"min-w-0"},Ve={class:"text-lg font-bold text-gray-900 leading-tight"},Te={class:"p-2.5 flex items-center gap-2.5"},je={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-green-100 flex-shrink-0"},qe={class:"min-w-0"},Se={class:"text-lg font-bold text-gray-900 leading-tight"},Me={class:"p-2.5 flex items-center gap-2.5"},Be={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-yellow-100 flex-shrink-0"},He={class:"min-w-0"},Ie={class:"text-lg font-bold text-gray-900 leading-tight"},Fe={class:"p-2.5 flex items-center gap-2.5"},Pe={class:"flex h-8 w-8 items-center justify-center rounded-lg bg-white bg-opacity-20 flex-shrink-0"},Ue={class:"min-w-0"},Re={class:"text-lg font-bold text-white leading-tight"},Oe={class:"border-b border-gray-200"},ze={class:"flex -mb-px"},Je={key:0,class:"p-3"},Ge={key:1,class:"text-center py-12"},Ye={key:2,class:"overflow-x-auto"},Qe={class:"min-w-full divide-y divide-gray-200"},We={class:"bg-gray-50"},Ze={class:"px-3 py-2 text-left"},Ke={class:"bg-white divide-y divide-gray-200"},Xe={class:"px-3 py-2"},$e=["value"],et={class:"px-3 py-2 text-sm text-gray-900"},tt={class:"px-3 py-2 text-sm text-gray-500"},st={class:"px-3 py-2 text-sm text-gray-500"},at={class:"px-3 py-2 text-sm text-gray-900 text-right"},ot={class:"px-3 py-2 text-sm text-gray-900 text-right"},rt={class:"px-3 py-2 text-sm text-gray-500 text-right"},lt={class:"px-3 py-2 text-sm text-gray-500 text-right"},nt={class:"px-3 py-2 text-sm font-semibold text-gray-900 text-right"},it={class:"px-3 py-2 text-center"},dt={class:"flex items-center justify-center gap-1"},ct={key:1,class:"p-3"},mt={key:1,class:"text-center py-12"},ut={key:2,class:"overflow-x-auto"},xt={class:"min-w-full divide-y divide-gray-200"},gt={class:"bg-gray-50"},yt={class:"px-3 py-2 text-left"},pt={class:"bg-white divide-y divide-gray-200"},ft={class:"px-3 py-2"},vt=["value"],bt={class:"px-3 py-2 text-sm text-gray-900"},_t={class:"px-3 py-2 text-sm text-gray-500"},ht={class:"px-3 py-2 text-sm text-gray-500"},wt={class:"px-3 py-2 text-sm text-gray-900 text-right"},kt={class:"px-3 py-2 text-sm text-gray-900 text-right"},Ct={class:"px-3 py-2 text-sm text-gray-900 text-right"},Et={class:"px-3 py-2 text-sm text-gray-900 text-right"},At={class:"px-3 py-2 text-sm text-gray-500 text-right"},Dt={class:"px-3 py-2 text-sm font-semibold text-gray-900 text-right"},Lt={class:"px-3 py-2 text-center"},Nt={class:"px-3 py-2 text-center"},Vt={key:0,class:"space-y-6"},Tt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},jt={class:"bg-gray-50 rounded-lg p-4"},qt={class:"space-y-2"},St={class:"flex justify-between text-sm"},Mt={class:"font-medium text-gray-900"},Bt={class:"flex justify-between text-sm"},Ht={class:"font-medium text-gray-900"},It={class:"flex justify-between text-sm"},Ft={class:"font-medium text-gray-900"},Pt={class:"flex justify-between text-sm"},Ut={class:"font-medium text-gray-900"},Rt={class:"bg-gray-50 rounded-lg p-4"},Ot={class:"space-y-2"},zt={class:"flex justify-between text-sm"},Jt={class:"font-medium text-gray-900"},Gt={class:"flex justify-between text-sm"},Yt={class:"font-medium text-gray-900"},Qt={class:"flex justify-between text-sm border-t pt-2"},Wt={class:"font-semibold text-gray-900"},Zt={class:"flex justify-between text-sm"},Kt={class:"font-medium text-gray-900"},Xt={class:"bg-white border border-gray-200 rounded-lg p-4"},$t={class:"space-y-2"},es={class:"flex justify-between text-sm"},ts={class:"text-gray-900"},ss={class:"flex justify-between text-sm"},as={class:"text-gray-900"},os={key:0,class:"flex justify-between text-sm"},rs={class:"text-gray-900"},ls={class:"flex justify-between text-sm font-semibold border-t border-b py-2"},ns={class:"text-gray-900"},is={class:"flex justify-between text-sm text-red-600"},ds={class:"flex justify-between text-sm border-t pt-2"},cs={class:"text-gray-900"},ms={key:1,class:"flex justify-between text-sm"},us={class:"text-gray-900"},xs={class:"flex justify-between text-sm"},gs={class:"text-gray-900"},ys={class:"flex justify-between text-sm"},ps={class:"text-gray-900"},fs={class:"flex justify-between text-lg font-bold bg-blue-50 p-3 rounded-lg mt-3"},vs={class:"text-blue-900"},bs={key:0,class:"space-y-4"},_s={class:"bg-gray-50 rounded-lg p-3"},hs={class:"text-sm"},ws={class:"text-sm"};function ks(c,e,n,s,C,E){const y=k("Input"),d=k("Button"),u=k("Card"),p=k("FeatherIcon"),L=k("LoadingIndicator"),j=k("Badge"),A=k("Dialog");return x(),g("div",he,[t("div",we,[i(u,{class:"mb-4"},{default:m(()=>[t("div",ke,[t("div",Ce,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Mes",-1)),q(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.filters.mes=a),onChange:e[1]||(e[1]=(...a)=>s.cargarDatos&&s.cargarDatos(...a)),class:"form-select w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-1.5"},[...e[17]||(e[17]=[t("option",{value:"Enero"},"Enero",-1),t("option",{value:"Febrero"},"Febrero",-1),t("option",{value:"Marzo"},"Marzo",-1),t("option",{value:"Abril"},"Abril",-1),t("option",{value:"Mayo"},"Mayo",-1),t("option",{value:"Junio"},"Junio",-1),t("option",{value:"Julio"},"Julio",-1),t("option",{value:"Agosto"},"Agosto",-1),t("option",{value:"Septiembre"},"Septiembre",-1),t("option",{value:"Octubre"},"Octubre",-1),t("option",{value:"Noviembre"},"Noviembre",-1),t("option",{value:"Diciembre"},"Diciembre",-1)])],544),[[be,s.filters.mes]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"A\xF1o",-1)),i(y,{type:"number",modelValue:s.filters.a\u00F1o,"onUpdate:modelValue":e[2]||(e[2]=a=>s.filters.a\u00F1o=a),onChange:s.cargarDatos,class:"text-sm"},null,8,["modelValue","onChange"])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Docente (Opcional)",-1)),i(y,{type:"text",modelValue:s.filters.employee,"onUpdate:modelValue":e[3]||(e[3]=a=>s.filters.employee=a),placeholder:"Buscar docente...",class:"text-sm"},null,8,["modelValue"])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Course (Opcional)",-1)),i(y,{type:"text",modelValue:s.filters.course,"onUpdate:modelValue":e[4]||(e[4]=a=>s.filters.course=a),placeholder:"Buscar course...",class:"text-sm"},null,8,["modelValue"])])]),t("div",Ee,[i(d,{onClick:s.cargarDatos,"icon-left":"search",class:"!py-1 !text-sm"},{default:m(()=>[...e[22]||(e[22]=[f(" Buscar ",-1)])]),_:1},8,["onClick"]),i(d,{onClick:s.limpiarFiltros,appearance:"white",class:"!py-1 !text-sm"},{default:m(()=>[...e[23]||(e[23]=[f(" Limpiar ",-1)])]),_:1},8,["onClick"]),e[27]||(e[27]=t("div",{class:"border-l border-gray-300 mx-1"},null,-1)),i(d,{onClick:s.generarPrevisiones,"icon-left":"calculator",loading:s.loading,class:"!py-1 !text-sm"},{default:m(()=>[...e[24]||(e[24]=[f(" Generar Previsiones ",-1)])]),_:1},8,["onClick","loading"]),i(d,{onClick:s.liquidarSeleccionadas,"icon-left":"check",disabled:s.seleccionadas.length===0||s.loading,class:"!py-1 !text-sm"},{default:m(()=>[f(" Liquidar Seleccionadas ("+l(s.seleccionadas.length)+") ",1)]),_:1},8,["onClick","disabled"]),i(d,{onClick:s.marcarComoEnviado,"icon-left":"send",appearance:"white",disabled:s.seleccionadasLiquidaciones.length===0||s.loading,class:"!py-1 !text-sm"},{default:m(()=>[...e[25]||(e[25]=[f(" Marcar como Enviado ",-1)])]),_:1},8,["onClick","disabled"]),i(d,{onClick:s.generarReporteExcel,"icon-left":"file-text",appearance:"white",disabled:s.liquidaciones.length===0||s.loading,class:"!py-1 !text-sm"},{default:m(()=>[...e[26]||(e[26]=[f(" Generar Reporte Excel ",-1)])]),_:1},8,["onClick","disabled"])])])]),_:1}),s.resumen?(x(),g("div",Ae,[i(u,null,{default:m(()=>[t("div",De,[t("div",Le,[i(p,{name:"users",class:"h-4 w-4 text-blue-600"})]),t("div",Ne,[e[28]||(e[28]=t("div",{class:"text-[10px] font-medium text-gray-500 uppercase leading-tight"},"Total Docentes",-1)),t("div",Ve,l(s.resumen.total_docentes),1)])])]),_:1}),i(u,null,{default:m(()=>[t("div",Te,[t("div",je,[i(p,{name:"clock",class:"h-4 w-4 text-green-600"})]),t("div",qe,[e[29]||(e[29]=t("div",{class:"text-[10px] font-medium text-gray-500 uppercase leading-tight"},"Total Horas",-1)),t("div",Se,l(s.formatNumber(s.resumen.total_horas))+"h",1)])])]),_:1}),i(u,null,{default:m(()=>[t("div",Me,[t("div",Be,[i(p,{name:"dollar-sign",class:"h-4 w-4 text-yellow-600"})]),t("div",He,[e[30]||(e[30]=t("div",{class:"text-[10px] font-medium text-gray-500 uppercase leading-tight"},"Total Bruto",-1)),t("div",Ie,l(s.formatCurrency(s.resumen.total_bruto)),1)])])]),_:1}),i(u,{class:"bg-gradient-to-br from-blue-500 to-blue-600"},{default:m(()=>[t("div",Fe,[t("div",Pe,[i(p,{name:"trending-up",class:"h-4 w-4 text-white"})]),t("div",Ue,[e[31]||(e[31]=t("div",{class:"text-[10px] font-medium text-blue-100 uppercase leading-tight"},"Total a Pagar",-1)),t("div",Re,l(s.formatCurrency(s.resumen.total_pagar)),1)])])]),_:1})])):w("",!0),i(u,null,{default:m(()=>[t("div",Oe,[t("nav",ze,[t("button",{onClick:e[5]||(e[5]=a=>s.activeTab="previsiones"),class:F(["flex items-center gap-2 px-5 py-2.5 text-sm font-medium border-b-2 transition-colors",s.activeTab==="previsiones"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[i(p,{name:"eye",class:"h-4 w-4"}),e[32]||(e[32]=f(" Previsiones ",-1))],2),t("button",{onClick:e[6]||(e[6]=a=>s.activeTab="liquidaciones"),class:F(["flex items-center gap-2 px-5 py-2.5 text-sm font-medium border-b-2 transition-colors",s.activeTab==="liquidaciones"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[i(p,{name:"file-text",class:"h-4 w-4"}),e[33]||(e[33]=f(" Liquidaciones ",-1))],2)])]),s.activeTab==="previsiones"?(x(),g("div",Je,[s.loading?(x(),P(L,{key:0,class:"py-12"})):s.previsiones.length===0?(x(),g("div",Ge,[i(p,{name:"inbox",class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e[35]||(e[35]=t("p",{class:"text-gray-500 mb-4"},"No hay previsiones para este mes",-1)),i(d,{onClick:s.generarPrevisiones,"icon-left":"plus"},{default:m(()=>[...e[34]||(e[34]=[f(" Generar Previsiones ",-1)])]),_:1},8,["onClick"])])):(x(),g("div",Ye,[t("table",Qe,[t("thead",We,[t("tr",null,[t("th",Ze,[t("input",{type:"checkbox",onChange:e[7]||(e[7]=(...a)=>s.toggleSelectAll&&s.toggleSelectAll(...a)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,32)]),e[36]||(e[36]=t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Docente",-1)),e[37]||(e[37]=t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"DNI/NIE",-1)),e[38]||(e[38]=t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Course",-1)),e[39]||(e[39]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Horas",-1)),e[40]||(e[40]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Bruto",-1)),e[41]||(e[41]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Vacaciones",-1)),e[42]||(e[42]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"SS",-1)),e[43]||(e[43]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total",-1)),e[44]||(e[44]=t("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones",-1))])]),t("tbody",Ke,[(x(!0),g(U,null,R(s.previsiones,a=>(x(),g("tr",{key:`prev-${a.employee}-${a.course}`,class:"hover:bg-gray-50"},[t("td",Xe,[q(t("input",{type:"checkbox",value:`${a.employee}-${a.course}`,"onUpdate:modelValue":e[8]||(e[8]=v=>s.seleccionadas=v),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,$e),[[O,s.seleccionadas]])]),t("td",et,l(a.employee_name),1),t("td",tt,l(a.dni_nie),1),t("td",st,l(a.course),1),t("td",at,l(s.formatNumber(a.total_horas))+"h",1),t("td",ot,l(s.formatCurrency(a.bruto)),1),t("td",rt,l(s.formatCurrency(a.vacaciones_mes)),1),t("td",lt,l(s.formatCurrency(a.importe_ss)),1),t("td",nt,l(s.formatCurrency(a.total)),1),t("td",it,[t("div",dt,[i(d,{onClick:v=>s.verDetalle(a),appearance:"minimal",icon:"eye",class:"!p-1"},null,8,["onClick"]),i(d,{onClick:v=>s.agregarHorasExtras(a),appearance:"minimal",icon:"clock",class:"!p-1"},null,8,["onClick"])])])]))),128))])])]))])):w("",!0),s.activeTab==="liquidaciones"?(x(),g("div",ct,[s.loading?(x(),P(L,{key:0,class:"py-12"})):s.liquidaciones.length===0?(x(),g("div",mt,[i(p,{name:"inbox",class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e[45]||(e[45]=t("p",{class:"text-gray-500"},"No hay liquidaciones creadas para este mes",-1))])):(x(),g("div",ut,[t("table",xt,[t("thead",gt,[t("tr",null,[t("th",yt,[t("input",{type:"checkbox",onChange:e[9]||(e[9]=(...a)=>s.toggleSelectAllLiquidaciones&&s.toggleSelectAllLiquidaciones(...a)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,32)]),e[46]||(e[46]=t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Docente",-1)),e[47]||(e[47]=t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"DNI/NIE",-1)),e[48]||(e[48]=t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Course",-1)),e[49]||(e[49]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Horas N",-1)),e[50]||(e[50]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Horas E",-1)),e[51]||(e[51]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total H",-1)),e[52]||(e[52]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Bruto",-1)),e[53]||(e[53]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"SS",-1)),e[54]||(e[54]=t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total",-1)),e[55]||(e[55]=t("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado",-1)),e[56]||(e[56]=t("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones",-1))])]),t("tbody",pt,[(x(!0),g(U,null,R(s.liquidaciones,a=>(x(),g("tr",{key:a.name,class:"hover:bg-gray-50"},[t("td",ft,[q(t("input",{type:"checkbox",value:a.name,"onUpdate:modelValue":e[10]||(e[10]=v=>s.seleccionadasLiquidaciones=v),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,vt),[[O,s.seleccionadasLiquidaciones]])]),t("td",bt,l(a.employee_name),1),t("td",_t,l(a.dni_nie),1),t("td",ht,l(a.course),1),t("td",wt,l(s.formatNumber(a.horas_normales)),1),t("td",kt,l(s.formatNumber(a.horas_extras)),1),t("td",Ct,l(s.formatNumber(a.total_horas)),1),t("td",Et,l(s.formatCurrency(a.bruto)),1),t("td",At,l(s.formatCurrency(a.importe_ss)),1),t("td",Dt,l(s.formatCurrency(a.total)),1),t("td",Lt,[i(j,{theme:s.getEstadoBadgeTheme(a.estado)},{default:m(()=>[f(l(a.estado),1)]),_:2},1032,["theme"])]),t("td",Nt,[i(d,{onClick:v=>s.abrirLiquidacion(a.name),appearance:"minimal",icon:"external-link",class:"!p-1"},null,8,["onClick"])])]))),128))])])]))])):w("",!0)]),_:1}),i(A,{modelValue:s.showDetalleModal,"onUpdate:modelValue":e[12]||(e[12]=a=>s.showDetalleModal=a),options:{title:"Detalle de Liquidaci\xF3n",size:"3xl"}},{"body-content":m(()=>[s.detalleActual?(x(),g("div",Vt,[t("div",Tt,[t("div",jt,[e[61]||(e[61]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Informaci\xF3n B\xE1sica",-1)),t("div",qt,[t("div",St,[e[57]||(e[57]=t("span",{class:"text-gray-500"},"Empleado:",-1)),t("span",Mt,l(s.detalleActual.employee_name),1)]),t("div",Bt,[e[58]||(e[58]=t("span",{class:"text-gray-500"},"DNI/NIE:",-1)),t("span",Ht,l(s.detalleActual.dni_nie),1)]),t("div",It,[e[59]||(e[59]=t("span",{class:"text-gray-500"},"Designation:",-1)),t("span",Ft,l(s.detalleActual.designation),1)]),t("div",Pt,[e[60]||(e[60]=t("span",{class:"text-gray-500"},"Course:",-1)),t("span",Ut,l(s.detalleActual.course),1)])])]),t("div",Rt,[e[66]||(e[66]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Horas Trabajadas",-1)),t("div",Ot,[t("div",zt,[e[62]||(e[62]=t("span",{class:"text-gray-500"},"Horas Normales:",-1)),t("span",Jt,l(s.formatNumber(s.detalleActual.horas_normales))+"h",1)]),t("div",Gt,[e[63]||(e[63]=t("span",{class:"text-gray-500"},"Horas Extras:",-1)),t("span",Yt,l(s.formatNumber(s.detalleActual.horas_extras))+"h",1)]),t("div",Qt,[e[64]||(e[64]=t("span",{class:"text-gray-500 font-medium"},"Total Horas:",-1)),t("span",Wt,l(s.formatNumber(s.detalleActual.total_horas))+"h",1)]),t("div",Zt,[e[65]||(e[65]=t("span",{class:"text-gray-500"},"D\xEDas Trabajados:",-1)),t("span",Kt,l(s.detalleActual.dias_trabajados)+" d\xEDas",1)])])])]),t("div",Xt,[e[77]||(e[77]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-4"},"C\xE1lculo de Importes",-1)),t("div",$t,[t("div",es,[e[67]||(e[67]=t("span",{class:"text-gray-600"},"Precio por Hora:",-1)),t("span",ts,l(s.formatCurrency(s.detalleActual.precio_hora)),1)]),t("div",ss,[e[68]||(e[68]=t("span",{class:"text-gray-600"},"Importe Horas Normales:",-1)),t("span",as,l(s.formatCurrency(s.detalleActual.importe_horas_normales)),1)]),s.detalleActual.horas_extras>0?(x(),g("div",os,[e[69]||(e[69]=t("span",{class:"text-gray-600"},"Importe Horas Extras:",-1)),t("span",rs,l(s.formatCurrency(s.detalleActual.importe_horas_extras)),1)])):w("",!0),t("div",ls,[e[70]||(e[70]=t("span",{class:"text-gray-900"},"BRUTO TOTAL:",-1)),t("span",ns,l(s.formatCurrency(s.detalleActual.bruto)),1)]),t("div",is,[e[71]||(e[71]=t("span",null,"Vacaciones (8.33%):",-1)),t("span",null,"-"+l(s.formatCurrency(s.detalleActual.vacaciones_mes)),1)]),t("div",ds,[e[72]||(e[72]=t("span",{class:"text-gray-600"},"Bruto - Vacaciones:",-1)),t("span",cs,l(s.formatCurrency(s.detalleActual.bruto_menos_vacaciones)),1)]),s.detalleActual.vacaciones_acumuladas>0?(x(),g("div",ms,[e[73]||(e[73]=t("span",{class:"text-gray-600"},"Vacaciones Acumuladas:",-1)),t("span",us,l(s.formatCurrency(s.detalleActual.vacaciones_acumuladas)),1)])):w("",!0),t("div",xs,[e[74]||(e[74]=t("span",{class:"text-gray-600"},"Base para SS:",-1)),t("span",gs,l(s.formatCurrency(s.detalleActual.base_ss)),1)]),t("div",ys,[e[75]||(e[75]=t("span",{class:"text-gray-600"},"Seguridad Social (32.07%):",-1)),t("span",ps,l(s.formatCurrency(s.detalleActual.importe_ss)),1)]),t("div",fs,[e[76]||(e[76]=t("span",{class:"text-blue-900"},"TOTAL A PAGAR:",-1)),t("span",vs,l(s.formatCurrency(s.detalleActual.total)),1)])])])])):w("",!0)]),actions:m(()=>[i(d,{appearance:"white",onClick:e[11]||(e[11]=a=>s.showDetalleModal=!1)},{default:m(()=>[...e[78]||(e[78]=[f(" Cerrar ",-1)])]),_:1})]),_:1},8,["modelValue"]),i(A,{modelValue:s.showHorasExtrasModal,"onUpdate:modelValue":e[16]||(e[16]=a=>s.showHorasExtrasModal=a),options:{title:"Agregar Horas Extras",size:"md"}},{"body-content":m(()=>[s.horasExtrasData?(x(),g("div",bs,[t("div",_s,[t("p",hs,[e[79]||(e[79]=t("strong",null,"Docente:",-1)),f(" "+l(s.horasExtrasData.employee_name),1)]),t("p",ws,[e[80]||(e[80]=t("strong",null,"Course:",-1)),f(" "+l(s.horasExtrasData.course),1)])]),t("div",null,[e[81]||(e[81]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Horas Extras",-1)),i(y,{type:"number",modelValue:s.horasExtrasData.horas_extras,"onUpdate:modelValue":e[13]||(e[13]=a=>s.horasExtrasData.horas_extras=a),step:"0.5",min:"0"},null,8,["modelValue"])]),t("div",null,[e[82]||(e[82]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Precio Hora Extra (opcional)",-1)),i(y,{type:"number",modelValue:s.horasExtrasData.precio_hora_extra,"onUpdate:modelValue":e[14]||(e[14]=a=>s.horasExtrasData.precio_hora_extra=a),step:"0.01",min:"0",placeholder:`Por defecto: ${s.formatCurrency(s.horasExtrasData.precio_hora*1.2)}`},null,8,["modelValue","placeholder"]),e[83]||(e[83]=t("p",{class:"text-xs text-gray-500 mt-1"},"Si no se especifica, se usa 120% del precio normal",-1))])])):w("",!0)]),actions:m(()=>[i(d,{appearance:"white",onClick:e[15]||(e[15]=a=>s.showHorasExtrasModal=!1)},{default:m(()=>[...e[84]||(e[84]=[f(" Cancelar ",-1)])]),_:1}),i(d,{onClick:s.guardarHorasExtras},{default:m(()=>[...e[85]||(e[85]=[f(" Guardar ",-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue"])])])}var As=ce(_e,[["render",ks],["__scopeId","data-v-61a74340"]]);export{As as default};
