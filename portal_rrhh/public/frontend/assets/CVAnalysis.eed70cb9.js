var C=Object.defineProperty,S=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var D=(n,t,l)=>t in n?C(n,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[t]=l,j=(n,t)=>{for(var l in t||(t={}))z.call(t,l)&&D(n,l,t[l]);if(O)for(var l of O(t))E.call(t,l)&&D(n,l,t[l]);return n},J=(n,t)=>S(n,T(t));var h=(n,t,l)=>new Promise((d,s)=>{var a=b=>{try{y(l.next(b))}catch(v){s(v)}},i=b=>{try{y(l.throw(b))}catch(v){s(v)}},y=b=>b.done?d(b.value):Promise.resolve(b.value).then(a,i);y((l=l.apply(n,t)).next())});import{z as L,a1 as m,o,c as r,b as e,f as g,e as c,$ as k,a9 as I,Y as f,Z as x,t as p,F as A,E as _,n as u,aa as w}from"./vendor.b007e8f2.js";const M={name:"CVAnalysis",props:{jobApplicant:String,jobOpening:String},data(){return{analysis:null,isAnalyzing:!1,error:null,formJobApplicant:"",formJobOpening:"",applicantSearchText:"",openingSearchText:"",showApplicantDropdown:!1,showOpeningDropdown:!1,highlightedApplicantIndex:-1,highlightedOpeningIndex:-1,pollingAttempts:0,pollingInterval:null,applicantData:null,jobOpeningData:null,loadingApplicant:!1,loadingJobOpening:!1,jobApplicantsList:[],jobOpeningsList:[],loadingJobApplicants:!1,loadingJobOpenings:!1,recentAnalyses:[]}},computed:{effectiveJobApplicant(){return this.formJobApplicant||this.jobApplicant||this.$route.params.jobApplicant||this.$route.query.applicant||""},effectiveJobOpening(){return this.formJobOpening||this.jobOpening||this.$route.params.jobOpening||this.$route.query.opening||""},canAnalyze(){return this.formJobApplicant&&this.formJobOpening},filteredApplicants(){if(!this.applicantSearchText)return this.jobApplicantsList;const n=this.applicantSearchText.toLowerCase();return this.jobApplicantsList.filter(t=>{const l=(t.applicant_name||"").toLowerCase(),d=(t.email_id||"").toLowerCase(),s=(t.name||"").toLowerCase();return l.includes(n)||d.includes(n)||s.includes(n)})},filteredOpenings(){if(!this.openingSearchText)return this.jobOpeningsList;const n=this.openingSearchText.toLowerCase();return this.jobOpeningsList.filter(t=>{const l=(t.job_title||"").toLowerCase(),d=(t.designation||"").toLowerCase(),s=(t.name||"").toLowerCase();return l.includes(n)||d.includes(n)||s.includes(n)})},hasValidData(){return this.analysis&&this.analysis.status==="Completed"?!0:this.analysis&&(this.analysis.skills_match_percentage||this.analysis.experience_relevance||this.analysis.education_match||this.analysis.cv_analysis_text&&this.analysis.cv_analysis_text.trim().length>0)}},mounted(){this.loadJobApplicantsList(),this.loadJobOpeningsList(),this.loadRecentAnalyses(),this.$route.query.analysisId?this.loadAnalysisById(this.$route.query.analysisId):this.effectiveJobApplicant&&this.effectiveJobOpening&&this.loadApplicantAndJobData()},watch:{effectiveJobApplicant(n){n&&!this.applicantData&&this.loadApplicantData()},effectiveJobOpening(n){n&&!this.jobOpeningData&&this.loadJobOpeningData()}},beforeUnmount(){this.pollingInterval&&clearTimeout(this.pollingInterval)},methods:{startAnalysis(){this.canAnalyze&&this.analyzeCV()},clearInputs(){this.formJobApplicant="",this.formJobOpening="",this.applicantSearchText="",this.openingSearchText="",this.showApplicantDropdown=!1,this.showOpeningDropdown=!1,this.analysis=null,this.error=null,this.isAnalyzing=!1,this.applicantData=null,this.jobOpeningData=null},goBackToMain(){this.pollingInterval&&(clearTimeout(this.pollingInterval),this.pollingInterval=null),this.analysis=null,this.isAnalyzing=!1,this.pollingAttempts=0,this.error=null,this.$nextTick(()=>{window.scrollTo({top:0,behavior:"smooth"})})},clearApplicant(){this.formJobApplicant="",this.applicantSearchText="",this.showApplicantDropdown=!1,this.applicantData=null},clearOpening(){this.formJobOpening="",this.openingSearchText="",this.showOpeningDropdown=!1,this.jobOpeningData=null},selectApplicant(n){this.formJobApplicant=n.name,this.applicantSearchText=n.applicant_name||n.name,this.showApplicantDropdown=!1,this.highlightedApplicantIndex=-1,this.onJobApplicantChange()},selectOpening(n){this.formJobOpening=n.name,this.openingSearchText=n.job_title||n.name,this.showOpeningDropdown=!1,this.highlightedOpeningIndex=-1,this.onJobOpeningChange()},onApplicantSearchInput(){const n=this.applicantSearchText.trim();if(n){const t=this.jobApplicantsList.find(l=>{const d=n.toLowerCase(),s=l.name&&l.name.toLowerCase()===d,a=l.applicant_name&&l.applicant_name.toLowerCase()===d,i=l.email_id&&l.email_id.toLowerCase()===d;return s||a||i});t?(this.formJobApplicant=t.name,this.applicantSearchText=t.applicant_name||t.name):this.formJobApplicant=n}else this.formJobApplicant="";this.showApplicantDropdown&&(this.highlightedApplicantIndex=-1)},onApplicantFocus(){this.jobApplicantsList.length>0&&(this.showApplicantDropdown=!0)},onOpeningSearchInput(){const n=this.openingSearchText.trim();if(n){const t=this.jobOpeningsList.find(l=>{const d=n.toLowerCase(),s=l.name&&l.name.toLowerCase()===d,a=l.job_title&&l.job_title.toLowerCase()===d,i=l.designation&&l.designation.toLowerCase()===d;return s||a||i});t?(this.formJobOpening=t.name,this.openingSearchText=t.job_title||t.name):this.formJobOpening=n}else this.formJobOpening="";this.showOpeningDropdown&&(this.highlightedOpeningIndex=-1)},onOpeningFocus(){this.jobOpeningsList.length>0&&(this.showOpeningDropdown=!0)},toggleApplicantDropdown(){this.showApplicantDropdown=!this.showApplicantDropdown,this.showApplicantDropdown&&(this.highlightedApplicantIndex=-1)},toggleOpeningDropdown(){this.showOpeningDropdown=!this.showOpeningDropdown,this.showOpeningDropdown&&(this.highlightedOpeningIndex=-1)},handleApplicantBlur(){setTimeout(()=>{if(this.showApplicantDropdown=!1,this.formJobApplicant){const n=this.jobApplicantsList.find(t=>t.name===this.formJobApplicant);n&&(this.applicantSearchText=n.applicant_name||n.name)}},200)},handleOpeningBlur(){setTimeout(()=>{if(this.showOpeningDropdown=!1,this.formJobOpening){const n=this.jobOpeningsList.find(t=>t.name===this.formJobOpening);n&&(this.openingSearchText=n.job_title||n.name)}},200)},getApplicantDisplayName(n){const t=this.jobApplicantsList.find(l=>l.name===n);return t?t.applicant_name||t.name:n},getOpeningDisplayName(n){const t=this.jobOpeningsList.find(l=>l.name===n);return t?t.job_title||t.name:n},handleApplicantEnter(){this.highlightedApplicantIndex>=0&&this.filteredApplicants[this.highlightedApplicantIndex]?this.selectApplicant(this.filteredApplicants[this.highlightedApplicantIndex]):this.filteredApplicants.length>0?this.selectApplicant(this.filteredApplicants[0]):this.applicantSearchText.trim()&&(this.formJobApplicant=this.applicantSearchText.trim(),this.showApplicantDropdown=!1,this.onJobApplicantChange())},handleOpeningEnter(){this.highlightedOpeningIndex>=0&&this.filteredOpenings[this.highlightedOpeningIndex]?this.selectOpening(this.filteredOpenings[this.highlightedOpeningIndex]):this.filteredOpenings.length>0?this.selectOpening(this.filteredOpenings[0]):this.openingSearchText.trim()&&(this.formJobOpening=this.openingSearchText.trim(),this.showOpeningDropdown=!1,this.onJobOpeningChange())},navigateApplicantDropdown(n){!this.showApplicantDropdown||this.filteredApplicants.length===0||(this.highlightedApplicantIndex+=n,this.highlightedApplicantIndex<0?this.highlightedApplicantIndex=this.filteredApplicants.length-1:this.highlightedApplicantIndex>=this.filteredApplicants.length&&(this.highlightedApplicantIndex=0),this.$nextTick(()=>{var l,d;const t=(d=(l=document.querySelector("#job-applicant-search"))==null?void 0:l.parentElement)==null?void 0:d.querySelector(".absolute");if(t){const s=t.children[this.highlightedApplicantIndex];s&&s.scrollIntoView({block:"nearest",behavior:"smooth"})}}))},navigateOpeningDropdown(n){!this.showOpeningDropdown||this.filteredOpenings.length===0||(this.highlightedOpeningIndex+=n,this.highlightedOpeningIndex<0?this.highlightedOpeningIndex=this.filteredOpenings.length-1:this.highlightedOpeningIndex>=this.filteredOpenings.length&&(this.highlightedOpeningIndex=0),this.$nextTick(()=>{var l,d;const t=(d=(l=document.querySelector("#job-opening-search"))==null?void 0:l.parentElement)==null?void 0:d.querySelector(".absolute");if(t){const s=t.children[this.highlightedOpeningIndex];s&&s.scrollIntoView({block:"nearest",behavior:"smooth"})}}))},clearError(){this.error=null},cancelAnalysis(){this.pollingInterval&&(clearTimeout(this.pollingInterval),this.pollingInterval=null),this.isAnalyzing=!1,this.pollingAttempts=0,this.error="An\xE1lisis cancelado"},analyzeCV(){return h(this,null,function*(){if(!this.effectiveJobApplicant||!this.effectiveJobOpening){this.error="Por favor proporciona tanto el ID del Solicitante de Empleo como el ID de la Vacante";return}yield this.loadApplicantAndJobData(),this.isAnalyzing=!0,this.error=null,this.pollingAttempts=0;try{const n=yield m("ai_hr_recruitment.ai_hr_recruitment.api.cv_analysis.analyze_cv_with_ai",{job_applicant:this.effectiveJobApplicant,job_opening:this.effectiveJobOpening});n&&n.status?n.status==="processing"?this.pollAnalysisStatus(n.analysis_id):n.status==="exists"?(yield this.loadAnalysis(n.analysis_id),this.isAnalyzing=!1):n.status==="error"&&(this.error=n.message||"El an\xE1lisis fall\xF3 al iniciar",this.isAnalyzing=!1):(this.error="Respuesta inesperada del servidor",this.isAnalyzing=!1)}catch(n){this.error=n.message||"Error al iniciar el an\xE1lisis de CV. Por favor verifica tu conexi\xF3n e intenta nuevamente.",this.isAnalyzing=!1}})},pollAnalysisStatus(n){return h(this,null,function*(){const t=30;this.pollingAttempts=0;const l=()=>h(this,null,function*(){if(!!this.isAnalyzing)try{const d=yield m("ai_hr_recruitment.ai_hr_recruitment.api.cv_analysis.get_cv_analysis",{analysis_id:n});if(this.pollingAttempts++,d&&d.status)if(d.status==="Completed"){if(this.analysis=d,d.job_applicant){this.formJobApplicant=d.job_applicant;const s=this.jobApplicantsList.find(a=>a.name===d.job_applicant);s&&(this.applicantSearchText=s.applicant_name||s.name),this.loadApplicantData()}if(d.job_opening){this.formJobOpening=d.job_opening;const s=this.jobOpeningsList.find(a=>a.name===d.job_opening);s&&(this.openingSearchText=s.job_title||s.name),this.loadJobOpeningData()}this.isAnalyzing=!1,this.pollingInterval=null,this.pollingAttempts=0;return}else if(d.status==="Failed"){this.error=this.getErrorMessage(d),this.isAnalyzing=!1,this.pollingInterval=null;return}else if(d.status==="Analyzing"||d.status==="Pending"){this.pollingAttempts<t?this.pollingInterval=setTimeout(l,2e3):(this.error=`El an\xE1lisis sigue proces\xE1ndose despu\xE9s de ${t*2} segundos. Los trabajadores en segundo plano podr\xEDan no estar ejecut\xE1ndose. Por favor verifica si 'bench start' est\xE1 en ejecuci\xF3n.`,this.isAnalyzing=!1,this.pollingInterval=null,this.analysis=d);return}else{this.pollingAttempts<t?this.pollingInterval=setTimeout(l,2e3):(this.error=`Estado de an\xE1lisis desconocido: ${d.status}. Mostrando datos actuales de todos modos.`,this.analysis=d,this.isAnalyzing=!1,this.pollingInterval=null);return}else{this.pollingAttempts<t?this.pollingInterval=setTimeout(l,2e3):(this.error="No se pudo recuperar el estado del an\xE1lisis despu\xE9s de m\xFAltiples intentos",this.isAnalyzing=!1,this.pollingInterval=null);return}}catch(d){this.pollingAttempts<t&&this.isAnalyzing?this.pollingInterval=setTimeout(l,3e3):(this.error="Error al verificar el estado del an\xE1lisis: "+(d.message||"Error desconocido"),this.isAnalyzing=!1,this.pollingInterval=null)}});l()})},loadAnalysis(n){return h(this,null,function*(){try{this.error=null;const t=yield m("ai_hr_recruitment.ai_hr_recruitment.api.cv_analysis.get_cv_analysis",{analysis_id:n});if(t){if(this.analysis=t,t.job_applicant){this.formJobApplicant=t.job_applicant;const l=this.jobApplicantsList.find(d=>d.name===t.job_applicant);l&&(this.applicantSearchText=l.applicant_name||l.name),this.loadApplicantData()}if(t.job_opening){this.formJobOpening=t.job_opening;const l=this.jobOpeningsList.find(d=>d.name===t.job_opening);l&&(this.openingSearchText=l.job_title||l.name),this.loadJobOpeningData()}t.status==="Analyzing"||t.status==="Pending"?(this.isAnalyzing=!0,this.pollAnalysisStatus(n)):t.status==="Completed"?this.isAnalyzing=!1:(this.isAnalyzing=!1,t.status==="Failed"&&(this.error=this.getErrorMessage(t)))}else this.error="An\xE1lisis no encontrado"}catch(t){this.error="Error al cargar el an\xE1lisis: "+(t.message||"Error desconocido")}})},loadAnalysisById(n=null){return h(this,null,function*(){if(!n){this.error="Por favor proporciona un ID de An\xE1lisis";return}this.isAnalyzing=!0,this.error=null,yield this.loadAnalysis(n)})},reloadAnalysis(){return h(this,null,function*(){this.analysis&&this.analysis.name&&(this.isAnalyzing=!0,yield this.loadAnalysis(this.analysis.name))})},getErrorMessage(n){if(n.cv_analysis_text){if(n.cv_analysis_text.includes("disabled"))return"El An\xE1lisis de CV est\xE1 deshabilitado en la Configuraci\xF3n de IA de RRHH";if(n.cv_analysis_text.includes("API key"))return"La clave API de OpenAI no est\xE1 configurada en la Configuraci\xF3n de IA de RRHH";if(n.cv_analysis_text.includes("rate limit"))return"Se excedi\xF3 el l\xEDmite de velocidad de la API de OpenAI. Por favor espera e intenta nuevamente"}return"El an\xE1lisis fall\xF3. Por favor intenta nuevamente o revisa los registros de errores"},formatDate(n){if(!n)return"N/A";try{return new Date(n).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return n}},loadApplicantData(){return h(this,null,function*(){if(!!this.effectiveJobApplicant){this.loadingApplicant=!0;try{const n=yield m("frappe.client.get",{doctype:"Job Applicant",name:this.effectiveJobApplicant});this.applicantData=n}catch(n){this.applicantData=null}finally{this.loadingApplicant=!1}}})},loadJobOpeningData(){return h(this,null,function*(){if(!!this.effectiveJobOpening){this.loadingJobOpening=!0;try{const n=yield m("frappe.client.get",{doctype:"Job Opening",name:this.effectiveJobOpening});this.jobOpeningData=n}catch(n){this.jobOpeningData=null}finally{this.loadingJobOpening=!1}}})},loadApplicantAndJobData(){return h(this,null,function*(){this.effectiveJobApplicant&&(yield this.loadApplicantData()),this.effectiveJobOpening&&(yield this.loadJobOpeningData())})},loadJobApplicantsList(){return h(this,null,function*(){this.loadingJobApplicants=!0;try{const n=yield m("frappe.client.get_list",{doctype:"Job Applicant",fields:["name","applicant_name","email_id","job_title","status"],limit_page_length:1e3,order_by:"modified desc"});this.jobApplicantsList=n||[]}catch(n){this.jobApplicantsList=[]}finally{this.loadingJobApplicants=!1}})},loadJobOpeningsList(){return h(this,null,function*(){this.loadingJobOpenings=!0;try{const n=yield m("frappe.client.get_list",{doctype:"Job Opening",fields:["name","job_title","designation","status","company"],limit_page_length:1e3,order_by:"modified desc"});this.jobOpeningsList=n||[]}catch(n){this.jobOpeningsList=[]}finally{this.loadingJobOpenings=!1}})},onJobApplicantChange(){return h(this,null,function*(){if(this.formJobApplicant){const n=this.jobApplicantsList.find(t=>t.name===this.formJobApplicant);if(n&&(this.applicantSearchText=n.applicant_name||n.name),yield this.loadApplicantData(),this.applicantData&&this.applicantData.job_title){this.formJobOpening=this.applicantData.job_title;const t=this.jobOpeningsList.find(l=>l.name===this.formJobOpening);t&&(this.openingSearchText=t.job_title||t.name),this.formJobOpening&&(yield this.loadJobOpeningData())}}else this.formJobOpening="",this.openingSearchText="",this.applicantData=null})},onJobOpeningChange(){return h(this,null,function*(){if(this.formJobOpening){const n=this.jobOpeningsList.find(t=>t.name===this.formJobOpening);n&&(this.openingSearchText=n.job_title||n.name),yield this.loadJobOpeningData(),this.formJobApplicant&&this.applicantData&&this.applicantData.job_title!==this.formJobOpening&&console.warn("Advertencia: El Solicitante de Empleo seleccionado no est\xE1 asociado con la Vacante seleccionada")}else this.openingSearchText="",this.jobOpeningData=null})},loadRecentAnalyses(){return h(this,null,function*(){try{const n=yield m("frappe.client.get_list",{doctype:"AI CV Analysis",fields:["name","job_applicant","job_opening","status","skills_match_percentage","experience_relevance","education_match","ai_confidence_score","analysis_timestamp"],limit_page_length:10,order_by:"analysis_timestamp desc"});if(n&&n.length>0){const t=[...new Set(n.map(a=>a.job_applicant).filter(Boolean))],l=[...new Set(n.map(a=>a.job_opening).filter(Boolean))];let d={},s={};if(t.length>0){const a=yield m("frappe.client.get_list",{doctype:"Job Applicant",fields:["name","applicant_name"],filters:[["name","in",t]]});d=Object.fromEntries(a.map(i=>[i.name,i.applicant_name]))}if(l.length>0){const a=yield m("frappe.client.get_list",{doctype:"Job Opening",fields:["name","job_title"],filters:[["name","in",l]]});s=Object.fromEntries(a.map(i=>[i.name,i.job_title]))}this.recentAnalyses=n.map(a=>J(j({},a),{candidate_name:d[a.job_applicant]||a.job_applicant,job_title:s[a.job_opening]||a.job_opening}))}else this.recentAnalyses=[]}catch(n){this.recentAnalyses=[]}})},getExperienceRating(){if(!this.analysis||this.analysis.experience_relevance===void 0||this.analysis.experience_relevance===null)return 0;const n=parseFloat(this.analysis.experience_relevance);return n<=1&&n>=0?Math.max(1,Math.min(5,Math.round(n*5))):n>1&&n<=5?Math.max(1,Math.min(5,Math.round(n))):0},getEducationRating(){if(!this.analysis||this.analysis.education_match===void 0||this.analysis.education_match===null)return 0;const n=parseFloat(this.analysis.education_match);return n<=1&&n>=0?Math.max(1,Math.min(5,Math.round(n*5))):n>1&&n<=5?Math.max(1,Math.min(5,Math.round(n))):0}}},V={class:"flex-1 p-6 bg-gray-50 overflow-y-auto h-full"},B={class:"mb-8"},N={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-2"},F={key:0,class:"mb-6"},R={class:"bg-white rounded-lg shadow p-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},q={class:"relative"},H={class:"flex gap-2"},U={class:"relative flex-1"},K=["placeholder","disabled"],G={key:0,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},Y=["disabled"],Z={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Q={key:0,class:"p-2"},W={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},X=["onMousedown"],$={class:"font-medium text-gray-900"},tt={class:"text-sm text-gray-500"},et={class:"text-xs text-gray-400 font-mono"},st={key:1,class:"p-4 text-sm text-gray-500 text-center"},nt={key:2,class:"p-4 text-sm text-gray-500 text-center"},it={key:1,class:"text-xs text-gray-500 mt-1"},at={key:2,class:"text-xs text-green-600 mt-1"},lt={class:"relative"},ot={class:"flex gap-2"},rt={class:"relative flex-1"},pt=["placeholder","disabled"],dt={key:0,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},gt=["disabled"],ct={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},ht={key:0,class:"p-2"},mt={class:"text-xs text-gray-500 px-2 py-1 mb-1 font-semibold"},bt=["onMousedown"],ut={class:"font-medium text-gray-900"},yt={class:"text-sm text-gray-500"},ft={class:"text-xs text-gray-400 font-mono"},xt={key:1,class:"p-4 text-sm text-gray-500 text-center"},At={key:2,class:"p-4 text-sm text-gray-500 text-center"},_t={key:1,class:"text-xs text-gray-500 mt-1"},vt={key:2,class:"text-xs text-green-600 mt-1"},wt=["disabled"],Ot={key:0},Dt={key:1},jt={key:1,class:"mb-6"},Jt={class:"bg-white rounded-lg shadow p-6 mb-4"},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},It={class:"border-r border-gray-200 pr-6"},Ct={class:"flex items-center gap-3 mb-4 pb-3 border-b border-gray-200"},St={class:"text-xs text-gray-500 font-mono ml-auto"},Tt={key:0,class:"space-y-2"},zt={class:"text-sm"},Et={class:"text-gray-900"},Lt={class:"text-sm"},Mt={class:"text-gray-900"},Vt={key:0,class:"text-sm"},Bt={class:"text-gray-900"},Nt={key:1,class:"text-sm"},Ft={class:"text-gray-900"},Rt={key:2,class:"text-sm"},Pt={class:"text-gray-900"},qt={key:1,class:"text-sm text-gray-500 italic"},Ht={class:"flex items-center gap-3 mb-4 pb-3 border-b border-gray-200"},Ut={class:"text-xs text-gray-500 font-mono ml-auto"},Kt={key:0,class:"space-y-2"},Gt={class:"text-sm"},Yt={class:"text-gray-900"},Zt={key:0,class:"text-sm"},Qt={class:"text-gray-900"},Wt={key:1,class:"text-sm"},Xt={class:"text-gray-900"},$t={key:2,class:"text-sm"},te={class:"text-gray-900"},ee={key:3,class:"text-sm"},se={class:"text-gray-900"},ne={key:4,class:"text-sm"},ie={class:"text-gray-900"},ae={key:5,class:"text-sm"},le={class:"text-gray-900"},oe={key:1,class:"text-sm text-gray-500 italic"},re={class:"flex gap-3 flex-wrap"},pe=["disabled"],de={key:0},ge={key:1},ce={key:2,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center justify-between"},he={class:"flex items-center gap-3"},me={class:"text-red-700"},be={key:3,class:"bg-white rounded-lg shadow p-6 mb-6"},ue={key:0,class:"max-h-96 overflow-y-auto pr-2 space-y-3"},ye=["onClick"],fe={class:"flex justify-between items-start mb-2"},xe={class:"flex-1"},Ae={class:"font-medium text-gray-900 mb-1"},_e={class:"text-sm text-gray-600 mb-2"},ve={key:0,class:"flex gap-4 text-sm"},we={class:"text-gray-600"},Oe={class:"text-gray-600"},De={class:"text-gray-600"},je={key:1,class:"text-xs text-gray-500 mt-2"},Je={key:1,class:"text-center py-8 text-gray-500"},ke={key:4,class:"bg-white rounded-lg shadow p-8 text-center mb-6"},Ie={class:"flex justify-between items-center mb-4"},Ce={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-left"},Se={class:"mb-4"},Te={class:"text-xs sm:text-sm text-gray-600 mb-2"},ze={class:"w-full bg-gray-200 rounded-full h-2"},Ee={key:5,class:"space-y-6"},Le={class:"bg-white rounded-lg shadow p-6"},Me={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 mb-4 pb-4 border-b border-gray-200"},Ve={class:"flex-1 min-w-0"},Be={key:0,class:"text-lg sm:text-xl font-semibold text-gray-900"},Ne={key:1,class:"text-lg sm:text-xl font-semibold text-gray-900"},Fe={key:2,class:"text-lg sm:text-xl font-semibold text-gray-900"},Re={key:3,class:"text-lg sm:text-xl font-semibold text-gray-900"},Pe={key:4,class:"text-xs sm:text-sm text-gray-500 mt-1"},qe={class:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6 text-sm text-blue-900"},He={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Ue={class:"bg-gray-50 rounded-lg p-4"},Ke={class:"text-3xl font-bold text-gray-900 mb-2"},Ge={class:"w-full bg-gray-200 rounded-full h-2"},Ye={class:"bg-gray-50 rounded-lg p-4"},Ze={class:"text-2xl mb-2"},Qe={class:"text-sm font-semibold text-gray-700"},We={class:"bg-gray-50 rounded-lg p-4"},Xe={class:"text-2xl mb-2"},$e={class:"text-sm font-semibold text-gray-700"},ts={class:"bg-gray-50 rounded-lg p-4"},es={class:"text-3xl font-bold text-gray-900 mb-2"},ss={class:"w-full bg-gray-200 rounded-full h-2"},ns={class:"bg-gray-50 rounded-lg p-6 mb-6"},is=["innerHTML"],as={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-yellow-800"},ls={class:"bg-gray-50 rounded-lg p-6"},os={class:"text-gray-700 leading-relaxed"},rs={key:0},ps={key:1,class:"text-gray-500 italic"};function ds(n,t,l,d,s,a){return o(),r("div",V,[e("div",B,[e("div",N,[t[31]||(t[31]=e("div",{class:"flex-1 min-w-0"},[e("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2"},"\u{1F4C4} An\xE1lisis de CV con IA"),e("p",{class:"text-xs sm:text-sm text-gray-600"},"Analiza CVs de candidatos usando IA para evaluar la adecuaci\xF3n y coincidencia de habilidades")],-1)),s.analysis||s.isAnalyzing?(o(),r("button",{key:0,onClick:t[0]||(t[0]=(...i)=>a.goBackToMain&&a.goBackToMain(...i)),class:"w-full sm:w-auto px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-semibold flex items-center justify-center gap-2 flex-shrink-0 text-sm sm:text-base"},[...t[30]||(t[30]=[e("span",null,"\u2190",-1),e("span",null,"Volver al Formulario",-1)])])):g("",!0)])]),!a.effectiveJobApplicant||!a.effectiveJobOpening?(o(),r("div",F,[e("div",R,[t[36]||(t[36]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"\u{1F4DD} Ingresar Detalles del An\xE1lisis",-1)),t[37]||(t[37]=e("p",{class:"text-sm text-gray-600 mb-6"},"Selecciona un Solicitante de Empleo y una Vacante de los men\xFAs desplegables a continuaci\xF3n. La Vacante se completar\xE1 autom\xE1ticamente cuando selecciones un Solicitante de Empleo.",-1)),e("div",P,[e("div",q,[t[33]||(t[33]=e("label",{for:"job-applicant-input",class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",null,"\u{1F464}"),c(" Solicitante de Empleo ")],-1)),e("div",H,[e("div",U,[k(e("input",{id:"job-applicant-input",type:"text","onUpdate:modelValue":t[1]||(t[1]=i=>s.applicantSearchText=i),onInput:t[2]||(t[2]=(...i)=>a.onApplicantSearchInput&&a.onApplicantSearchInput(...i)),onFocus:t[3]||(t[3]=(...i)=>a.onApplicantFocus&&a.onApplicantFocus(...i)),onBlur:t[4]||(t[4]=(...i)=>a.handleApplicantBlur&&a.handleApplicantBlur(...i)),onKeydown:[t[5]||(t[5]=f(x((...i)=>a.handleApplicantEnter&&a.handleApplicantEnter(...i),["prevent"]),["enter"])),t[6]||(t[6]=f(i=>s.showApplicantDropdown=!1,["escape"])),t[7]||(t[7]=f(x(i=>a.navigateApplicantDropdown(1),["prevent"]),["down"])),t[8]||(t[8]=f(x(i=>a.navigateApplicantDropdown(-1),["prevent"]),["up"]))],placeholder:s.formJobApplicant?"Escribe el ID o nombre del Solicitante...":"Escribe el ID o nombre del Solicitante manualmente...",disabled:s.loadingJobApplicants,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},null,40,K),[[I,s.applicantSearchText]]),s.formJobApplicant?(o(),r("div",G,[e("button",{onClick:t[9]||(t[9]=(...i)=>a.clearApplicant&&a.clearApplicant(...i)),class:"text-gray-400 hover:text-gray-600",type:"button"}," \u2715 ")])):g("",!0)]),e("button",{type:"button",onClick:t[10]||(t[10]=(...i)=>a.toggleApplicantDropdown&&a.toggleApplicantDropdown(...i)),disabled:s.loadingJobApplicants,class:"px-4 py-2 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",title:"Explorar lista de solicitantes"},[...t[32]||(t[32]=[e("span",{class:"text-lg"},"\u25BC",-1)])],8,Y)]),s.showApplicantDropdown?(o(),r("div",Z,[a.filteredApplicants.length>0?(o(),r("div",Q,[e("div",W,"Seleccionar de la lista ("+p(a.filteredApplicants.length)+" resultados):",1),(o(!0),r(A,null,_(a.filteredApplicants,(i,y)=>(o(),r("div",{key:i.name,onMousedown:x(b=>a.selectApplicant(i),["prevent"]),class:u(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",y===s.highlightedApplicantIndex?"bg-blue-100":"hover:bg-blue-50"])},[e("div",$,p(i.applicant_name||i.name),1),e("div",tt,p(i.email_id||""),1),e("div",et,p(i.name),1)],42,X))),128))])):s.applicantSearchText?(o(),r("div",st,' No se encontraron solicitantes que coincidan con "'+p(s.applicantSearchText)+'" ',1)):(o(),r("div",nt," Comienza a escribir para buscar, o despl\xE1zate para explorar todos los solicitantes "))])):g("",!0),s.loadingJobApplicants?(o(),r("p",it,"Cargando solicitantes...")):g("",!0),s.formJobApplicant&&!s.loadingJobApplicants?(o(),r("p",at," \u2713 Seleccionado: "+p(a.getApplicantDisplayName(s.formJobApplicant)),1)):g("",!0)]),e("div",lt,[t[35]||(t[35]=e("label",{for:"job-opening-input",class:"block text-sm font-medium text-gray-700 mb-2"},[e("span",null,"\u{1F4BC}"),c(" Vacante ")],-1)),e("div",ot,[e("div",rt,[k(e("input",{id:"job-opening-input",type:"text","onUpdate:modelValue":t[11]||(t[11]=i=>s.openingSearchText=i),onInput:t[12]||(t[12]=(...i)=>a.onOpeningSearchInput&&a.onOpeningSearchInput(...i)),onFocus:t[13]||(t[13]=(...i)=>a.onOpeningFocus&&a.onOpeningFocus(...i)),onBlur:t[14]||(t[14]=(...i)=>a.handleOpeningBlur&&a.handleOpeningBlur(...i)),onKeydown:[t[15]||(t[15]=f(x((...i)=>a.handleOpeningEnter&&a.handleOpeningEnter(...i),["prevent"]),["enter"])),t[16]||(t[16]=f(i=>s.showOpeningDropdown=!1,["escape"])),t[17]||(t[17]=f(x(i=>a.navigateOpeningDropdown(1),["prevent"]),["down"])),t[18]||(t[18]=f(x(i=>a.navigateOpeningDropdown(-1),["prevent"]),["up"]))],placeholder:s.formJobOpening?"Escribe el ID o nombre de la Vacante...":"Escribe el ID o nombre de la Vacante manualmente...",disabled:s.loadingJobOpenings,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},null,40,pt),[[I,s.openingSearchText]]),s.formJobOpening?(o(),r("div",dt,[e("button",{onClick:t[19]||(t[19]=(...i)=>a.clearOpening&&a.clearOpening(...i)),class:"text-gray-400 hover:text-gray-600",type:"button"}," \u2715 ")])):g("",!0)]),e("button",{type:"button",onClick:t[20]||(t[20]=(...i)=>a.toggleOpeningDropdown&&a.toggleOpeningDropdown(...i)),disabled:s.loadingJobOpenings,class:"px-4 py-2 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",title:"Explorar lista de vacantes"},[...t[34]||(t[34]=[e("span",{class:"text-lg"},"\u25BC",-1)])],8,gt)]),s.showOpeningDropdown?(o(),r("div",ct,[a.filteredOpenings.length>0?(o(),r("div",ht,[e("div",mt,"Seleccionar de la lista ("+p(a.filteredOpenings.length)+" resultados):",1),(o(!0),r(A,null,_(a.filteredOpenings,(i,y)=>(o(),r("div",{key:i.name,onMousedown:x(b=>a.selectOpening(i),["prevent"]),class:u(["px-4 py-2 cursor-pointer border-b border-gray-100 last:border-b-0",y===s.highlightedOpeningIndex?"bg-blue-100":"hover:bg-blue-50"])},[e("div",ut,p(i.job_title||i.name),1),e("div",yt,p(i.designation||""),1),e("div",ft,p(i.name),1)],42,bt))),128))])):s.openingSearchText?(o(),r("div",xt,' No se encontraron vacantes que coincidan con "'+p(s.openingSearchText)+'" ',1)):(o(),r("div",At," Comienza a escribir para buscar, o despl\xE1zate para explorar todas las vacantes "))])):g("",!0),s.loadingJobOpenings?(o(),r("p",_t,"Cargando vacantes...")):g("",!0),s.formJobOpening&&!s.loadingJobOpenings?(o(),r("p",vt," \u2713 Seleccionado: "+p(a.getOpeningDisplayName(s.formJobOpening)),1)):g("",!0)])]),e("button",{onClick:t[21]||(t[21]=(...i)=>a.startAnalysis&&a.startAnalysis(...i)),disabled:!a.canAnalyze||s.isAnalyzing,class:"w-full px-6 py-3 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed"},[s.isAnalyzing?(o(),r("span",Ot,"\u{1F504} Analizando...")):(o(),r("span",Dt,"\u{1F680} Iniciar An\xE1lisis con IA"))],8,wt)])])):(o(),r("div",jt,[e("div",Jt,[e("div",kt,[e("div",It,[e("div",Ct,[t[38]||(t[38]=e("span",{class:"text-2xl"},"\u{1F464}",-1)),t[39]||(t[39]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Solicitante de Empleo",-1)),e("span",St,p(a.effectiveJobApplicant),1)]),s.applicantData?(o(),r("div",Tt,[e("p",zt,[t[40]||(t[40]=e("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),t[41]||(t[41]=c()),e("span",Et,p(s.applicantData.applicant_name||"N/A"),1)]),e("p",Lt,[t[42]||(t[42]=e("span",{class:"font-medium text-gray-700"},"Correo:",-1)),t[43]||(t[43]=c()),e("span",Mt,p(s.applicantData.email_id||"N/A"),1)]),s.applicantData.phone_number?(o(),r("p",Vt,[t[44]||(t[44]=e("span",{class:"font-medium text-gray-700"},"Tel\xE9fono:",-1)),t[45]||(t[45]=c()),e("span",Bt,p(s.applicantData.phone_number),1)])):g("",!0),s.applicantData.designation?(o(),r("p",Nt,[t[46]||(t[46]=e("span",{class:"font-medium text-gray-700"},"Designaci\xF3n:",-1)),t[47]||(t[47]=c()),e("span",Ft,p(s.applicantData.designation),1)])):g("",!0),s.applicantData.status?(o(),r("p",Rt,[t[48]||(t[48]=e("span",{class:"font-medium text-gray-700"},"Estado:",-1)),t[49]||(t[49]=c()),e("span",Pt,p(s.applicantData.status),1)])):g("",!0)])):(o(),r("div",qt,"Cargando datos del solicitante..."))]),e("div",null,[e("div",Ht,[t[50]||(t[50]=e("span",{class:"text-2xl"},"\u{1F4BC}",-1)),t[51]||(t[51]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Vacante",-1)),e("span",Ut,p(a.effectiveJobOpening),1)]),s.jobOpeningData?(o(),r("div",Kt,[e("p",Gt,[t[52]||(t[52]=e("span",{class:"font-medium text-gray-700"},"T\xEDtulo:",-1)),t[53]||(t[53]=c()),e("span",Yt,p(s.jobOpeningData.job_title||"N/A"),1)]),s.jobOpeningData.designation?(o(),r("p",Zt,[t[54]||(t[54]=e("span",{class:"font-medium text-gray-700"},"Designaci\xF3n:",-1)),t[55]||(t[55]=c()),e("span",Qt,p(s.jobOpeningData.designation),1)])):g("",!0),s.jobOpeningData.company?(o(),r("p",Wt,[t[56]||(t[56]=e("span",{class:"font-medium text-gray-700"},"Empresa:",-1)),t[57]||(t[57]=c()),e("span",Xt,p(s.jobOpeningData.company),1)])):g("",!0),s.jobOpeningData.department?(o(),r("p",$t,[t[58]||(t[58]=e("span",{class:"font-medium text-gray-700"},"Departamento:",-1)),t[59]||(t[59]=c()),e("span",te,p(s.jobOpeningData.department),1)])):g("",!0),s.jobOpeningData.location?(o(),r("p",ee,[t[60]||(t[60]=e("span",{class:"font-medium text-gray-700"},"Ubicaci\xF3n:",-1)),t[61]||(t[61]=c()),e("span",se,p(s.jobOpeningData.location),1)])):g("",!0),s.jobOpeningData.employment_type?(o(),r("p",ne,[t[62]||(t[62]=e("span",{class:"font-medium text-gray-700"},"Tipo:",-1)),t[63]||(t[63]=c()),e("span",ie,p(s.jobOpeningData.employment_type),1)])):g("",!0),s.jobOpeningData.status?(o(),r("p",ae,[t[64]||(t[64]=e("span",{class:"font-medium text-gray-700"},"Estado:",-1)),t[65]||(t[65]=c()),e("span",le,p(s.jobOpeningData.status),1)])):g("",!0)])):(o(),r("div",oe,"Cargando datos de la vacante..."))])])]),e("div",re,[e("button",{onClick:t[22]||(t[22]=(...i)=>a.analyzeCV&&a.analyzeCV(...i)),disabled:s.isAnalyzing,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed"},[s.isAnalyzing?(o(),r("span",de,"\u{1F504} Analizando...")):(o(),r("span",ge,"\u{1F50D} Analizar CV"))],8,pe),e("button",{onClick:t[23]||(t[23]=(...i)=>a.clearInputs&&a.clearInputs(...i)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"},"Cambiar IDs"),s.analysis?(o(),r("button",{key:0,onClick:t[24]||(t[24]=(...i)=>a.reloadAnalysis&&a.reloadAnalysis(...i)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"},"\u{1F504} Recargar")):g("",!0)])])),s.error?(o(),r("div",ce,[e("div",he,[t[67]||(t[67]=e("span",{class:"text-xl"},"\u26A0\uFE0F",-1)),e("div",null,[t[66]||(t[66]=e("strong",{class:"text-red-800"},"Error:",-1)),e("span",me,p(s.error),1)])]),e("button",{onClick:t[25]||(t[25]=(...i)=>a.clearError&&a.clearError(...i)),class:"text-red-600 hover:text-red-800"},"\u2715")])):g("",!0),!s.isAnalyzing&&!s.analysis&&!a.effectiveJobApplicant&&!a.effectiveJobOpening?(o(),r("div",be,[t[72]||(t[72]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F4CA} An\xE1lisis de CV Recientes",-1)),s.recentAnalyses.length>0?(o(),r("div",ue,[(o(!0),r(A,null,_(s.recentAnalyses,i=>(o(),r("div",{key:i.name,onClick:y=>a.loadAnalysis(i.name),class:"p-4 border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 cursor-pointer transition-colors"},[e("div",fe,[e("div",xe,[e("div",Ae,p(i.candidate_name||i.job_applicant||"Candidato Desconocido"),1),e("div",_e,p(i.job_title||i.job_opening||"Trabajo Desconocido"),1)]),e("span",{class:u(["px-2 py-1 rounded-full text-xs font-medium",i.status==="Completed"?"bg-green-100 text-green-800":i.status==="Analyzing"?"bg-yellow-100 text-yellow-800":i.status==="Failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"])},p(i.status),3)]),i.status==="Completed"?(o(),r("div",ve,[e("div",we,[t[68]||(t[68]=e("span",{class:"font-medium"},"Habilidades:",-1)),c(" "+p(i.skills_match_percentage||0)+"% ",1)]),e("div",Oe,[t[69]||(t[69]=e("span",{class:"font-medium"},"Experiencia:",-1)),c(" "+p(i.experience_relevance||0)+"/5 ",1)]),e("div",De,[t[70]||(t[70]=e("span",{class:"font-medium"},"Confianza:",-1)),c(" "+p(i.ai_confidence_score||0)+"% ",1)])])):g("",!0),i.analysis_timestamp?(o(),r("div",je,p(a.formatDate(i.analysis_timestamp)),1)):g("",!0)],8,ye))),128))])):(o(),r("div",Je,[...t[71]||(t[71]=[e("div",{class:"text-4xl mb-3"},"\u{1F4ED}",-1),e("p",null,"No se encontraron an\xE1lisis de CV recientes.",-1),e("p",{class:"text-sm mt-2"},"Comienza a analizar CVs para verlos aqu\xED.",-1)])]))])):g("",!0),s.isAnalyzing&&!s.analysis?(o(),r("div",ke,[e("div",Ie,[t[74]||(t[74]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900"},"\u{1F916} La IA est\xE1 Analizando el CV...",-1)),e("button",{onClick:t[26]||(t[26]=(...i)=>a.goBackToMain&&a.goBackToMain(...i)),class:"px-3 sm:px-4 py-1.5 sm:py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-semibold flex items-center gap-2 text-xs sm:text-sm flex-shrink-0"},[...t[73]||(t[73]=[e("span",null,"\u2190",-1),e("span",{class:"hidden sm:inline"},"Volver",-1)])])]),t[79]||(t[79]=e("div",{class:"relative inline-block mb-6"},[e("div",{class:"w-16 h-16 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})],-1)),t[80]||(t[80]=e("p",{class:"text-xs sm:text-sm text-gray-600 mb-6"},"Este es un an\xE1lisis real usando OpenAI GPT-4",-1)),e("div",Ce,[e("div",{class:u(["p-3 rounded-lg",s.pollingAttempts>0?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-500"])},[...t[75]||(t[75]=[e("span",{class:"mr-2"},"\u2713",-1),c(" Solicitud en cola ",-1)])],2),e("div",{class:u(["p-3 rounded-lg",s.pollingAttempts>2?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-500"])},[...t[76]||(t[76]=[e("span",{class:"mr-2"},"\u23F3",-1),c(" Procesando CV ",-1)])],2),e("div",{class:u(["p-3 rounded-lg",s.pollingAttempts>5?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-500"])},[...t[77]||(t[77]=[e("span",{class:"mr-2"},"\u23F3",-1),c(" Llamando a OpenAI ",-1)])],2),e("div",{class:u(["p-3 rounded-lg",s.pollingAttempts>8?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-500"])},[...t[78]||(t[78]=[e("span",{class:"mr-2"},"\u23F3",-1),c(" Analizando resultados ",-1)])],2)]),e("div",Se,[e("p",Te,"Verificando estado... ("+p(s.pollingAttempts)+"/30 intentos, ~"+p(Math.round(s.pollingAttempts*2))+"s transcurridos)",1),e("div",ze,[e("div",{class:"bg-blue-500 h-2 rounded-full transition-all",style:w({width:Math.min(s.pollingAttempts/30*100,100)+"%"})},null,4)])]),s.pollingAttempts>5?(o(),r("button",{key:0,onClick:t[27]||(t[27]=(...i)=>a.cancelAnalysis&&a.cancelAnalysis(...i)),class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-xs sm:text-sm"},"Cancelar An\xE1lisis")):g("",!0)])):g("",!0),s.analysis?(o(),r("div",Ee,[e("div",Le,[e("div",Me,[e("div",Ve,[s.analysis.status==="Completed"?(o(),r("h3",Be,"\u2705 An\xE1lisis Completado")):s.analysis.status==="Analyzing"?(o(),r("h3",Ne,"\u23F3 An\xE1lisis en Progreso")):s.analysis.status==="Failed"?(o(),r("h3",Fe,"\u274C An\xE1lisis Fallido")):(o(),r("h3",Re,"\u{1F4CA} An\xE1lisis (Estado: "+p(s.analysis.status)+")",1)),s.analysis.analysis_timestamp?(o(),r("div",Pe," Analizado el "+p(a.formatDate(s.analysis.analysis_timestamp)),1)):g("",!0)]),e("button",{onClick:t[28]||(t[28]=(...i)=>a.goBackToMain&&a.goBackToMain(...i)),class:"w-full sm:w-auto px-3 sm:px-4 py-1.5 sm:py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-semibold flex items-center justify-center gap-2 flex-shrink-0 text-xs sm:text-sm"},[...t[81]||(t[81]=[e("span",null,"\u2190",-1),e("span",null,"Volver al Formulario",-1)])])]),e("div",qe,[t[88]||(t[88]=e("p",{class:"font-semibold mb-2"},"\u{1F50D} Informaci\xF3n de Depuraci\xF3n:",-1)),e("p",null,[t[82]||(t[82]=e("strong",null,"Estado:",-1)),c(" "+p(s.analysis.status),1)]),e("p",null,[t[83]||(t[83]=e("strong",null,"ID del An\xE1lisis:",-1)),c(" "+p(s.analysis.name),1)]),e("p",null,[t[84]||(t[84]=e("strong",null,"Tiene texto:",-1)),c(" "+p(s.analysis.cv_analysis_text?"S\xED ("+s.analysis.cv_analysis_text.length+" caracteres)":"No"),1)]),e("p",null,[t[85]||(t[85]=e("strong",null,"Habilidades:",-1)),c(" "+p(s.analysis.skills_match_percentage||"N/A")+"%",1)]),e("p",null,[t[86]||(t[86]=e("strong",null,"Experiencia:",-1)),c(" "+p(s.analysis.experience_relevance||"N/A"),1)]),e("p",null,[t[87]||(t[87]=e("strong",null,"Educaci\xF3n:",-1)),c(" "+p(s.analysis.education_match||"N/A"),1)])]),e("div",He,[e("div",Ue,[t[89]||(t[89]=e("div",{class:"flex items-center gap-2 mb-2"},[e("span",{class:"text-xl"},"\u{1F3AF}"),e("h4",{class:"text-sm font-medium text-gray-700"},"Coincidencia de Habilidades")],-1)),e("div",Ke,p(s.analysis.skills_match_percentage||0)+"%",1),e("div",Ge,[e("div",{class:"bg-blue-500 h-2 rounded-full",style:w({width:(s.analysis.skills_match_percentage||0)+"%"})},null,4)])]),e("div",Ye,[t[90]||(t[90]=e("div",{class:"flex items-center gap-2 mb-2"},[e("span",{class:"text-xl"},"\u{1F4BC}"),e("h4",{class:"text-sm font-medium text-gray-700"},"Experiencia")],-1)),e("div",Ze,[(o(),r(A,null,_(5,i=>e("span",{key:i,class:u(i<=a.getExperienceRating()?"text-yellow-500":"text-gray-300")},"\u2605",2)),64))]),e("div",Qe,p(a.getExperienceRating())+"/5",1)]),e("div",We,[t[91]||(t[91]=e("div",{class:"flex items-center gap-2 mb-2"},[e("span",{class:"text-xl"},"\u{1F393}"),e("h4",{class:"text-sm font-medium text-gray-700"},"Educaci\xF3n")],-1)),e("div",Xe,[(o(),r(A,null,_(5,i=>e("span",{key:i,class:u(i<=a.getEducationRating()?"text-yellow-500":"text-gray-300")},"\u2605",2)),64))]),e("div",$e,p(a.getEducationRating())+"/5",1)]),e("div",ts,[t[92]||(t[92]=e("div",{class:"flex items-center gap-2 mb-2"},[e("span",{class:"text-xl"},"\u{1F4CA}"),e("h4",{class:"text-sm font-medium text-gray-700"},"Confianza de la IA")],-1)),e("div",es,p(s.analysis.ai_confidence_score||0)+"%",1),e("div",ss,[e("div",{class:"bg-green-500 h-2 rounded-full",style:w({width:(s.analysis.ai_confidence_score||0)+"%"})},null,4)])])]),e("div",ns,[t[96]||(t[96]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F4CB} An\xE1lisis Detallado de la IA",-1)),s.analysis.cv_analysis_text&&s.analysis.cv_analysis_text.trim().length>0?(o(),r("div",{key:0,class:"text-gray-700 leading-relaxed whitespace-pre-wrap",innerHTML:s.analysis.cv_analysis_text},null,8,is)):(o(),r("div",as,[t[93]||(t[93]=e("p",{class:"font-semibold mb-2"},"\u26A0\uFE0F El an\xE1lisis se complet\xF3 pero no se gener\xF3 texto detallado.",-1)),t[94]||(t[94]=e("p",{class:"text-sm mb-2"},"Esto podr\xEDa suceder si:",-1)),t[95]||(t[95]=e("ul",{class:"text-sm list-disc list-inside mb-3"},[e("li",null,"La respuesta de la IA estaba incompleta"),e("li",null,"Hubo un error al analizar la respuesta de la IA"),e("li",null,"Los datos del an\xE1lisis a\xFAn se est\xE1n procesando")],-1)),e("button",{onClick:t[29]||(t[29]=(...i)=>a.reloadAnalysis&&a.reloadAnalysis(...i)),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"},"\u{1F504} Recargar An\xE1lisis")]))]),e("div",ls,[t[97]||(t[97]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-200"},"\u{1F4A1} Recomendaciones de la IA",-1)),e("div",os,[s.analysis.ai_recommendations&&s.analysis.ai_recommendations.trim().length>0?(o(),r("p",rs,p(s.analysis.ai_recommendations),1)):(o(),r("p",ps," \u26A0\uFE0F No se generaron recomendaciones para este an\xE1lisis. "))])])])])):g("",!0)])}var hs=L(M,[["render",ds],["__scopeId","data-v-b32720ba"]]);export{hs as default};
