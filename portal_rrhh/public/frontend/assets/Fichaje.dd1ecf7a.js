var Z=(B,R,Y)=>new Promise((r,v)=>{var x=M=>{try{_(Y.next(M))}catch(S){v(S)}},D=M=>{try{_(Y.throw(M))}catch(S){v(S)}},_=M=>M.done?r(M.value):Promise.resolve(M.value).then(x,D);_((Y=Y.apply(B,R)).next())});import{a1 as it,r as C,l as W,ak as lt,K as X,q as P,a8 as dt,al as ct,u as f,o as h,c as g,b as e,t as u,d as w,w as j,_ as A,e as F,Q as K,f as N,J as tt,am as et,F as U,E as J,n as q,s as st,C as ot,y as at,aa as ut,k as mt}from"./vendor.0086aa74.js";import{d as b}from"./es.72676fb6.js";import{_ as ht}from"./Modelo145Dialog.64cd28e5.js";var nt={exports:{}};(function(B,R){(function(Y,r){B.exports=r()})(it,function(){var Y,r,v=1e3,x=6e4,D=36e5,_=864e5,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S=31536e6,L=2628e6,T=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,l={years:S,months:L,days:_,hours:D,minutes:x,seconds:v,milliseconds:1,weeks:6048e5},O=function(i){return i instanceof n},k=function(i,s,t){return new n(i,t,s.$l)},$=function(i){return r.p(i)+"s"},I=function(i){return i<0},z=function(i){return I(i)?Math.ceil(i):Math.floor(i)},m=function(i){return Math.abs(i)},p=function(i,s){return i?I(i)?{negative:!0,format:""+m(i)+s}:{negative:!1,format:""+i+s}:{negative:!1,format:""}},n=function(){function i(t,o,a){var d=this;if(this.$d={},this.$l=a,t===void 0&&(this.$ms=0,this.parseFromMilliseconds()),o)return k(t*l[$(o)],this);if(typeof t=="number")return this.$ms=t,this.parseFromMilliseconds(),this;if(typeof t=="object")return Object.keys(t).forEach(function(E){d.$d[$(E)]=t[E]}),this.calMilliseconds(),this;if(typeof t=="string"){var c=t.match(T);if(c){var y=c.slice(2).map(function(E){return E!=null?Number(E):0});return this.$d.years=y[0],this.$d.months=y[1],this.$d.weeks=y[2],this.$d.days=y[3],this.$d.hours=y[4],this.$d.minutes=y[5],this.$d.seconds=y[6],this.calMilliseconds(),this}}return this}var s=i.prototype;return s.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce(function(o,a){return o+(t.$d[a]||0)*l[a]},0)},s.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=z(t/S),t%=S,this.$d.months=z(t/L),t%=L,this.$d.days=z(t/_),t%=_,this.$d.hours=z(t/D),t%=D,this.$d.minutes=z(t/x),t%=x,this.$d.seconds=z(t/v),t%=v,this.$d.milliseconds=t},s.toISOString=function(){var t=p(this.$d.years,"Y"),o=p(this.$d.months,"M"),a=+this.$d.days||0;this.$d.weeks&&(a+=7*this.$d.weeks);var d=p(a,"D"),c=p(this.$d.hours,"H"),y=p(this.$d.minutes,"M"),E=this.$d.seconds||0;this.$d.milliseconds&&(E+=this.$d.milliseconds/1e3,E=Math.round(1e3*E)/1e3);var V=p(E,"S"),G=t.negative||o.negative||d.negative||c.negative||y.negative||V.negative,rt=c.format||y.format||V.format?"T":"",Q=(G?"-":"")+"P"+t.format+o.format+d.format+rt+c.format+y.format+V.format;return Q==="P"||Q==="-P"?"P0D":Q},s.toJSON=function(){return this.toISOString()},s.format=function(t){var o=t||"YYYY-MM-DDTHH:mm:ss",a={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return o.replace(M,function(d,c){return c||String(a[d])})},s.as=function(t){return this.$ms/l[$(t)]},s.get=function(t){var o=this.$ms,a=$(t);return a==="milliseconds"?o%=1e3:o=a==="weeks"?z(o/l[a]):this.$d[a],o||0},s.add=function(t,o,a){var d;return d=o?t*l[$(o)]:O(t)?t.$ms:k(t,this).$ms,k(this.$ms+d*(a?-1:1),this)},s.subtract=function(t,o){return this.add(t,o,!0)},s.locale=function(t){var o=this.clone();return o.$l=t,o},s.clone=function(){return k(this.$ms,this)},s.humanize=function(t){return Y().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},s.valueOf=function(){return this.asMilliseconds()},s.milliseconds=function(){return this.get("milliseconds")},s.asMilliseconds=function(){return this.as("milliseconds")},s.seconds=function(){return this.get("seconds")},s.asSeconds=function(){return this.as("seconds")},s.minutes=function(){return this.get("minutes")},s.asMinutes=function(){return this.as("minutes")},s.hours=function(){return this.get("hours")},s.asHours=function(){return this.as("hours")},s.days=function(){return this.get("days")},s.asDays=function(){return this.as("days")},s.weeks=function(){return this.get("weeks")},s.asWeeks=function(){return this.as("weeks")},s.months=function(){return this.get("months")},s.asMonths=function(){return this.as("months")},s.years=function(){return this.get("years")},s.asYears=function(){return this.as("years")},i}(),H=function(i,s,t){return i.add(s.years()*t,"y").add(s.months()*t,"M").add(s.days()*t,"d").add(s.hours()*t,"h").add(s.minutes()*t,"m").add(s.seconds()*t,"s").add(s.milliseconds()*t,"ms")};return function(i,s,t){Y=t,r=t().$utils(),t.duration=function(d,c){var y=t.locale();return k(d,{$l:y},c)},t.isDuration=O;var o=s.prototype.add,a=s.prototype.subtract;s.prototype.add=function(d,c){return O(d)?H(this,d,1):o.bind(this)(d,c)},s.prototype.subtract=function(d,c){return O(d)?H(this,d,-1):a.bind(this)(d,c)}}})})(nt);var ft=nt.exports;const gt={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 mb-4"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vt={class:"flex flex-col justify-center items-start space-y-4"},yt={class:"text-xl font-bold text-gray-900 leading-tight"},_t={class:"text-sm text-gray-500 mt-1"},bt={key:0,class:"w-full"},xt={class:"mt-4 flex items-center space-x-2"},$t={key:0,class:"flex items-center text-green-600 font-medium"},Mt={key:1,class:"flex items-center text-gray-500 font-medium"},kt={class:"bg-gray-50 rounded-lg p-4 border border-gray-100 flex flex-col justify-center space-y-4"},wt={class:"text-right border-b border-gray-200 pb-2"},Yt={class:"text-2xl font-bold text-gray-800"},Dt={class:"text-base text-gray-500 uppercase tracking-wide"},St={class:"text-xs text-gray-400 mt-1"},jt={class:"grid grid-cols-2 gap-3"},Ot={class:"bg-white p-3 rounded shadow-sm border border-gray-100"},Tt={class:"text-[10px] uppercase font-bold text-gray-400 tracking-wider mb-1"},Ct={class:"text-xl font-mono font-semibold text-gray-800"},Nt={class:"bg-white p-3 rounded shadow-sm border border-gray-100"},It={class:"text-[10px] uppercase font-bold text-gray-400 tracking-wider mb-1"},Ht={class:"text-xl font-mono font-semibold text-gray-500"},zt={class:"text-xs text-center text-gray-400"},Et={class:"flex flex-col items-center justify-center gap-4 py-6"},Vt={class:"text-center"},Lt={class:"font-bold text-3xl mb-1"},Rt={class:"font-medium text-gray-500"},Ft={key:0,class:"w-full"},Bt={key:0,class:"font-medium text-gray-500 text-sm mb-2 text-center"},Pt={key:1,class:"rounded overflow-hidden w-full h-48 border bg-gray-50"},At=["src"],Ut={key:2,class:"h-48 bg-gray-100 flex items-center justify-center text-gray-400 rounded"},Jt="Employee Checkin",qt={__name:"CheckInWidget",setup(B){b.locale("es"),b.extend(ft);const R=o=>b(o).format("HH:mm"),Y=o=>{const a=b.duration(o,"seconds"),d=Math.floor(a.asHours()),c=a.minutes(),y=a.seconds();return`${d.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`},r=(o,a)=>{if(!o)return"";let d=o;return a&&a.length&&a.forEach((c,y)=>{d=d.replace(`{${y}}`,c)}),d},v=C(null),x=C(0),D=C(0),_=C(""),M=C(!1),S=C(!1),L=C(0),T=C(0);let l=null;const O=W({url:"hrms.api.get_current_employee_info",auto:!0}),k=W({url:"hrms.api.get_hr_settings",auto:!0}),$=lt({doctype:Jt,fields:["name","log_type","time"],orderBy:"time desc",pageLength:50,auto:!1});X(()=>O.data,o=>{o&&o.name&&($.filters={employee:o.name,time:[">=",b().startOf("day").format("YYYY-MM-DD HH:mm:ss")]},$.reload())});const I=P(()=>$.list.loading||!$.data||$.data.length===0?null:$.data[0]),z=P(()=>I.value&&I.value.log_type==="IN"?"check-in":"check-out"),m=P(()=>!I.value||I.value.log_type==="OUT"?{action:"IN",label:r("Entrar")}:{action:"OUT",label:r("Salir")}),p=()=>{if(!$.data)return;const o=[...$.data].sort((V,G)=>new Date(V.time)-new Date(G.time));let a=0,d=0,c=null,y=null;o.forEach((V,G)=>{V.log_type==="IN"?(y&&(d+=b(V.time).diff(y,"second"),y=null),c=b(V.time)):V.log_type==="OUT"&&(c&&(a+=b(V.time).diff(c,"second"),c=null),y=b(V.time))});const E=b();c&&(a+=E.diff(c,"second")),L.value=a,T.value=d};dt(()=>{l=setInterval(()=>{p()},1e3)}),ct(()=>{l&&clearInterval(l)}),X(()=>$.data,()=>{p()});const n=o=>{x.value=o.coords.latitude,D.value=o.coords.longitude,_.value=[r("Latitud: {0}\xB0",[Number(x.value).toFixed(5)]),r("Longitud: {0}\xB0",[Number(D.value).toFixed(5)])].join(", ")},H=o=>{_.value="No se pudo obtener tu ubicaci\xF3n",o&&(_.value+=`: ERROR(${o.code}): ${o.message}`)},i=()=>{navigator.geolocation?(_.value=r("Localizando..."),navigator.geolocation.getCurrentPosition(n,H)):_.value=r("Geolocalizaci\xF3n no soportada por tu navegador")},s=()=>{var o;v.value=b().format("YYYY-MM-DD HH:mm:ss"),M.value=!0,((o=k.data)==null?void 0:o.allow_geolocation_tracking)&&i()},t=o=>Z(this,null,function*(){const a=r(o==="IN"?"Entrada":"Salida");S.value=!0;try{yield $.insert.submit({employee:O.data.name,log_type:o,time:v.value,latitude:x.value,longitude:D.value}),et({title:r("\xC9xito"),text:r("\xA1{0} registrada correctamente!",[a]),icon:"check-circle",position:"bottom-center",iconClasses:"text-green-500"}),M.value=!1,$.reload()}catch(d){et({title:r("Error"),text:r("\xA1Fallo al registrar {0}!",[a]),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"}),console.error(d)}finally{S.value=!1}});return(o,a)=>{var d;return f(O).data?(h(),g("div",gt,[e("div",pt,[e("div",vt,[e("div",null,[e("h2",yt,u(r("Hola, {0} \u{1F44B}",[f(O).data.first_name])),1),e("p",_t,u(r("Registra tu jornada laboral")),1)]),((d=f(k).data)==null?void 0:d.allow_employee_checkin_from_mobile_app)?(h(),g("div",bt,[w(f(K),{size:"lg",variant:"solid",theme:m.value.action==="IN"?"green":"gray",onClick:s,class:"!px-6 !py-2 !text-base shadow-md w-full md:w-auto justify-center"},{prefix:j(()=>[w(f(A),{name:m.value.action==="IN"?"log-in":"log-out",class:"w-6 h-6 mr-2"},null,8,["name"])]),default:j(()=>[F(" "+u(m.value.label),1)]),_:1},8,["theme"]),e("div",xt,[z.value==="check-in"?(h(),g("div",$t,[a[2]||(a[2]=e("span",{class:"relative flex h-3 w-3 mr-2"},[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})],-1)),F(" "+u(r("Actualmente Trabajando")),1)])):(h(),g("div",Mt,[a[3]||(a[3]=e("span",{class:"h-3 w-3 rounded-full bg-gray-300 mr-2"},null,-1)),F(" "+u(r("Jornada Pausada / No iniciada")),1)]))])])):N("",!0)]),e("div",kt,[e("div",wt,[e("div",Yt,u(f(b)().format("D")),1),e("div",Dt,u(f(b)().format("MMMM YYYY")),1),e("div",St,u(f(b)().format("dddd")),1)]),e("div",jt,[e("div",Ot,[e("div",Tt,u(r("Tiempo Trabajado")),1),e("div",Ct,u(Y(L.value)),1)]),e("div",Nt,[e("div",It,u(r("Tiempo Descanso")),1),e("div",Ht,u(Y(T.value)),1)])]),e("div",zt,u(r("\xDAltimo registro: {0}",[I.value?R(I.value.time):"--:--"])),1)])]),w(f(tt),{modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=c=>M.value=c),options:{title:m.value.label,size:"md"}},{"body-content":j(()=>{var c;return[e("div",Et,[e("div",Vt,[e("div",Lt,u(f(b)(v.value).format("HH:mm:ss")),1),e("div",Rt,u(f(b)().format("D MMM, YYYY")),1)]),((c=f(k).data)==null?void 0:c.allow_geolocation_tracking)?(h(),g("div",Ft,[_.value?(h(),g("div",Bt,u(_.value),1)):N("",!0),x.value&&D.value?(h(),g("div",Pt,[e("iframe",{width:"100%",height:"100%",frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0",style:{border:"0"},src:`https://maps.google.com/maps?q=${x.value},${D.value}&hl=es&z=15&output=embed`},null,8,At)])):(h(),g("div",Ut,u(r("Obteniendo ubicaci\xF3n...")),1))])):N("",!0)])]}),actions:j(()=>[w(f(K),{variant:"solid",class:"w-full",size:"lg",loading:S.value,onClick:a[0]||(a[0]=c=>t(m.value.action))},{default:j(()=>[F(u(r("Confirmar {0}",[m.value.label])),1)]),_:1},8,["loading"])]),_:1},8,["modelValue","options"])])):N("",!0)}}},Wt={class:"attendance-calendar"},Gt={class:"flex justify-end mb-4"},Kt={class:"flex items-center bg-white rounded-md shadow-sm border border-gray-300"},Qt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 relative"},Zt={class:"bg-white"},Xt={class:"text-lg font-bold text-gray-900 mb-4 capitalize text-center"},te={class:"grid grid-cols-7 gap-px bg-gray-200 border border-gray-200 rounded-lg overflow-hidden"},ee={key:0,class:"w-full text-center"},se={key:0,class:"mt-1"},oe={class:"text-lg font-bold text-gray-900"},ae={key:1,class:"mt-1"},ne={key:2,class:"mt-2"},re={class:"bg-white"},ie={class:"text-lg font-bold text-gray-900 mb-4 capitalize text-center"},le={class:"grid grid-cols-7 gap-px bg-gray-200 border border-gray-200 rounded-lg overflow-hidden"},de={key:0,class:"w-full text-center"},ce={key:0,class:"mt-1"},ue={class:"text-lg font-bold text-gray-900"},me={key:1,class:"mt-1"},he={key:2,class:"mt-2"},fe={key:0,class:"absolute inset-0 bg-white/50 z-50 flex items-center justify-center rounded-lg"},ge={class:"bg-white p-3 rounded shadow border flex items-center space-x-3"},pe={class:"text-sm font-medium"},ve={__name:"AttendanceCalendar",props:{employeeId:{type:String,default:null}},setup(B){b.locale("es");const R=B,Y=C(!1),r=C({}),v=C(b().startOf("month")),x=P(()=>v.value.add(1,"month")),D=["Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b","Dom"],_=P(()=>O(v.value)),M=P(()=>O(x.value)),S=m=>m.format("MMMM YYYY"),L=m=>m?m.split(",").map(p=>p.trim()):[],T=m=>({missing_out:"bg-orange-400",missing_in:"bg-orange-400",no_break:"bg-yellow-400",no_checkin:"bg-red-400"})[m]||"bg-red-400",l=m=>({missing_out:"Falta fichaje de salida",missing_in:"Falta fichaje de entrada",no_break:"Jornada > 6h sin descanso",no_checkin:"Sin fichaje ni justificaci\xF3n"})[m]||"Anomal\xEDa detectada";function O(m){const p=m.startOf("month"),n=m.endOf("month"),H=m.daysInMonth(),i=[];let s=p.day();s===0&&(s=7),s-=1;for(let a=0;a<s;a++)i.push({inMonth:!1,dayNum:"",date:null});for(let a=1;a<=H;a++){const d=p.date(a).format("YYYY-MM-DD");i.push({inMonth:!0,dayNum:a,date:d,isToday:d===b().format("YYYY-MM-DD"),data:r.value[d]||null})}const t=n.day();let o=0;t!==0&&(o=7-t);for(let a=0;a<o;a++)i.push({inMonth:!1,dayNum:"",date:null});return i}const k=m=>{v.value=v.value.add(m,"month"),I()},$=()=>{v.value=b().startOf("month"),I()},I=()=>Z(this,null,function*(){if(!R.employeeId){r.value={};return}Y.value=!0;try{const m=v.value.format("YYYY-MM-DD"),p=x.value.endOf("month").format("YYYY-MM-DD"),n=yield ut("portal_rrhh.api.attendance.get_attendance_report",{employee:R.employeeId,from_date:m,to_date:p});if(n&&n.success&&n.data){const H={};n.data.forEach(i=>{H[i.date]=i}),r.value=H}else r.value={}}catch(m){console.error(m)}finally{Y.value=!1}});X(()=>R.employeeId,()=>{I()},{immediate:!0});const z=m=>m;return(m,p)=>(h(),g("div",Wt,[e("div",Gt,[e("div",Kt,[e("button",{onClick:p[0]||(p[0]=n=>k(-1)),class:"p-2 hover:bg-gray-50 border-r border-gray-300 text-gray-600"},[w(f(A),{name:"chevron-left",class:"h-5 w-5"})]),e("button",{onClick:$,class:"px-4 py-2 text-sm font-medium hover:bg-gray-50 text-gray-700 border-r border-gray-300"},u(z("Hoy")),1),e("button",{onClick:p[1]||(p[1]=n=>k(1)),class:"p-2 hover:bg-gray-50 text-gray-600"},[w(f(A),{name:"chevron-right",class:"h-5 w-5"})])])]),e("div",Qt,[e("div",Zt,[e("h3",Xt,u(S(v.value)),1),e("div",te,[(h(),g(U,null,J(D,n=>e("div",{key:n,class:"bg-gray-50 py-2 text-center text-xs font-semibold text-gray-500 uppercase"},u(n),1)),64)),(h(!0),g(U,null,J(_.value,(n,H)=>(h(),g("div",{key:H,class:q(["bg-white min-h-[100px] p-2 flex flex-col items-center justify-start relative group transition-colors hover:bg-blue-50",{"bg-gray-50":!n.inMonth,"bg-blue-50":n.isToday}])},[e("span",{class:q(["text-xs font-medium mb-1",n.isToday?"text-blue-600":"text-gray-400"])},u(n.dayNum),3),n.inMonth&&n.data?(h(),g("div",ee,[n.data.hours>0?(h(),g("div",se,[e("span",oe,u(n.data.hours)+"h",1)])):N("",!0),n.data.status?(h(),g("div",ae,[(h(!0),g(U,null,J(L(n.data.status),(i,s)=>(h(),st(f(ot),{key:s,size:"sm",variant:"subtle",theme:"orange",class:"mb-0.5 mx-auto block max-w-full truncate"},{default:j(()=>[F(u(i),1)]),_:2},1024))),128))])):N("",!0),n.data.anomaly?(h(),g("div",ne,[w(f(at),{text:n.data.anomaly_desc||l(n.data.anomaly)},{default:j(()=>[e("span",{class:q(["h-2.5 w-2.5 rounded-full inline-block cursor-help",T(n.data.anomaly)])},null,2)]),_:2},1032,["text"])])):N("",!0)])):N("",!0)],2))),128))])]),e("div",re,[e("h3",ie,u(S(x.value)),1),e("div",le,[(h(),g(U,null,J(D,n=>e("div",{key:n,class:"bg-gray-50 py-2 text-center text-xs font-semibold text-gray-500 uppercase"},u(n),1)),64)),(h(!0),g(U,null,J(M.value,(n,H)=>(h(),g("div",{key:H,class:q(["bg-white min-h-[100px] p-2 flex flex-col items-center justify-start relative group transition-colors hover:bg-blue-50",{"bg-gray-50":!n.inMonth,"bg-blue-50":n.isToday}])},[e("span",{class:q(["text-xs font-medium mb-1",n.isToday?"text-blue-600":"text-gray-400"])},u(n.dayNum),3),n.inMonth&&n.data?(h(),g("div",de,[n.data.hours>0?(h(),g("div",ce,[e("span",ue,u(n.data.hours)+"h",1)])):N("",!0),n.data.status?(h(),g("div",me,[(h(!0),g(U,null,J(L(n.data.status),(i,s)=>(h(),st(f(ot),{key:s,size:"sm",variant:"subtle",theme:"orange",class:"mb-0.5 mx-auto block max-w-full truncate"},{default:j(()=>[F(u(i),1)]),_:2},1024))),128))])):N("",!0),n.data.anomaly?(h(),g("div",he,[w(f(at),{text:n.data.anomaly_desc||l(n.data.anomaly)},{default:j(()=>[e("span",{class:q(["h-2.5 w-2.5 rounded-full inline-block cursor-help",T(n.data.anomaly)])},null,2)]),_:2},1032,["text"])])):N("",!0)])):N("",!0)],2))),128))])]),Y.value?(h(),g("div",fe,[e("div",ge,[p[2]||(p[2]=e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"},null,-1)),e("span",pe,u(z("Cargando...")),1)])])):N("",!0)])]))}},ye={class:"flex flex-col h-full overflow-hidden"},_e={class:"flex-1 overflow-y-auto p-5"},be={key:0},xe={class:"text-lg font-semibold text-gray-800 mb-4"},$e={class:"flex flex-col items-center justify-center p-6 text-center"},Me={class:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4"},ke={class:"flex flex-col items-center justify-center p-6 text-center"},we={class:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mb-4"},Oe={__name:"Fichaje",setup(B){const R=mt(),Y=T=>T,r=C(!1),v=C(!1),x=C(!1);W({url:"portal_rrhh.api.onboarding.has_pending_onboarding",auto:!0,onSuccess:T=>{T.has_pending&&(r.value=!0)}});const D=W({url:"portal_rrhh.api.modelo145.has_modelo_145",auto:!0,onSuccess:T=>{T.has_modelo||(v.value=!0)}}),_=W({url:"hrms.api.get_current_employee_info",auto:!0}),M=()=>{R.push({name:"Onboarding"})},S=()=>{x.value=!0},L=()=>{v.value=!1,D.reload()};return(T,l)=>{var O;return h(),g("div",ye,[e("div",_e,[w(qt),f(_).data?(h(),g("div",be,[e("h3",xe,u(Y("Mi Asistencia")),1),w(ve,{employeeId:f(_).data.name},null,8,["employeeId"])])):N("",!0)]),w(f(tt),{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=k=>r.value=k),options:{size:"xl",preventClose:!0}},{"body-content":j(()=>[e("div",$e,[e("div",Me,[w(f(A),{name:"alert-circle",class:"w-8 h-8 text-orange-600"})]),l[4]||(l[4]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," Acci\xF3n Requerida ",-1)),l[5]||(l[5]=e("p",{class:"text-lg text-gray-600 mb-6"},[F(" No puedes registrar tu jornada hasta completar tu proceso de onboarding. "),e("br"),F(" Por favor, revisa y firma los documentos pendientes. ")],-1)),w(f(K),{variant:"solid",size:"xl",onClick:M},{default:j(()=>[...l[3]||(l[3]=[F(" Ir al Onboarding ",-1)])]),_:1})])]),actions:j(()=>[...l[6]||(l[6]=[e("div",null,null,-1)])]),_:1},8,["modelValue"]),w(f(tt),{modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=k=>v.value=k),options:{size:"xl",preventClose:!0}},{"body-content":j(()=>[e("div",ke,[e("div",we,[w(f(A),{name:"file-text",class:"w-8 h-8 text-amber-600"})]),l[8]||(l[8]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," Modelo 145 Requerido ",-1)),l[9]||(l[9]=e("p",{class:"text-lg text-gray-600 mb-4"}," No puedes registrar tu jornada hasta presentar tu Modelo 145. ",-1)),l[10]||(l[10]=e("p",{class:"text-sm text-gray-500 mb-6"}," El Modelo 145 es la comunicaci\xF3n de datos al pagador para el c\xE1lculo de retenciones del IRPF. Es obligatorio para todos los empleados. ",-1)),w(f(K),{variant:"solid",size:"xl",class:"!bg-amber-600 hover:!bg-amber-700",onClick:S},{prefix:j(()=>[w(f(A),{name:"file-text",class:"w-5 h-5"})]),default:j(()=>[l[7]||(l[7]=F(" Rellenar Modelo 145 ",-1))]),_:1})])]),actions:j(()=>[...l[11]||(l[11]=[e("div",null,null,-1)])]),_:1},8,["modelValue"]),w(ht,{modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=k=>x.value=k),"employee-id":((O=f(_).data)==null?void 0:O.name)||"",onSuccess:L},null,8,["modelValue","employee-id"])])}}};export{Oe as default};
