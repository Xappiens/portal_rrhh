var c=(e,a,t)=>new Promise((r,n)=>{var l=o=>{try{p(t.next(o))}catch(_){n(_)}},i=o=>{try{p(t.throw(o))}catch(_){n(_)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,i);p((t=t.apply(e,a)).next())});import{q as A,o as y,c as d,b as s,t as u,X as v,F as h,x as m,f,n as g}from"./vendor.484941ed.js";const z={name:"CVAnalysis",props:{jobApplicant:String,jobOpening:String},data(){return{analysis:null,isAnalyzing:!1}},methods:{analyzeCV(){return c(this,null,function*(){this.isAnalyzing=!0;try{const e=yield this.$http.post("/api/method/ai_hr_recruitment.ai_hr_recruitment.api.cv_analysis.analyze_cv_with_ai",{job_applicant:this.jobApplicant,job_opening:this.jobOpening});e.data.message.status==="processing"?this.pollAnalysisStatus(e.data.message.analysis_id):e.data.message.status==="exists"&&this.loadAnalysis(e.data.message.analysis_id)}catch(e){console.error("Error analyzing CV:",e),this.isAnalyzing=!1}})},pollAnalysisStatus(e){return c(this,null,function*(){const a=30;let t=0;const r=()=>c(this,null,function*(){try{const l=(yield this.$http.get(`/api/resource/AI CV Analysis/${e}`)).data.data;l.status==="Completed"?(this.analysis=l,this.isAnalyzing=!1):l.status==="Failed"?(console.error("Analysis failed"),this.isAnalyzing=!1):t<a?(t++,setTimeout(r,2e3)):(console.error("Analysis timeout"),this.isAnalyzing=!1)}catch(n){console.error("Error polling analysis status:",n),this.isAnalyzing=!1}});r()})},loadAnalysis(e){return c(this,null,function*(){try{const a=yield this.$http.get(`/api/resource/AI CV Analysis/${e}`);this.analysis=a.data.data}catch(a){console.error("Error loading analysis:",a)}})}}},b={class:"cv-analysis"},C={class:"analysis-header"},V=["disabled"],x={key:0,class:"analysis-content"},k={class:"analysis-scores"},j={class:"score-item"},S={class:"progress-bar"},E={class:"score-item"},w={class:"rating"},I={class:"score-item"},M={class:"rating"},B={class:"analysis-text"},F=["innerHTML"],L={class:"recommendations"};function T(e,a,t,r,n,l){return y(),d("div",b,[s("div",C,[a[1]||(a[1]=s("h3",null,"AI CV Analysis",-1)),s("button",{onClick:a[0]||(a[0]=(...i)=>l.analyzeCV&&l.analyzeCV(...i)),disabled:n.isAnalyzing,class:"btn btn-primary"},u(n.isAnalyzing?"Analyzing...":"Analyze CV"),9,V)]),n.analysis?(y(),d("div",x,[s("div",k,[s("div",j,[a[2]||(a[2]=s("label",null,"Skills Match",-1)),s("div",S,[s("div",{class:"progress-fill",style:v({width:n.analysis.skills_match_percentage+"%"})},null,4)]),s("span",null,u(n.analysis.skills_match_percentage)+"%",1)]),s("div",E,[a[3]||(a[3]=s("label",null,"Experience Relevance",-1)),s("div",w,[(y(),d(h,null,m(5,i=>s("span",{key:i,class:g({filled:i<=n.analysis.experience_relevance})},"\u2605",2)),64))])]),s("div",I,[a[4]||(a[4]=s("label",null,"Education Match",-1)),s("div",M,[(y(),d(h,null,m(5,i=>s("span",{key:i,class:g({filled:i<=n.analysis.education_match})},"\u2605",2)),64))])])]),s("div",B,[a[5]||(a[5]=s("h4",null,"AI Analysis",-1)),s("div",{innerHTML:n.analysis.cv_analysis_text},null,8,F)]),s("div",L,[a[6]||(a[6]=s("h4",null,"AI Recommendations",-1)),s("p",null,u(n.analysis.ai_recommendations),1)])])):f("",!0)])}var O=A(z,[["render",T]]);export{O as default};
