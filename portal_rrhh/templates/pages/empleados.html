<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empleados - Portal RRHH</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/frappe-ui@latest/dist/frappe-ui.umd.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <script src="/assets/portal_rrhh/frappe-ui-components.js"></script>
    <style>
        :root {
            --primary: #2e7d32;
            --primary-dark: #1b5e20;
            --secondary: #f5f5f5;
            --text: #333333;
            --text-light: #666666;
            --border: #e0e0e0;
            --background: #ffffff;
            --surface: #fafafa;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="flex min-h-screen">
            <!-- Sidebar -->
            <div class="w-64 bg-gradient-to-b from-green-600 to-green-800 text-white p-6">
                <div class="mb-8">
                    <h1 class="text-2xl font-bold">
                        <i class="fas fa-users mr-2"></i>
                        Portal RRHH
                    </h1>
                    <p class="text-green-100 text-sm mt-1">Recursos Humanos</p>
                </div>

                <nav class="space-y-2">
                    <a href="portal_rrhh.html" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-colors">
                        <i class="fas fa-tachometer-alt mr-3"></i>
                        Dashboard
                    </a>
                    <a href="empleados.html" class="flex items-center px-4 py-3 rounded-lg bg-white bg-opacity-20 text-white">
                        <i class="fas fa-users mr-3"></i>
                        Empleados
                    </a>
                    <a href="vacantes.html" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-colors">
                        <i class="fas fa-briefcase mr-3"></i>
                        Vacantes
                    </a>
                    <a href="solicitudes.html" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-colors">
                        <i class="fas fa-file-alt mr-3"></i>
                        Solicitudes
                    </a>
                    <a href="evaluaciones.html" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-colors">
                        <i class="fas fa-star mr-3"></i>
                        Evaluaciones
                    </a>
                    <a href="reportes.html" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-white hover:bg-opacity-20 transition-colors">
                        <i class="fas fa-chart-bar mr-3"></i>
                        Reportes
                    </a>
                </nav>
            </div>

            <!-- Main Content -->
            <div class="flex-1 p-8 bg-gray-50">
                <div class="max-w-7xl mx-auto">
                    <!-- Header -->
                    <div class="mb-8">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-3xl font-bold text-gray-900">Gestión de Empleados</h2>
                                <p class="text-gray-600 mt-2">Administra la información de todos los empleados</p>
                            </div>
                            <button
                                @click="showAddDialog = true"
                                class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center"
                            >
                                <i class="fas fa-plus mr-2"></i>
                                Nuevo Empleado
                            </button>
                        </div>
                    </div>

                    <!-- Filters and Search -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Buscar</label>
                                <input
                                    v-model="searchQuery"
                                    type="text"
                                    placeholder="Nombre, email, departamento..."
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                >
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Departamento</label>
                                <select
                                    v-model="selectedDepartment"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                >
                                    <option value="">Todos los departamentos</option>
                                    <option value="IT">Tecnología</option>
                                    <option value="HR">Recursos Humanos</option>
                                    <option value="Sales">Ventas</option>
                                    <option value="Marketing">Marketing</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
                                <select
                                    v-model="selectedStatus"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                >
                                    <option value="">Todos los estados</option>
                                    <option value="active">Activo</option>
                                    <option value="inactive">Inactivo</option>
                                    <option value="on-leave">En licencia</option>
                                </select>
                            </div>
                            <div class="flex items-end">
                                <button
                                    @click="clearFilters"
                                    class="w-full bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors"
                                >
                                    Limpiar Filtros
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                    <i class="fas fa-users text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Total Empleados</p>
                                    <p class="text-2xl font-bold text-gray-900">{{ employees.length }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 text-green-600">
                                    <i class="fas fa-user-check text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Activos</p>
                                    <p class="text-2xl font-bold text-gray-900">{{ activeEmployees }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                                    <i class="fas fa-user-clock text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">En Licencia</p>
                                    <p class="text-2xl font-bold text-gray-900">{{ onLeaveEmployees }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-red-100 text-red-600">
                                    <i class="fas fa-user-times text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Inactivos</p>
                                    <p class="text-2xl font-bold text-gray-900">{{ inactiveEmployees }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Employees Table -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">Lista de Empleados</h3>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Empleado
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Departamento
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Posición
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Estado
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Fecha Ingreso
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Acciones
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr v-for="employee in filteredEmployees" :key="employee.id" class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10">
                                                    <img class="h-10 w-10 rounded-full" :src="employee.avatar" :alt="employee.name">
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">{{ employee.name }}</div>
                                                    <div class="text-sm text-gray-500">{{ employee.email }}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                {{ employee.department }}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            {{ employee.position }}
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="getStatusClasses(employee.status)" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium">
                                                {{ getStatusText(employee.status) }}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            {{ formatDate(employee.startDate) }}
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex space-x-2">
                                                <button @click="viewEmployee(employee)" class="text-green-600 hover:text-green-900">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button @click="editEmployee(employee)" class="text-blue-600 hover:text-blue-900">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button @click="deleteEmployee(employee)" class="text-red-600 hover:text-red-900">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Add Employee Dialog -->
                    <div v-if="showAddDialog" class="fixed inset-0 z-50 overflow-y-auto">
                        <div class="flex min-h-screen items-center justify-center p-4">
                            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showAddDialog = false"></div>
                            <div class="relative transform overflow-hidden rounded-lg bg-white shadow-xl transition-all w-full max-w-2xl">
                                <div class="px-6 py-4 border-b border-gray-200">
                                    <h3 class="text-lg font-medium text-gray-900">Agregar Nuevo Empleado</h3>
                                </div>
                                <div class="px-6 py-4">
                                    <form @submit.prevent="addEmployee" class="space-y-4">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Nombre Completo</label>
                                                <input
                                                    v-model="newEmployee.name"
                                                    type="text"
                                                    required
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                                >
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                                <input
                                                    v-model="newEmployee.email"
                                                    type="email"
                                                    required
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                                >
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Departamento</label>
                                                <select
                                                    v-model="newEmployee.department"
                                                    required
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                                >
                                                    <option value="">Seleccionar departamento</option>
                                                    <option value="IT">Tecnología</option>
                                                    <option value="HR">Recursos Humanos</option>
                                                    <option value="Sales">Ventas</option>
                                                    <option value="Marketing">Marketing</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Posición</label>
                                                <input
                                                    v-model="newEmployee.position"
                                                    type="text"
                                                    required
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                                >
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Teléfono</label>
                                                <input
                                                    v-model="newEmployee.phone"
                                                    type="tel"
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                                >
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de Ingreso</label>
                                                <input
                                                    v-model="newEmployee.startDate"
                                                    type="date"
                                                    required
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"
                                                >
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3">
                                    <button
                                        @click="showAddDialog = false"
                                        class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors"
                                    >
                                        Cancelar
                                    </button>
                                    <button
                                        @click="addEmployee"
                                        class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"
                                    >
                                        Guardar Empleado
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    searchQuery: '',
                    selectedDepartment: '',
                    selectedStatus: '',
                    showAddDialog: false,
                    newEmployee: {
                        name: '',
                        email: '',
                        department: '',
                        position: '',
                        phone: '',
                        startDate: ''
                    },
                    employees: [
                        {
                            id: 1,
                            name: 'Juan Pérez',
                            email: 'juan.perez@empresa.com',
                            department: 'IT',
                            position: 'Desarrollador Senior',
                            status: 'active',
                            phone: '+34 123 456 789',
                            startDate: '2022-01-15',
                            avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face'
                        },
                        {
                            id: 2,
                            name: 'María García',
                            email: 'maria.garcia@empresa.com',
                            department: 'HR',
                            position: 'Especialista RRHH',
                            status: 'active',
                            phone: '+34 123 456 790',
                            startDate: '2021-03-20',
                            avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face'
                        },
                        {
                            id: 3,
                            name: 'Carlos López',
                            email: 'carlos.lopez@empresa.com',
                            department: 'Sales',
                            position: 'Gerente de Ventas',
                            status: 'on-leave',
                            phone: '+34 123 456 791',
                            startDate: '2020-06-10',
                            avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face'
                        },
                        {
                            id: 4,
                            name: 'Ana Martínez',
                            email: 'ana.martinez@empresa.com',
                            department: 'Marketing',
                            position: 'Coordinadora de Marketing',
                            status: 'active',
                            phone: '+34 123 456 792',
                            startDate: '2023-02-01',
                            avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face'
                        }
                    ]
                }
            },
            computed: {
                filteredEmployees() {
                    return this.employees.filter(employee => {
                        const matchesSearch = !this.searchQuery ||
                            employee.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                            employee.email.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                            employee.department.toLowerCase().includes(this.searchQuery.toLowerCase());

                        const matchesDepartment = !this.selectedDepartment || employee.department === this.selectedDepartment;
                        const matchesStatus = !this.selectedStatus || employee.status === this.selectedStatus;

                        return matchesSearch && matchesDepartment && matchesStatus;
                    });
                },
                activeEmployees() {
                    return this.employees.filter(emp => emp.status === 'active').length;
                },
                onLeaveEmployees() {
                    return this.employees.filter(emp => emp.status === 'on-leave').length;
                },
                inactiveEmployees() {
                    return this.employees.filter(emp => emp.status === 'inactive').length;
                }
            },
            methods: {
                clearFilters() {
                    this.searchQuery = '';
                    this.selectedDepartment = '';
                    this.selectedStatus = '';
                },
                getStatusClasses(status) {
                    const classes = {
                        active: 'bg-green-100 text-green-800',
                        inactive: 'bg-red-100 text-red-800',
                        'on-leave': 'bg-yellow-100 text-yellow-800'
                    };
                    return classes[status] || 'bg-gray-100 text-gray-800';
                },
                getStatusText(status) {
                    const texts = {
                        active: 'Activo',
                        inactive: 'Inactivo',
                        'on-leave': 'En Licencia'
                    };
                    return texts[status] || status;
                },
                formatDate(dateString) {
                    return new Date(dateString).toLocaleDateString('es-ES');
                },
                viewEmployee(employee) {
                    alert(`Ver detalles de ${employee.name}`);
                },
                editEmployee(employee) {
                    alert(`Editar ${employee.name}`);
                },
                deleteEmployee(employee) {
                    if (confirm(`¿Estás seguro de eliminar a ${employee.name}?`)) {
                        const index = this.employees.findIndex(emp => emp.id === employee.id);
                        this.employees.splice(index, 1);
                    }
                },
                addEmployee() {
                    if (this.newEmployee.name && this.newEmployee.email && this.newEmployee.department && this.newEmployee.position && this.newEmployee.startDate) {
                        const newId = Math.max(...this.employees.map(emp => emp.id)) + 1;
                        this.employees.push({
                            id: newId,
                            ...this.newEmployee,
                            status: 'active',
                            avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face'
                        });
                        this.newEmployee = {
                            name: '',
                            email: '',
                            department: '',
                            position: '',
                            phone: '',
                            startDate: ''
                        };
                        this.showAddDialog = false;
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
